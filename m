Return-Path: <etnaviv-bounces@lists.freedesktop.org>
X-Original-To: lists+etnaviv@lfdr.de
Delivered-To: lists+etnaviv@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D05B19A50
	for <lists+etnaviv@lfdr.de>; Fri, 10 May 2019 11:12:36 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id A65AA89BF1;
	Fri, 10 May 2019 09:12:34 +0000 (UTC)
X-Original-To: etnaviv@lists.freedesktop.org
Delivered-To: etnaviv@lists.freedesktop.org
Received: from mail-wm1-x343.google.com (mail-wm1-x343.google.com
 [IPv6:2a00:1450:4864:20::343])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2CB16899E6;
 Fri, 10 May 2019 09:09:21 +0000 (UTC)
Received: by mail-wm1-x343.google.com with SMTP id h11so6551768wmb.5;
 Fri, 10 May 2019 02:09:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=PYycRlV3kOqPzGqQXwb6AijJsr0V5ojRwMZ7N0+hOwo=;
 b=O2IN1WT0Ja8vjo6ZBTeceVUr68dcS027sNkZqd9JdTiO+beK5mo9lCJzWlMwgEshJc
 cANyA21r74Mt0tAeHzIYrL9MQ4TFWjoDO+tvhMgo4gL9El18gHzMKMto9jDmayuXMpet
 gLDxqPL44v+vX4nJu4vfV9mLfSSOAPeVpQIXkxP91uaHplpDq4G3NqVBisUUSqv6AWG8
 xfTp4i2bbR3AFca727E7Q14xHjvAc0m9X4pHK7LdXc++uC6ydPq4VHtIitk4QlwVDS6G
 qG/WVNVw8Bhb2oRtGjWVqO6C6/wnOxXCRptfjApfp7yptAwZvDi4BbAfsTgN4KJwWLs9
 7f1g==
X-Gm-Message-State: APjAAAVZ3+6jTsS5uofmAvQHHR6hsrwQqnbmH2u1GnPTbfDF+HiEFiw6
 a6A9RlPGB0Jd2xHFw5OOqV9fR3R9bwg=
X-Google-Smtp-Source: APXvYqzMOMoW8H2YOCIaZHyWwKcBTZD4tmEUL4dqGQzvXRUhIukYAkX/Cl7IhPuYYtqPIr1BAkHn1A==
X-Received: by 2002:a1c:b4d4:: with SMTP id d203mr6005947wmf.34.1557479359080; 
 Fri, 10 May 2019 02:09:19 -0700 (PDT)
Received: from localhost.localdomain (80-110-110-254.cgn.dynamic.surfer.at.
 [80.110.110.254])
 by smtp.gmail.com with ESMTPSA id l18sm1645344wrv.38.2019.05.10.02.09.17
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Fri, 10 May 2019 02:09:18 -0700 (PDT)
From: Christian Gmeiner <christian.gmeiner@gmail.com>
To: mesa-dev@lists.freedesktop.org
Subject: [RFC PATCH 01/17] etnaviv: add basic block based backend ir: eir
Date: Fri, 10 May 2019 11:08:59 +0200
Message-Id: <20190510090915.2739-2-christian.gmeiner@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190510090915.2739-1-christian.gmeiner@gmail.com>
References: <20190510090915.2739-1-christian.gmeiner@gmail.com>
MIME-Version: 1.0
X-Mailman-Approved-At: Fri, 10 May 2019 09:12:33 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=PYycRlV3kOqPzGqQXwb6AijJsr0V5ojRwMZ7N0+hOwo=;
 b=X8BPPbZML6+WQbOOIKL2vtgwR+QIeXlls/C4LDFpGnocVF4NPu3iV97eCP3J6ozPj7
 v9Zay4Jg7hxXey4QAFuCcwMv10MUfutOnSawBfV91YpWqzyNR26AOp2u3w88k8kEUmR8
 jss2WLHcOjBzeQSOmBBP9yRR79GLRGCMhk8x6fRHD8CuWsCno9Wy0c920BjfI0iIGBT+
 K2JLPZF5+Pnm4r8Eth+3HVgAJB1pZJyKr1IrXYyGiNnSnPI9RN1HoFuW8xcxt8vV5LRs
 5/qaaTkC2b1D9sbuXmYHZIEsyJarWlIa46f8DO/2IXZQ8Q741tB3UiDCYbGaVnslWkOE
 GNwQ==
X-BeenThere: etnaviv@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <etnaviv.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/etnaviv>
List-Post: <mailto:etnaviv@lists.freedesktop.org>
List-Help: <mailto:etnaviv-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=subscribe>
Cc: Christian Gmeiner <christian.gmeiner@gmail.com>,
 etnaviv@lists.freedesktop.org, cphealy@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: etnaviv-bounces@lists.freedesktop.org
Sender: "etnaviv" <etnaviv-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVyQGdtYWls
LmNvbT4KLS0tCiBzcmMvZXRuYXZpdi9jb21waWxlci9laXIuYyAgICAgICAgICAgICAgICAgIHwg
MjM5ICsrKysrKysrKysKIHNyYy9ldG5hdml2L2NvbXBpbGVyL2Vpci5oICAgICAgICAgICAgICAg
ICAgfCA0OTkgKysrKysrKysrKysrKysrKysrKysKIHNyYy9ldG5hdml2L2NvbXBpbGVyL2Vpcl91
bmlmb3JtLmMgICAgICAgICAgfCAxMDggKysrKysKIHNyYy9ldG5hdml2L2NvbXBpbGVyL21lc29u
LmJ1aWxkICAgICAgICAgICAgfCAgMzggKysKIHNyYy9ldG5hdml2L2NvbXBpbGVyL3Rlc3RzL2Vp
cl9hc3NlbWJsZS5jcHAgfCAxMTQgKysrKysKIHNyYy9ldG5hdml2L2NvbXBpbGVyL3Rlc3RzL2Vp
cl91bmlmb3JtLmNwcCAgfCAzMjQgKysrKysrKysrKysrKwogc3JjL2V0bmF2aXYvY29tcGlsZXIv
dGVzdHMvbWVzb24uYnVpbGQgICAgICB8ICA0NCArKwogc3JjL2V0bmF2aXYvbWVzb24uYnVpbGQg
ICAgICAgICAgICAgICAgICAgICB8ICAgMSArCiA4IGZpbGVzIGNoYW5nZWQsIDEzNjcgaW5zZXJ0
aW9ucygrKQogY3JlYXRlIG1vZGUgMTAwNjQ0IHNyYy9ldG5hdml2L2NvbXBpbGVyL2Vpci5jCiBj
cmVhdGUgbW9kZSAxMDA2NDQgc3JjL2V0bmF2aXYvY29tcGlsZXIvZWlyLmgKIGNyZWF0ZSBtb2Rl
IDEwMDY0NCBzcmMvZXRuYXZpdi9jb21waWxlci9laXJfdW5pZm9ybS5jCiBjcmVhdGUgbW9kZSAx
MDA2NDQgc3JjL2V0bmF2aXYvY29tcGlsZXIvbWVzb24uYnVpbGQKIGNyZWF0ZSBtb2RlIDEwMDY0
NCBzcmMvZXRuYXZpdi9jb21waWxlci90ZXN0cy9laXJfYXNzZW1ibGUuY3BwCiBjcmVhdGUgbW9k
ZSAxMDA2NDQgc3JjL2V0bmF2aXYvY29tcGlsZXIvdGVzdHMvZWlyX3VuaWZvcm0uY3BwCiBjcmVh
dGUgbW9kZSAxMDA2NDQgc3JjL2V0bmF2aXYvY29tcGlsZXIvdGVzdHMvbWVzb24uYnVpbGQKCmRp
ZmYgLS1naXQgYS9zcmMvZXRuYXZpdi9jb21waWxlci9laXIuYyBiL3NyYy9ldG5hdml2L2NvbXBp
bGVyL2Vpci5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwLi4zOThhZTc0
NDNjNQotLS0gL2Rldi9udWxsCisrKyBiL3NyYy9ldG5hdml2L2NvbXBpbGVyL2Vpci5jCkBAIC0w
LDAgKzEsMjM5IEBACisvKgorICogQ29weXJpZ2h0IChjKSAyMDE4IEV0bmF2aXYgUHJvamVjdAor
ICogQ29weXJpZ2h0IChDKSAyMDE4IFpvZGlhYyBJbmZsaWdodCBJbm5vdmF0aW9ucworICoKKyAq
IFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVy
c29uIG9idGFpbmluZyBhCisgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQg
ZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAorICogdG8gZGVhbCBpbiB0aGUg
U29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlv
bgorICogdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRp
c3RyaWJ1dGUsIHN1YiBsaWNlbnNlLAorICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0
d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCisgKiBTb2Z0d2FyZSBpcyBm
dXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgor
ICoKKyAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90
aWNlIChpbmNsdWRpbmcgdGhlCisgKiBuZXh0IHBhcmFncmFwaCkgc2hhbGwgYmUgaW5jbHVkZWQg
aW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucworICogb2YgdGhlIFNvZnR3YXJl
LgorICoKKyAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJB
TlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCisgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5P
VCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKyAqIEZJVE5F
U1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT04tSU5GUklOR0VNRU5ULiBJTiBOTyBF
VkVOVCBTSEFMTAorICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxF
IEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKKyAqIExJQUJJTElUWSwgV0hFVEhFUiBJ
TiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCisgKiBG
Uk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNF
IE9SIE9USEVSCisgKiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICogQXV0aG9yczoK
KyAqICAgIENocmlzdGlhbiBHbWVpbmVyIDxjaHJpc3RpYW4uZ21laW5lckBnbWFpbC5jb20+Cisg
Ki8KKworI2luY2x1ZGUgImVpci5oIgorI2luY2x1ZGUgPHN0ZGxpYi5oPgorI2luY2x1ZGUgPHN0
cmluZy5oPgorI2luY2x1ZGUgInV0aWwvcmFsbG9jLmgiCisKK3N0cnVjdCBlaXIgKgorZWlyX2Ny
ZWF0ZSh2b2lkKQoreworICAgc3RydWN0IGVpciAqaXIgPSByemFsbG9jKE5VTEwsIHN0cnVjdCBl
aXIpOworCisgICBsaXN0X2luaXRoZWFkKCZpci0+YmxvY2tfbGlzdCk7CisgICB1dGlsX2R5bmFy
cmF5X2luaXQoJmlyLT5yZWdfYWxsb2MsIGlyKTsKKyAgIHV0aWxfZHluYXJyYXlfaW5pdCgmaXIt
PnVuaWZvcm1fYWxsb2MsIGlyKTsKKworICAgcmV0dXJuIGlyOworfQorCit2b2lkCitlaXJfZGVz
dHJveShzdHJ1Y3QgZWlyICppcikKK3sKKyAgIGFzc2VydChpcik7CisgICB1dGlsX2R5bmFycmF5
X2ZpbmkoJmlyLT5yZWdfYWxsb2MpOworICAgdXRpbF9keW5hcnJheV9maW5pKCZpci0+dW5pZm9y
bV9hbGxvYyk7CisgICByYWxsb2NfZnJlZShpcik7Cit9CisKK3N0cnVjdCBlaXJfYmxvY2sgKgor
ZWlyX2Jsb2NrX2NyZWF0ZShzdHJ1Y3QgZWlyICppcikKK3sKKyAgIGFzc2VydChpcik7CisgICBz
dHJ1Y3QgZWlyX2Jsb2NrICpibG9jayA9IHJ6YWxsb2MoaXIsIHN0cnVjdCBlaXJfYmxvY2spOwor
CisgICBibG9jay0+aXIgPSBpcjsKKyAgIGJsb2NrLT5udW0gPSBpci0+YmxvY2tzKys7CisgICBs
aXN0X2luaXRoZWFkKCZibG9jay0+bm9kZSk7CisgICBsaXN0X2luaXRoZWFkKCZibG9jay0+aW5z
dHJfbGlzdCk7CisKKyAgIGxpc3RfYWRkdGFpbCgmYmxvY2stPm5vZGUsICZpci0+YmxvY2tfbGlz
dCk7CisKKyAgIHJldHVybiBibG9jazsKK30KKworc3RydWN0IGVpcl9pbnN0cnVjdGlvbiAqCitl
aXJfaW5zdHJ1Y3Rpb25fY3JlYXRlKHN0cnVjdCBlaXJfYmxvY2sgKmJsb2NrLCBlbnVtIGdjX29w
IG9wYykKK3sKKyAgIGFzc2VydChibG9jayk7CisgICBzdHJ1Y3QgZWlyX2luc3RydWN0aW9uICpp
bnN0ciA9IHJ6YWxsb2MoYmxvY2ssIHN0cnVjdCBlaXJfaW5zdHJ1Y3Rpb24pOworCisgICBpbnN0
ci0+YmxvY2sgPSBibG9jazsKKyAgIGxpc3RfYWRkdGFpbCgmaW5zdHItPm5vZGUsICZibG9jay0+
aW5zdHJfbGlzdCk7CisKKyAgIGluc3RyLT5nYy5vcGNvZGUgPSBvcGM7CisKKyAgIHJldHVybiBp
bnN0cjsKK30KKworc3RydWN0IGVpcl9yZWdpc3RlcgorZWlyX3RlbXBfcmVnaXN0ZXIoc3RydWN0
IGVpciAqaXIsIHVuc2lnbmVkIG51bV9jb21wb25lbnRzKQoreworICAgYXNzZXJ0KG51bV9jb21w
b25lbnRzID49IDEgJiYgbnVtX2NvbXBvbmVudHMgPD0gNCk7CisKKyAgIHN0cnVjdCBlaXJfcmVn
aXN0ZXIgcmVnID0geworICAgICAgLnR5cGUgPSBFSVJfUkVHX1RFTVAsCisgICAgICAuaW5kZXgg
PSB1dGlsX2R5bmFycmF5X251bV9lbGVtZW50cygmaXItPnJlZ19hbGxvYywgdW5zaWduZWQpLAor
ICAgfTsKKworICAgdXRpbF9keW5hcnJheV9hcHBlbmQoJmlyLT5yZWdfYWxsb2MsIHVuc2lnbmVk
LCBudW1fY29tcG9uZW50cyk7CisKKyAgIHJldHVybiByZWc7Cit9CisKK3ZvaWQKK2Vpcl9saW5r
X2Jsb2NrcyhzdHJ1Y3QgZWlyX2Jsb2NrICpwcmVkZWNlc3Nvciwgc3RydWN0IGVpcl9ibG9jayAq
c3VjY2Vzc29yKQoreworICAgYXNzZXJ0KHByZWRlY2Vzc29yKTsKKyAgIGFzc2VydChzdWNjZXNz
b3IpOworCisgICBpZiAocHJlZGVjZXNzb3ItPnN1Y2Nlc3NvcnNbMF0pIHsKKyAgICAgIGFzc2Vy
dCghcHJlZGVjZXNzb3ItPnN1Y2Nlc3NvcnNbMV0pOworICAgICAgcHJlZGVjZXNzb3ItPnN1Y2Nl
c3NvcnNbMV0gPSBzdWNjZXNzb3I7CisgICB9IGVsc2UgeworICAgICAgcHJlZGVjZXNzb3ItPnN1
Y2Nlc3NvcnNbMF0gPSBzdWNjZXNzb3I7CisgICB9Cit9CisKK3N0YXRpYyB2b2lkCitjb252ZXJ0
X3NhbXBsZXIoY29uc3Qgc3RydWN0IGVpcl9yZWdpc3RlciAqZWlyLCBzdHJ1Y3QgZ2NfaW5zdHJf
c2FtcGxlciAqc2FtcGxlcikKK3sKKyAgIGFzc2VydChlaXItPnR5cGUgPT0gRUlSX1JFR19TQU1Q
TEVSKTsKKworICAgc2FtcGxlci0+aWQgPSBlaXItPmluZGV4OworICAgc2FtcGxlci0+c3dpeiA9
IGVpci0+c3dpenpsZTsKKyAgIHNhbXBsZXItPmFtb2RlID0gR0NfQUREUkVTU0lOR19NT0RFX0RJ
UkVDVDsKK30KKworc3RhdGljIHZvaWQKK2NvbnZlcnRfc3JjKGNvbnN0IHN0cnVjdCBlaXJfcmVn
aXN0ZXIgKmVpciwgc3RydWN0IGdjX2luc3RyX3NyYyAqZ2MpCit7CisgICBhc3NlcnQoIWdjLT51
c2UpOworICAgYXNzZXJ0KGVpci0+dHlwZSAhPSBFSVJfUkVHX1VOREVGKTsKKyAgIGFzc2VydChl
aXItPnR5cGUgIT0gRUlSX1JFR19TQU1QTEVSKTsKKworICAgZ2MtPnVzZSA9IHRydWU7CisgICBn
Yy0+cmVnID0gZWlyLT5pbmRleDsKKyAgIGdjLT5hYnMgPSBlaXItPmFiczsKKyAgIGdjLT5uZWcg
PSBlaXItPm5lZzsKKyAgIGdjLT5zd2l6ID0gZWlyLT5zd2l6emxlOworCisgICBzd2l0Y2ggKGVp
ci0+dHlwZSkgeworICAgY2FzZSBFSVJfUkVHX1RFTVA6CisgICAgICBnYy0+cmdyb3VwID0gR0Nf
UkVHSVNURVJfR1JPVVBfVEVNUDsKKyAgICAgIGJyZWFrOworCisgICBjYXNlIEVJUl9SRUdfVU5J
Rk9STToKKyAgICAgIGdjLT5yZ3JvdXAgPSBHQ19SRUdJU1RFUl9HUk9VUF9VTklGT1JNOworICAg
ICAgYnJlYWs7CisKKyAgIGRlZmF1bHQ6CisgICAgICB1bnJlYWNoYWJsZSgidW5oYW5kbGVkIHR5
cGUiKTsKKyAgIH0KK30KKworc3RhdGljIHZvaWQKK2NvbnZlcnRfZHN0KGNvbnN0IHN0cnVjdCBl
aXJfcmVnaXN0ZXIgKmVpciwgc3RydWN0IGdjX2luc3RyX2RzdCAqZ2MpCit7CisgICBhc3NlcnQo
IWdjLT5jb21wcyk7CisKKyAgIGdjLT5yZWcgPSBlaXItPmluZGV4OworICAgZ2MtPmNvbXBzID0g
ZWlyLT53cml0ZW1hc2s7Cit9CisKK3N0YXRpYyB2b2lkCitlaXJfdG9fZ2Moc3RydWN0IGVpcl9p
bnN0cnVjdGlvbiAqaW5zdHIpCit7CisgICBzdHJ1Y3QgZ2NfaW5zdHIgKmdjID0gJmluc3RyLT5n
YzsKKworICAgaWYgKGdjX29wX251bV9zcmMoZ2MtPm9wY29kZSkpIHsKKyAgICAgIGNvbnN0IHVu
c2lnbmVkIHN3aXp6bGUgPSBnY19vcF9zcmNfc3dpenpsZShnYy0+b3Bjb2RlKTsKKworICAgICAg
Lyogc3JjIHN3aXp6bGUgKi8KKyAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgZ2Nfb3BfbnVtX3Ny
YyhnYy0+b3Bjb2RlKTsgaSsrKSB7CisgICAgICAgICBjb25zdCB1bnNpZ25lZCBzaGlmdCA9IGkg
KiAyOworICAgICAgICAgY29uc3QgdW5zaWduZWQgbWFzayA9IDB4MyA8PCBzaGlmdDsKKyAgICAg
ICAgIGNvbnN0IHVuc2lnbmVkIGluZGV4ID0gKHN3aXp6bGUgJiBtYXNrKSA+PiBzaGlmdDsKKwor
ICAgICAgICAgaWYgKGluZGV4ID09IDB4MykKKyAgICAgICAgICAgIGNvbnRpbnVlOworCisgICAg
ICAgICBpZiAoaW5zdHItPnNyY1tpXS50eXBlID09IEVJUl9SRUdfVU5ERUYpCisgICAgICAgICAg
ICBjb250aW51ZTsKKworICAgICAgICAgc3dpdGNoIChnYy0+dHlwZSkgeworICAgICAgICAgY2Fz
ZSBHQ19PUF9UWVBFX0FMVToKKyAgICAgICAgICAgIGNvbnZlcnRfc3JjKCZpbnN0ci0+c3JjW2ld
LCAmZ2MtPmFsdS5zcmNbaW5kZXhdKTsKKyAgICAgICAgICAgIGJyZWFrOworCisgICAgICAgICBj
YXNlIEdDX09QX1RZUEVfQlJBTkNIOgorICAgICAgICAgICAgY29udmVydF9zcmMoJmluc3RyLT5z
cmNbaV0sICZnYy0+YnJhbmNoLnNyY1tpbmRleF0pOworICAgICAgICAgICAgYnJlYWs7CisKKyAg
ICAgICAgIGNhc2UgR0NfT1BfVFlQRV9TQU1QTEVSOgorICAgICAgICAgICAgaWYgKGkgPT0gMCkK
KyAgICAgICAgICAgICAgIGNvbnZlcnRfc2FtcGxlcigmaW5zdHItPnNyY1swXSwgJmdjLT5zYW1w
bGVyKTsKKyAgICAgICAgICAgIGVsc2UgaWYgKGkgPT0gMSkKKyAgICAgICAgICAgICAgIGNvbnZl
cnRfc3JjKCZpbnN0ci0+c3JjWzFdLCAmZ2MtPnNhbXBsZXIuc3JjKTsKKyAgICAgICAgICAgIGVs
c2UKKyAgICAgICAgICAgICAgIHVucmVhY2hhYmxlKCJ1bmtvd24gc2FtcGxlciBpbmRleCIpOwor
CisgICAgICAgICAgICBicmVhazsKKyAgICAgICAgIH0KKyAgICAgIH0KKworICAgICAgLyogc3Bl
Y2lhbCBoYW5kbGluZyBmb3Igc3JjIHJlcGxpY2F0aW9uICovCisgICAgICBpZiAoZ2MtPnR5cGUg
PT0gR0NfT1BfVFlQRV9BTFUgJiYgc3dpenpsZSAmIFNXSVpfUkVQX1NSQzBfVE9fU1JDMikgewor
ICAgICAgICAgYXNzZXJ0KGdjLT50eXBlID09IEdDX09QX1RZUEVfQUxVKTsKKyAgICAgICAgIGNv
bnZlcnRfc3JjKCZpbnN0ci0+c3JjWzBdLCAmZ2MtPmFsdS5zcmNbMl0pOworICAgICAgfQorICAg
fQorCisgICBpZiAoZ2Nfb3BfaGFzX2RzdChnYy0+b3Bjb2RlKSkKKyAgICAgIGNvbnZlcnRfZHN0
KCZpbnN0ci0+ZHN0LCAmZ2MtPmRzdCk7Cit9CisKK3VpbnQzMl90ICoKK2Vpcl9hc3NlbWJsZShj
b25zdCBzdHJ1Y3QgZWlyICppciwgc3RydWN0IGVpcl9pbmZvICppbmZvKQoreworICAgYXNzZXJ0
KGlyKTsKKyAgIGFzc2VydChpbmZvKTsKKyAgIHVpbnQzMl90ICpwdHIsICpkd29yZHM7CisKKyAg
IG1lbXNldChpbmZvLCAwLCBzaXplb2YoKmluZm8pKTsKKworICAgZWlyX2Zvcl9lYWNoX2Jsb2Nr
KGJsb2NrLCBpcikgeworICAgICAgZWlyX2Zvcl9lYWNoX2luc3QoaW5zdHIsIGJsb2NrKSB7Cisg
ICAgICAgICBpbmZvLT5zaXplZHdvcmRzICs9IDQ7CisgICAgICB9CisgICB9CisKKyAgIHB0ciA9
IGR3b3JkcyA9IGNhbGxvYyg0LCBpbmZvLT5zaXplZHdvcmRzKTsKKyAgIGlmICghcHRyKQorICAg
ICAgcmV0dXJuIE5VTEw7CisKKyAgIGVpcl9mb3JfZWFjaF9ibG9jayhibG9jaywgaXIpIHsKKyAg
ICAgIGVpcl9mb3JfZWFjaF9pbnN0KGluc3RyLCBibG9jaykgeworICAgICAgICAgZWlyX3RvX2dj
KGluc3RyKTsKKyAgICAgICAgIGdjX3BhY2tfaW5zdHIoJmluc3RyLT5nYywgZHdvcmRzKTsKKyAg
ICAgICAgIGR3b3JkcyArPSA0OworICAgICAgfQorICAgfQorCisgICByZXR1cm4gcHRyOworfQpk
aWZmIC0tZ2l0IGEvc3JjL2V0bmF2aXYvY29tcGlsZXIvZWlyLmggYi9zcmMvZXRuYXZpdi9jb21w
aWxlci9laXIuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMC4uZTIxODVi
MDA0ZjEKLS0tIC9kZXYvbnVsbAorKysgYi9zcmMvZXRuYXZpdi9jb21waWxlci9laXIuaApAQCAt
MCwwICsxLDQ5OSBAQAorLyoKKyAqIENvcHlyaWdodCAoYykgMjAxOCBFdG5hdml2IFByb2plY3QK
KyAqIENvcHlyaWdodCAoQykgMjAxOCBab2RpYWMgSW5mbGlnaHQgSW5ub3ZhdGlvbnMKKyAqCisg
KiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBl
cnNvbiBvYnRhaW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVk
IGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKKyAqIHRvIGRlYWwgaW4gdGhl
IFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRp
b24KKyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBk
aXN0cmlidXRlLCBzdWIgbGljZW5zZSwKKyAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29m
dHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQorICogU29mdHdhcmUgaXMg
ZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoK
KyAqCisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5v
dGljZSAoaW5jbHVkaW5nIHRoZQorICogbmV4dCBwYXJhZ3JhcGgpIHNoYWxsIGJlIGluY2x1ZGVk
IGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMKKyAqIG9mIHRoZSBTb2Z0d2Fy
ZS4KKyAqCisgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJS
QU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBO
T1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRO
RVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OLUlORlJJTkdFTUVOVC4gSU4gTk8g
RVZFTlQgU0hBTEwKKyAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJM
RSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCisgKiBMSUFCSUxJVFksIFdIRVRIRVIg
SU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORworICog
RlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVT
RSBPUiBPVEhFUgorICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorICoKKyAqIEF1dGhvcnM6
CisgKiAgICBDaHJpc3RpYW4gR21laW5lciA8Y2hyaXN0aWFuLmdtZWluZXJAZ21haWwuY29tPgor
ICovCisKKyNpZm5kZWYgSF9FSVIKKyNkZWZpbmUgSF9FSVIKKworI2luY2x1ZGUgPGFzc2VydC5o
PgorI2luY2x1ZGUgInV0aWwvbGlzdC5oIgorI2luY2x1ZGUgInV0aWwvdV9keW5hcnJheS5oIgor
I2luY2x1ZGUgInV0aWwvdV9tYXRoLmgiCisjaW5jbHVkZSAiZXRuYXZpdi9nYy9nY19pbnN0ci5o
IgorCisjaWZkZWYgX19jcGx1c3BsdXMKK2V4dGVybiAiQyJ7CisjZW5kaWYKKworc3RydWN0IGVp
cjsKK3N0cnVjdCBlaXJfYmxvY2s7CisKK3N0cnVjdCBlaXJfcmVnaXN0ZXIKK3sKKyAgIGVudW0g
eworICAgICAgRUlSX1JFR19VTkRFRiA9IDAsCisgICAgICBFSVJfUkVHX1RFTVAsCisgICAgICBF
SVJfUkVHX1VOSUZPUk0sCisgICAgICBFSVJfUkVHX1NBTVBMRVIsCisgICB9IHR5cGU7CisKKyAg
IHVuc2lnbmVkIGluZGV4OworCisgICAvKiBkc3Qgb25seTogKi8KKyAgIHVuc2lnbmVkIHdyaXRl
bWFzazo0OworICAgLyogc3JjIG9ubHk6ICovCisgICB1bnNpZ25lZCBzd2l6emxlOjg7CisgICB1
bnNpZ25lZCBhYnM6MTsKKyAgIHVuc2lnbmVkIG5lZzoxOworfTsKKworc3RydWN0IGVpcl9pbnN0
cnVjdGlvbgoreworICAgc3RydWN0IGVpcl9ibG9jayAqYmxvY2s7CisgICBzdHJ1Y3QgbGlzdF9o
ZWFkIG5vZGU7ICAvKiBlbnRyeSBpbiBlaXJfYmxvY2sncyBpbnN0cnVjdGlvbiBsaXN0ICovCisK
KyAgIC8qIFByZS1yZWdpc3Rlci1hbGxvY2F0aW9uIHJlZmVyZW5jZXMgdG8gc3JjL2RzdCByZWdp
c3RlcnMgKi8KKyAgIHN0cnVjdCBlaXJfcmVnaXN0ZXIgZHN0OworICAgc3RydWN0IGVpcl9yZWdp
c3RlciBzcmNbM107CisKKyAgIHN0cnVjdCBnY19pbnN0ciBnYzsgIC8qIGluc3RydWN0aW9uIGJl
aW5nIHdyYXBwZWQuICovCit9OworCitzdHJ1Y3QgZWlyX2Jsb2NrCit7CisgICBzdHJ1Y3QgZWly
ICppcjsKKyAgIHN0cnVjdCBsaXN0X2hlYWQgbm9kZTsgIC8qIGVudHJ5IGluIGVpcidzIGJsb2Nr
IGxpc3QgKi8KKyAgIHN0cnVjdCBsaXN0X2hlYWQgaW5zdHJfbGlzdDsKKworICAgdW5zaWduZWQg
bnVtOworCisgICBzdHJ1Y3QgZWlyX2Jsb2NrICpzdWNjZXNzb3JzWzJdOworCisgICAvKiBwZXIt
cGFzcyBleHRyYSBibG9jayBkYXRhICovCisgICB2b2lkICpkYXRhOworfTsKKworZW51bSBlaXJf
dW5pZm9ybV9jb250ZW50cworeworICAgRUlSX1VOSUZPUk1fVU5VU0VELAorICAgRUlSX1VOSUZP
Uk1fQ09OU1RBTlQsCisgICBFSVJfVU5JRk9STV9JTUFHRV9XSURUSCwKKyAgIEVJUl9VTklGT1JN
X0lNQUdFX0hFSUdIVCwKKyAgIEVJUl9VTklGT1JNX0lNQUdFX0RFUFRILAorfTsKKworc3RhdGlj
IGlubGluZSBjb25zdCBjaGFyICoKK2Vpcl91bmlmb3JtX2NvbnRlbnQoZW51bSBlaXJfdW5pZm9y
bV9jb250ZW50cyBjb250ZW50KQoreworICAgc3dpdGNoKGNvbnRlbnQpIHsKKyAgIGNhc2UgRUlS
X1VOSUZPUk1fVU5VU0VEOgorICAgICAgcmV0dXJuICJ1bnVzZWQiOworICAgY2FzZSBFSVJfVU5J
Rk9STV9DT05TVEFOVDoKKyAgICAgIHJldHVybiAiY29uc3RhbnQiOworICAgY2FzZSBFSVJfVU5J
Rk9STV9JTUFHRV9XSURUSDoKKyAgICAgIHJldHVybiAiaW1hZ2Ugd2lkdGgiOworICAgY2FzZSBF
SVJfVU5JRk9STV9JTUFHRV9IRUlHSFQ6CisgICAgICByZXR1cm4gImltYWdlIGhlaWdodCI7Cisg
ICBjYXNlIEVJUl9VTklGT1JNX0lNQUdFX0RFUFRIOgorICAgICAgcmV0dXJuICJpbWFnZSBkZXB0
aCI7CisgICBkZWZhdWx0OgorICAgICAgdW5yZWFjaGFibGUoInVuaGFuZGxlZCBjb250ZW50IHR5
cGUiKTsKKyAgICAgIGJyZWFrOworICAgfQorCisgICByZXR1cm4gTlVMTDsKK30KKworc3RydWN0
IGVpcl91bmlmb3JtX2RhdGEKK3sKKyAgIGVudW0gZWlyX3VuaWZvcm1fY29udGVudHMgY29udGVu
dDsKKyAgIHVpbnQzMl90IGRhdGE7Cit9OworCitzdHJ1Y3QgZWlyCit7CisgICBzdHJ1Y3QgbGlz
dF9oZWFkIGJsb2NrX2xpc3Q7CisgICB1bnNpZ25lZCBibG9ja3M7CisKKyAgIC8qIGF0dHJpYnV0
ZXMvdmFyeWluZ3M6ICovCisgICB1bnNpZ25lZCBudW1faW5wdXRzOworICAgc3RydWN0IHsKKyAg
ICAgIHVuc2lnbmVkIHNsb3Q7CisgICAgICB1bnNpZ25lZCByZWc7CisgICAgICB1bnNpZ25lZCBu
Y29tcDsKKyAgIH0gaW5wdXRzWzE2XTsKKworICAgLyogdmFyeWluZ3Mvb3V0cHV0czogKi8KKyAg
IHVuc2lnbmVkIG51bV9vdXRwdXRzOworICAgc3RydWN0IHsKKyAgICAgIHVuc2lnbmVkIHNsb3Q7
CisgICAgICB1bnNpZ25lZCByZWc7CisgICAgICB1bnNpZ25lZCBuY29tcDsKKyAgIH0gb3V0cHV0
c1sxNl07CisKKyAgIC8qIGtlZXAgdHJhY2sgb2YgbnVtZXIgb2YgYWxsb2NhdGVkIHJlZ2lzdGVy
cworICAgICogYW5kIHRoZSB1c2VkIGNvbXBvbmVudHMgcGVyIHJlZ2lzdGVyICovCisgICBzdHJ1
Y3QgdXRpbF9keW5hcnJheSByZWdfYWxsb2M7CisKKyAgIC8qIGtlZXAgdHJhY2sgb2YgbnVtYmVy
IG9mIGFsbG9jYXRlZCB1bmlmb3JtcyAqLworICAgc3RydWN0IHV0aWxfZHluYXJyYXkgdW5pZm9y
bV9hbGxvYzsKKyAgIHVuc2lnbmVkIHVuaWZvcm1fb2Zmc2V0OworfTsKKworc3RydWN0IGVpcl9p
bmZvIHsKKwl1aW50MTZfdCBzaXplZHdvcmRzOworfTsKKworc3RydWN0IGVpciAqCitlaXJfY3Jl
YXRlKHZvaWQpOworCit2b2lkCitlaXJfZGVzdHJveShzdHJ1Y3QgZWlyICppcik7CisKK3N0cnVj
dCBlaXJfYmxvY2sgKgorZWlyX2Jsb2NrX2NyZWF0ZShzdHJ1Y3QgZWlyICppcik7CisKK3N0cnVj
dCBlaXJfaW5zdHJ1Y3Rpb24gKgorZWlyX2luc3RydWN0aW9uX2NyZWF0ZShzdHJ1Y3QgZWlyX2Js
b2NrICpibG9jaywgZW51bSBnY19vcCBvcGMpOworCitzdHJ1Y3QgZWlyX3JlZ2lzdGVyCitlaXJf
dGVtcF9yZWdpc3RlcihzdHJ1Y3QgZWlyICppciwgdW5zaWduZWQgbnVtX2NvbXBvbmVudHMpOwor
CitzdHJ1Y3QgZWlyX3JlZ2lzdGVyCitlaXJfdW5pZm9ybV9yZWdpc3Rlcl92ZWM0KHN0cnVjdCBl
aXIgKmlyLAorICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bnNpZ25lZCBuY29tcCwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW51bSBlaXJfdW5pZm9ybV9jb250ZW50
cyAqY29udGVudHMsCisgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVpbnQzMl90ICp2
YWx1ZXMpOworCitzdGF0aWMgaW5saW5lIHN0cnVjdCBlaXJfcmVnaXN0ZXIKK2Vpcl91bmlmb3Jt
X3JlZ2lzdGVyKHN0cnVjdCBlaXIgKmlyLCBjb25zdCBlbnVtIGVpcl91bmlmb3JtX2NvbnRlbnRz
IGNvbnRlbnQsIHVpbnQzMl90IHZhbHVlKQoreworICAgY29uc3QgZW51bSBlaXJfdW5pZm9ybV9j
b250ZW50cyBjb250ZW50c1tdID0geworICAgICAgY29udGVudAorICAgfTsKKworICAgY29uc3Qg
dWludDMyX3QgdmFsdWVzW10gPSB7CisgICAgICB2YWx1ZQorICAgfTsKKworICAgcmV0dXJuIGVp
cl91bmlmb3JtX3JlZ2lzdGVyX3ZlYzQoaXIsIDEsIGNvbnRlbnRzLCB2YWx1ZXMpOworfQorCitz
dGF0aWMgaW5saW5lIHN0cnVjdCBlaXJfcmVnaXN0ZXIKK2Vpcl91bmlmb3JtX3JlZ2lzdGVyX3Vp
KHN0cnVjdCBlaXIgKmlyLCB1aW50MzJfdCB2YWx1ZSkKK3sKKyAgIHN0YXRpYyBjb25zdCBlbnVt
IGVpcl91bmlmb3JtX2NvbnRlbnRzIGNvbnRlbnRzW10gPSB7CisgICAgICBFSVJfVU5JRk9STV9D
T05TVEFOVAorICAgfTsKKworICAgdWludDMyX3QgdmFsdWVzW10gPSB7CisgICAgICB2YWx1ZQor
ICAgfTsKKworICAgcmV0dXJuIGVpcl91bmlmb3JtX3JlZ2lzdGVyX3ZlYzQoaXIsIDEsIGNvbnRl
bnRzLCB2YWx1ZXMpOworfQorCitzdGF0aWMgaW5saW5lIHN0cnVjdCBlaXJfcmVnaXN0ZXIKK2Vp
cl91bmlmb3JtX3JlZ2lzdGVyX2Yoc3RydWN0IGVpciAqaXIsIGZsb2F0IHZhbHVlKQoreworICAg
c3RhdGljIGNvbnN0IGVudW0gZWlyX3VuaWZvcm1fY29udGVudHMgY29udGVudHNbXSA9IHsKKyAg
ICAgIEVJUl9VTklGT1JNX0NPTlNUQU5UCisgICB9OworCisgICB1aW50MzJfdCB2YWx1ZXNbXSA9
IHsKKyAgICAgIGZ1aSh2YWx1ZSkKKyAgIH07CisKKyAgIHJldHVybiBlaXJfdW5pZm9ybV9yZWdp
c3Rlcl92ZWM0KGlyLCAxLCBjb250ZW50cywgdmFsdWVzKTsKK30KKworc3RhdGljIGlubGluZSBz
dHJ1Y3QgZWlyX3JlZ2lzdGVyCitlaXJfdW5pZm9ybV9yZWdpc3Rlcl92ZWM0X3VpKHN0cnVjdCBl
aXIgKmlyLCBjb25zdCB1bnNpZ25lZCBuY29tcCwgY29uc3QgdWludDMyX3QgKnZhbHVlcykKK3sK
KyAgIHN0YXRpYyBjb25zdCBlbnVtIGVpcl91bmlmb3JtX2NvbnRlbnRzIGNvbnRlbnRzW10gPQor
ICAgeworICAgICAgRUlSX1VOSUZPUk1fQ09OU1RBTlQsCisgICAgICBFSVJfVU5JRk9STV9DT05T
VEFOVCwKKyAgICAgIEVJUl9VTklGT1JNX0NPTlNUQU5ULAorICAgICAgRUlSX1VOSUZPUk1fQ09O
U1RBTlQsCisgICB9OworCisgICByZXR1cm4gZWlyX3VuaWZvcm1fcmVnaXN0ZXJfdmVjNChpciwg
bmNvbXAsIGNvbnRlbnRzLCB2YWx1ZXMpOworfQorCitzdGF0aWMgaW5saW5lIHN0cnVjdCBlaXJf
cmVnaXN0ZXIKK2Vpcl91bmlmb3JtX3JlZ2lzdGVyX3ZlYzRfZihzdHJ1Y3QgZWlyICppciwgY29u
c3QgdW5zaWduZWQgbmNvbXAsIGZsb2F0ICp2YWx1ZXMpCit7CisgICBzdGF0aWMgY29uc3QgZW51
bSBlaXJfdW5pZm9ybV9jb250ZW50cyBjb250ZW50c1tdID0KKyAgIHsKKyAgICAgIEVJUl9VTklG
T1JNX0NPTlNUQU5ULAorICAgICAgRUlSX1VOSUZPUk1fQ09OU1RBTlQsCisgICAgICBFSVJfVU5J
Rk9STV9DT05TVEFOVCwKKyAgICAgIEVJUl9VTklGT1JNX0NPTlNUQU5ULAorICAgfTsKKworICAg
dWludDMyX3QgdmFsWzRdOworCisgICBmb3IgKHVuc2lnbmVkIGkgPSAwOyBpIDwgbmNvbXA7IGkr
KykKKyAgICAgIHZhbFtpXSA9IGZ1aSh2YWx1ZXNbaV0pOworCisgICByZXR1cm4gZWlyX3VuaWZv
cm1fcmVnaXN0ZXJfdmVjNChpciwgbmNvbXAsIGNvbnRlbnRzLCB2YWwpOworfQorCit2b2lkCitl
aXJfbGlua19ibG9ja3Moc3RydWN0IGVpcl9ibG9jayAqcHJlZGVjZXNzb3IsIHN0cnVjdCBlaXJf
YmxvY2sgKnN1Y2Nlc3Nvcik7CisKK3N0YXRpYyBpbmxpbmUgdm9pZAorZWlyX2Fzc2lnbl9pbnB1
dChzdHJ1Y3QgZWlyICppciwgdW5zaWduZWQgaWR4LCB1bnNpZ25lZCBzbG90LCB1bnNpZ25lZCBu
Y29tcCkKK3sKKyAgIGFzc2VydChpcik7CisgICBhc3NlcnQoaWR4IDwgQVJSQVlfU0laRShpci0+
aW5wdXRzKSk7CisKKyAgIGlyLT5pbnB1dHNbaWR4XS5yZWcgPSBpZHg7CisgICBpci0+aW5wdXRz
W2lkeF0uc2xvdCA9IHNsb3Q7CisgICBpci0+aW5wdXRzW2lkeF0ubmNvbXAgPSBuY29tcDsKKwor
ICAgaXItPm51bV9pbnB1dHMgPSBNQVgyKGlyLT5udW1faW5wdXRzLCBpZHggKyAxKTsKK30KKwor
c3RhdGljIGlubGluZSB2b2lkCitlaXJfYXNzaWduX291dHB1dChzdHJ1Y3QgZWlyICppciwgdW5z
aWduZWQgaWR4LCB1bnNpZ25lZCBzbG90LCB1bnNpZ25lZCBuY29tcCkKK3sKKyAgIGFzc2VydChp
cik7CisgICBhc3NlcnQoaWR4IDwgQVJSQVlfU0laRShpci0+b3V0cHV0cykpOworCisgICBpci0+
b3V0cHV0c1tpZHhdLnJlZyA9IGlkeDsKKyAgIGlyLT5vdXRwdXRzW2lkeF0uc2xvdCA9IHNsb3Q7
CisgICBpci0+b3V0cHV0c1tpZHhdLm5jb21wID0gbmNvbXA7CisKKyAgIGlyLT5udW1fb3V0cHV0
cyA9IE1BWDIoaXItPm51bV9vdXRwdXRzLCBpZHggKyAxKTsKK30KKwordm9pZAorZWlyX2NhbGN1
bGF0ZV9saXZlX2ludGVydmFscyhzdHJ1Y3QgZWlyICppcik7CisKK2ludAorZWlyX3RlbXBfcmFu
Z2Vfc3RhcnQoY29uc3Qgc3RydWN0IGVpciogaXIsIHVuc2lnbmVkIG4pOworCitpbnQKK2Vpcl90
ZW1wX3JhbmdlX2VuZChjb25zdCBzdHJ1Y3QgZWlyKiBpciwgdW5zaWduZWQgbik7CisKK3VpbnQz
Ml90ICoKK2Vpcl9hc3NlbWJsZShjb25zdCBzdHJ1Y3QgZWlyICppciwgc3RydWN0IGVpcl9pbmZv
ICppbmZvKTsKKworc3RhdGljIGlubGluZSBzdHJ1Y3QgZWlyX2luc3RydWN0aW9uICoKK2Vpcl9T
RVQoc3RydWN0IGVpcl9ibG9jayAqYmxvY2ssIHN0cnVjdCBlaXJfcmVnaXN0ZXIgKmRzdCwKKyAg
ICAgICAgc3RydWN0IGVpcl9yZWdpc3RlciAqc3JjMCwgZW51bSBnY19jb25kIGNvbmRpdGlvbiwK
KyAgICAgICAgc3RydWN0IGVpcl9yZWdpc3RlciAqc3JjMSkKK3sKKyAgIHN0cnVjdCBlaXJfaW5z
dHJ1Y3Rpb24gKmluc3RyOworCisgICBhc3NlcnQoZ2Nfb3BfaGFzX2RzdChHQ19TRVQpKTsKKyAg
IGFzc2VydChnY19vcF9udW1fc3JjKEdDX1NFVCkgPT0gMik7CisKKyAgIGluc3RyID0gZWlyX2lu
c3RydWN0aW9uX2NyZWF0ZShibG9jaywgR0NfU0VUKTsKKyAgIGluc3RyLT5nYy50eXBlID0gR0Nf
T1BfVFlQRV9BTFU7CisgICBpbnN0ci0+Z2MuY29uZGl0aW9uID0gY29uZGl0aW9uOworICAgaW5z
dHItPmRzdCA9ICpkc3Q7CisgICBpbnN0ci0+c3JjWzBdID0gKnNyYzA7CisgICBpbnN0ci0+c3Jj
WzFdID0gKnNyYzE7CisKKyAgIHJldHVybiBpbnN0cjsKK30KKworc3RhdGljIGlubGluZSBzdHJ1
Y3QgZWlyX2luc3RydWN0aW9uICoKK2Vpcl9CUkFOQ0goc3RydWN0IGVpcl9ibG9jayAqYmxvY2ss
IHN0cnVjdCBlaXJfcmVnaXN0ZXIgKnNyYzAsCisgICAgICAgICAgIHN0cnVjdCBlaXJfcmVnaXN0
ZXIgKnNyYzEpCit7CisgICBzdHJ1Y3QgZWlyX2luc3RydWN0aW9uICppbnN0cjsKKworICAgYXNz
ZXJ0KCFnY19vcF9oYXNfZHN0KEdDX0JSQU5DSCkpOworICAgYXNzZXJ0KGdjX29wX251bV9zcmMo
R0NfQlJBTkNIKSA9PSAyKTsKKworICAgaW5zdHIgPSBlaXJfaW5zdHJ1Y3Rpb25fY3JlYXRlKGJs
b2NrLCBHQ19CUkFOQ0gpOworICAgaW5zdHItPmdjLnR5cGUgPSBHQ19PUF9UWVBFX0JSQU5DSDsK
KyAgIGluc3RyLT5nYy5icmFuY2guaW1tID0gfjA7CisgICBpbnN0ci0+c3JjWzBdID0gKnNyYzA7
CisgICBpbnN0ci0+c3JjWzFdID0gKnNyYzE7CisKKyAgIHJldHVybiBpbnN0cjsKK30KKworc3Rh
dGljIGlubGluZSBzdHJ1Y3QgZWlyX2luc3RydWN0aW9uICoKK2Vpcl9URVhLSUxMX0lGKHN0cnVj
dCBlaXJfYmxvY2sgKmJsb2NrLCBzdHJ1Y3QgZWlyX3JlZ2lzdGVyICpzcmMwLAorICAgICAgICAg
ICAgICAgZW51bSBnY19jb25kIGNvbmRpdGlvbiwgc3RydWN0IGVpcl9yZWdpc3RlciAqc3JjMSkK
K3sKKyAgIHN0cnVjdCBlaXJfaW5zdHJ1Y3Rpb24gKmluc3RyOworCisgICBhc3NlcnQoIWdjX29w
X2hhc19kc3QoR0NfVEVYS0lMTF9JRikpOworICAgYXNzZXJ0KGdjX29wX251bV9zcmMoR0NfVEVY
S0lMTF9JRikgPT0gMik7CisKKyAgIGluc3RyID0gZWlyX2luc3RydWN0aW9uX2NyZWF0ZShibG9j
aywgR0NfVEVYS0lMTF9JRik7CisgICBpbnN0ci0+Z2MudHlwZSA9IEdDX09QX1RZUEVfQUxVOwor
ICAgaW5zdHItPmdjLmNvbmRpdGlvbiA9IGNvbmRpdGlvbjsKKyAgIGluc3RyLT5zcmNbMF0gPSAq
c3JjMDsKKyAgIGluc3RyLT5zcmNbMV0gPSAqc3JjMTsKKworICAgcmV0dXJuIGluc3RyOworfQor
CisjZGVmaW5lIEFMVTAob3BjKSBcCitzdGF0aWMgaW5saW5lIHN0cnVjdCBlaXJfaW5zdHJ1Y3Rp
b24gKiBcCitlaXJfIyNvcGMoc3RydWN0IGVpcl9ibG9jayAqYmxvY2spIFwKK3sgXAorICAgc3Ry
dWN0IGVpcl9pbnN0cnVjdGlvbiAqaW5zdHI7IFwKKyAgIFwKKyAgIGFzc2VydCghZ2Nfb3BfaGFz
X2RzdChHQ18jI29wYykpO1wKKyAgIGFzc2VydChnY19vcF9udW1fc3JjKEdDXyMjb3BjKSA9PSAw
KTtcCisgICBcCisgICBpbnN0ciA9IGVpcl9pbnN0cnVjdGlvbl9jcmVhdGUoYmxvY2ssIEdDXyMj
b3BjKTsgXAorICAgaW5zdHItPmdjLnR5cGUgPSBHQ19PUF9UWVBFX0FMVTsgXAorICAgXAorICAg
cmV0dXJuIGluc3RyOyBcCit9CisKKyNkZWZpbmUgQUxVMShvcGMpIFwKK3N0YXRpYyBpbmxpbmUg
c3RydWN0IGVpcl9pbnN0cnVjdGlvbiAqIFwKK2Vpcl8jI29wYyhzdHJ1Y3QgZWlyX2Jsb2NrICpi
bG9jaywgc3RydWN0IGVpcl9yZWdpc3RlciAqZHN0LCBcCisgICAgICAgICAgc3RydWN0IGVpcl9y
ZWdpc3RlciAqc3JjMCkgXAoreyBcCisgICBzdHJ1Y3QgZWlyX2luc3RydWN0aW9uICppbnN0cjsg
XAorICAgXAorICAgYXNzZXJ0KGdjX29wX2hhc19kc3QoR0NfIyNvcGMpKTtcCisgICBhc3NlcnQo
Z2Nfb3BfbnVtX3NyYyhHQ18jI29wYykgPj0gMSk7XAorICAgXAorICAgaW5zdHIgPSBlaXJfaW5z
dHJ1Y3Rpb25fY3JlYXRlKGJsb2NrLCBHQ18jI29wYyk7IFwKKyAgIGluc3RyLT5nYy50eXBlID0g
R0NfT1BfVFlQRV9BTFU7IFwKKyAgIGluc3RyLT5kc3QgPSAqZHN0OyBcCisgICBpbnN0ci0+c3Jj
WzBdID0gKnNyYzA7IFwKKyAgIFwKKyAgIHJldHVybiBpbnN0cjsgXAorfQorCisjZGVmaW5lIEFM
VTIob3BjKSBcCitzdGF0aWMgaW5saW5lIHN0cnVjdCBlaXJfaW5zdHJ1Y3Rpb24gKiBcCitlaXJf
IyNvcGMoc3RydWN0IGVpcl9ibG9jayAqYmxvY2ssIHN0cnVjdCBlaXJfcmVnaXN0ZXIgKmRzdCwg
XAorICAgICAgICAgIHN0cnVjdCBlaXJfcmVnaXN0ZXIgKnNyYzAsIHN0cnVjdCBlaXJfcmVnaXN0
ZXIgKnNyYzEpIFwKK3sgXAorICAgc3RydWN0IGVpcl9pbnN0cnVjdGlvbiAqaW5zdHI7IFwKKyAg
IFwKKyAgIGFzc2VydChnY19vcF9oYXNfZHN0KEdDXyMjb3BjKSk7XAorICAgYXNzZXJ0KGdjX29w
X251bV9zcmMoR0NfIyNvcGMpID09IDIpO1wKKyAgIFwKKyAgIGluc3RyID0gZWlyX2luc3RydWN0
aW9uX2NyZWF0ZShibG9jaywgR0NfIyNvcGMpOyBcCisgICBpbnN0ci0+Z2MudHlwZSA9IEdDX09Q
X1RZUEVfQUxVOyBcCisgICBpbnN0ci0+ZHN0ID0gKmRzdDsgXAorICAgaW5zdHItPnNyY1swXSA9
ICpzcmMwOyBcCisgICBpbnN0ci0+c3JjWzFdID0gKnNyYzE7IFwKKyAgIFwKKyAgIHJldHVybiBp
bnN0cjsgXAorfQorCisjZGVmaW5lIEFMVTMob3BjKSBcCitzdGF0aWMgaW5saW5lIHN0cnVjdCBl
aXJfaW5zdHJ1Y3Rpb24gKiBcCitlaXJfIyNvcGMoc3RydWN0IGVpcl9ibG9jayAqYmxvY2ssIHN0
cnVjdCBlaXJfcmVnaXN0ZXIgKmRzdCwgXAorICAgICAgICAgIHN0cnVjdCBlaXJfcmVnaXN0ZXIg
KnNyYzAsIHN0cnVjdCBlaXJfcmVnaXN0ZXIgKnNyYzEsIFwKKyAgICAgICAgICBzdHJ1Y3QgZWly
X3JlZ2lzdGVyICpzcmMyKSBcCit7IFwKKyAgIHN0cnVjdCBlaXJfaW5zdHJ1Y3Rpb24gKmluc3Ry
OyBcCisgICBcCisgICBhc3NlcnQoZ2Nfb3BfaGFzX2RzdChHQ18jI29wYykpO1wKKyAgIGFzc2Vy
dChnY19vcF9udW1fc3JjKEdDXyMjb3BjKSA9PSAzKTtcCisgICBcCisgICBpbnN0ciA9IGVpcl9p
bnN0cnVjdGlvbl9jcmVhdGUoYmxvY2ssIEdDXyMjb3BjKTsgXAorICAgaW5zdHItPmdjLnR5cGUg
PSBHQ19PUF9UWVBFX0FMVTsgXAorICAgaW5zdHItPmRzdCA9ICpkc3Q7IFwKKyAgIGluc3RyLT5z
cmNbMF0gPSAqc3JjMDsgXAorICAgaW5zdHItPnNyY1sxXSA9ICpzcmMxOyBcCisgICBpbnN0ci0+
c3JjWzJdID0gKnNyYzI7IFwKKyAgIFwKKyAgIHJldHVybiBpbnN0cjsgXAorfQorCisjZGVmaW5l
IFRFWChvcGMpIFwKK3N0YXRpYyBpbmxpbmUgc3RydWN0IGVpcl9pbnN0cnVjdGlvbiAqIFwKK2Vp
cl8jI29wYyhzdHJ1Y3QgZWlyX2Jsb2NrICpibG9jaywgc3RydWN0IGVpcl9yZWdpc3RlciAqZHN0
LCBcCisgICAgICAgICAgc3RydWN0IGVpcl9yZWdpc3RlciAqc2FtcGxlciwgc3RydWN0IGVpcl9y
ZWdpc3RlciAqc3JjKSBcCit7IFwKKyAgIHN0cnVjdCBlaXJfaW5zdHJ1Y3Rpb24gKmluc3RyOyBc
CisgICBcCisgICBhc3NlcnQoZ2Nfb3BfaGFzX2RzdChHQ18jI29wYykpO1wKKyAgIGFzc2VydChn
Y19vcF9udW1fc3JjKEdDXyMjb3BjKSA9PSAyKTsgXAorICAgXAorICAgaW5zdHIgPSBlaXJfaW5z
dHJ1Y3Rpb25fY3JlYXRlKGJsb2NrLCBHQ18jI29wYyk7IFwKKyAgIGluc3RyLT5nYy50eXBlID0g
R0NfT1BfVFlQRV9TQU1QTEVSOyBcCisgICBpbnN0ci0+ZHN0ID0gKmRzdDsgXAorICAgaW5zdHIt
PnNyY1swXSA9ICpzYW1wbGVyOyBcCisgICBpbnN0ci0+c3JjWzFdID0gKnNyYzsgXAorICAgXAor
ICAgcmV0dXJuIGluc3RyOyBcCit9CisKK0FMVTAoTk9QKTsKK0FMVTAoVEVYS0lMTCk7CisKK0FM
VTEoTU9WKTsKK0FMVTEoTU9WQVIpOworQUxVMShSQ1ApOworQUxVMShSU1EpOworQUxVMShDRUlM
KTsKK0FMVTEoRkxPT1IpOworQUxVMShGUkMpOworQUxVMShMT0cpOworQUxVMShTUVJUKTsKK0FM
VTEoU0lOKTsKK0FMVTEoQ09TKTsKK0FMVTEoRVhQKTsKK0FMVTEoRFNYKTsKK0FMVTEoRFNZKTsK
KworQUxVMihBREQpOworQUxVMihNVUwpOworQUxVMihEUDIpOworQUxVMihEUDMpOworQUxVMihE
UDQpOworCitBTFUzKE1BRCk7CitBTFUzKFNFTEVDVCk7CisKK1RFWChURVhMRCk7CitURVgoVEVY
TERCKTsKK1RFWChURVhMREwpOworCisjZGVmaW5lIGVpcl9mb3JfZWFjaF9ibG9jayhibG9jaywg
aXIpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCisgICBsaXN0X2Zvcl9lYWNo
X2VudHJ5KHN0cnVjdCBlaXJfYmxvY2ssIGJsb2NrLCAmaXItPmJsb2NrX2xpc3QsIG5vZGUpCisK
KyNkZWZpbmUgZWlyX2Zvcl9lYWNoX2Jsb2NrX3JldihibG9jaywgaXIpICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFwKKyAgIGxpc3RfZm9yX2VhY2hfZW50cnlfcmV2KHN0cnVjdCBlaXJf
YmxvY2ssIGJsb2NrLCAmaXItPmJsb2NrX2xpc3QsIG5vZGUpCisKKy8qIExvb3Agb3ZlciB0aGUg
bm9uLU5VTEwgbWVtYmVycyBvZiB0aGUgc3VjY2Vzc29ycyBhcnJheS4gKi8KKyNkZWZpbmUgZWly
X2Zvcl9lYWNoX3N1Y2Nlc3NvcihzdWNjLCBibG9jaykgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFwKKyAgIGZvciAoc3RydWN0IGVpcl9ibG9jayAqc3VjYyA9IGJsb2NrLT5zdWNjZXNzb3Jz
WzBdOyAgICAgICAgICAgICAgICAgIFwKKyAgICAgICAgIHN1Y2MgIT0gTlVMTDsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKKyAgICAgICAgIHN1Y2Mg
PSAoc3VjYyA9PSBibG9jay0+c3VjY2Vzc29yc1sxXSA/IE5VTEwgOiAgICAgICAgICAgICAgICAg
IFwKKyAgICAgICAgICAgICAgIGJsb2NrLT5zdWNjZXNzb3JzWzFdKSkKKworI2RlZmluZSBlaXJf
Zm9yX2VhY2hfaW5zdChpbnN0LCBibG9jaykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgXAorICAgbGlzdF9mb3JfZWFjaF9lbnRyeShzdHJ1Y3QgZWlyX2luc3RydWN0aW9uLCBpbnN0
LCAmYmxvY2stPmluc3RyX2xpc3QsIG5vZGUpCisKKyNkZWZpbmUgZWlyX2Zvcl9lYWNoX2luc3Rf
c2FmZShpbnN0LCBibG9jaykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXAorICAg
bGlzdF9mb3JfZWFjaF9lbnRyeV9zYWZlKHN0cnVjdCBlaXJfaW5zdHJ1Y3Rpb24sIGluc3QsICZi
bG9jay0+aW5zdHJfbGlzdCwgbm9kZSkKKworI2lmZGVmIF9fY3BsdXNwbHVzCit9CisjZW5kaWYK
KworI2VuZGlmIC8vIEhfRUlSCmRpZmYgLS1naXQgYS9zcmMvZXRuYXZpdi9jb21waWxlci9laXJf
dW5pZm9ybS5jIGIvc3JjL2V0bmF2aXYvY29tcGlsZXIvZWlyX3VuaWZvcm0uYwpuZXcgZmlsZSBt
b2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwMC4uN2Y3NTIxNWU0ODAKLS0tIC9kZXYvbnVsbAor
KysgYi9zcmMvZXRuYXZpdi9jb21waWxlci9laXJfdW5pZm9ybS5jCkBAIC0wLDAgKzEsMTA4IEBA
CisvKgorICogQ29weXJpZ2h0IChjKSAyMDE4IEV0bmF2aXYgUHJvamVjdAorICogQ29weXJpZ2h0
IChDKSAyMDE4IFpvZGlhYyBJbmZsaWdodCBJbm5vdmF0aW9ucworICoKKyAqIFBlcm1pc3Npb24g
aXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmlu
ZyBhCisgKiBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlv
biBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAorICogdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0
aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbgorICogdGhlIHJp
Z2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1
YiBsaWNlbnNlLAorICogYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRv
IHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCisgKiBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8g
ZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgorICoKKyAqIFRoZSBh
Ym92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIChpbmNsdWRp
bmcgdGhlCisgKiBuZXh0IHBhcmFncmFwaCkgc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGll
cyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucworICogb2YgdGhlIFNvZnR3YXJlLgorICoKKyAqIFRI
RSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBL
SU5ELCBFWFBSRVNTIE9SCisgKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRP
IFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKyAqIEZJVE5FU1MgRk9SIEEgUEFS
VElDVUxBUiBQVVJQT1NFIEFORCBOT04tSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTAor
ICogVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xB
SU0sIERBTUFHRVMgT1IgT1RIRVIKKyAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04g
T0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCisgKiBGUk9NLCBPVVQgT0Yg
T1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSCisg
KiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCisgKgorICogQXV0aG9yczoKKyAqICAgIENocmlz
dGlhbiBHbWVpbmVyIDxjaHJpc3RpYW4uZ21laW5lckBnbWFpbC5jb20+CisgKi8KKworI2luY2x1
ZGUgImVpci5oIgorCitzdGF0aWMgaW5saW5lIHZvaWQKK2FwcGVuZF91bmlmb3JtKHN0cnVjdCBl
aXIgKmlyLCBlbnVtIGVpcl91bmlmb3JtX2NvbnRlbnRzIGNvbnRlbnQsIHVpbnQzMl90IHZhbHVl
KQoreworICAgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEgZCA9IHsKKyAgICAgIC5jb250ZW50ID0g
Y29udGVudCwKKyAgICAgIC5kYXRhID0gdmFsdWUKKyAgIH07CisKKyAgIHV0aWxfZHluYXJyYXlf
YXBwZW5kKCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEsIGQpOwor
fQorCitzdHJ1Y3QgZWlyX3JlZ2lzdGVyCitlaXJfdW5pZm9ybV9yZWdpc3Rlcl92ZWM0KHN0cnVj
dCBlaXIgKmlyLAorICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB1bnNpZ25lZCBuY29t
cCwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW51bSBlaXJfdW5pZm9ybV9jb250
ZW50cyAqY29udGVudHMsCisgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVpbnQzMl90
ICp2YWx1ZXMpCit7CisgICBjb25zdCB1bnNpZ25lZCBzaXplID0gdXRpbF9keW5hcnJheV9udW1f
ZWxlbWVudHMoJmlyLT51bmlmb3JtX2FsbG9jLCBzdHJ1Y3QgZWlyX3VuaWZvcm1fZGF0YSk7Cisg
ICB1bnNpZ25lZCBpZHgsIGk7CisKKyAgIC8qIGlzIHRoZXJlIGFscmVhZHkgc29tZXRoaW5nIHVz
ZWZ1bCB0byByZXVzZT8gKi8KKyAgIGZvciAoaWR4ID0gMDsgaWR4IDwgc2l6ZTsgaWR4KyspIHsK
KyAgICAgIGNvbnN0IHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhICpkYXRhOworCisgICAgICBmb3Ig
KGkgPSAwOyBpIDwgbmNvbXA7IGkrKykgeworICAgICAgICAgZGF0YSA9IHV0aWxfZHluYXJyYXlf
ZWxlbWVudCgmaXItPnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCBpZHgg
KyBpKTsKKworICAgICAgICAgaWYgKGRhdGEtPmNvbnRlbnQgPT0gRUlSX1VOSUZPUk1fVU5VU0VE
KQorICAgICAgICAgICAgY29udGludWU7CisKKyAgICAgICAgIGlmIChkYXRhLT5jb250ZW50ICE9
IGNvbnRlbnRzW2ldIHx8IGRhdGEtPmRhdGEgIT0gdmFsdWVzW2ldKQorICAgICAgICAgICAgYnJl
YWs7CisgICAgICB9CisKKwkJLyogbWF0Y2hlZCBhbGwgY29tcG9uZW50cyAqLworCQlpZiAoaSA9
PSBuY29tcCkKKwkJCWJyZWFrOworICAgfQorCisgICAvKiBkbyB3ZSBuZWVkIHRvIHVwZGF0ZSB1
bnVzZWQgaXRlbXM/ICovCisgICBpZiAoaWR4ICE9IHNpemUpIHsKKyAgICAgIHN0cnVjdCBlaXJf
dW5pZm9ybV9kYXRhICpkYXRhOworCisgICAgICBmb3IgKGkgPSAwOyBpIDwgbmNvbXA7IGkrKykg
eworICAgICAgICAgZGF0YSA9IHV0aWxfZHluYXJyYXlfZWxlbWVudCgmaXItPnVuaWZvcm1fYWxs
b2MsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCBpZHggKyBpKTsKKworICAgICAgICAgZGF0YS0+
Y29udGVudCA9IGNvbnRlbnRzW2ldOworICAgICAgICAgZGF0YS0+ZGF0YSA9IHZhbHVlc1tpXTsK
KyAgICAgIH0KKyAgIH0KKworCS8qIG5lZWQgdG8gYWxsb2NhdGUgbmV3IGltbWVkaWF0ZSAqLwor
CWlmIChpZHggPT0gc2l6ZSkgeworICAgICAgLyogcGFkIG91dCBjdXJyZW50IHVuaWZvcm0gdmVj
dG9yIC0gaWYgbmVlZGVkICovCisgICAgICBpZiAoc2l6ZSAlIDQpCisgICAgICAgICBmb3IgKGkg
PSBzaXplICUgNDsgaSA8IG5jb21wOyBpKyspCisgICAgICAgICAgICBhcHBlbmRfdW5pZm9ybShp
ciwgRUlSX1VOSUZPUk1fVU5VU0VELCAwKTsKKworICAgICAgZm9yIChpID0gMDsgaSA8IG5jb21w
OyBpKyspCisgICAgICAgICBhcHBlbmRfdW5pZm9ybShpciwgY29udGVudHNbaV0sIHZhbHVlc1tp
XSk7CisKKyAgICAgIGlkeCA9IHV0aWxfZHluYXJyYXlfbnVtX2VsZW1lbnRzKCZpci0+dW5pZm9y
bV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEpOworICAgICAgaWR4IC09IG5jb21wOwor
ICAgfQorCisgICBpZHggKz0gaXItPnVuaWZvcm1fb2Zmc2V0OworCisgICBzdHJ1Y3QgZWlyX3Jl
Z2lzdGVyIHJlZyA9IHsKKyAgICAgIC50eXBlID0gRUlSX1JFR19VTklGT1JNLAorICAgICAgLmlu
ZGV4ID0gaWR4IC8gNCwKKyAgIH07CisKKyAgIGlmIChuY29tcCA9PSA0KQorICAgICAgcmVnLnN3
aXp6bGUgPSBJTlNUX1NXSVpfSURFTlRJVFk7CisgICBlbHNlCisgICAgICByZWcuc3dpenpsZSA9
IElOU1RfU1dJWl9CUk9BRENBU1QoaWR4ICYgMyk7CisKKyAgIHJldHVybiByZWc7Cit9CmRpZmYg
LS1naXQgYS9zcmMvZXRuYXZpdi9jb21waWxlci9tZXNvbi5idWlsZCBiL3NyYy9ldG5hdml2L2Nv
bXBpbGVyL21lc29uLmJ1aWxkCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAw
Li44YWZmZTZlYmQ0OAotLS0gL2Rldi9udWxsCisrKyBiL3NyYy9ldG5hdml2L2NvbXBpbGVyL21l
c29uLmJ1aWxkCkBAIC0wLDAgKzEsMzggQEAKKyMgQ29weXJpZ2h0IChjKSAyMDE4IEV0bmF2aXYg
UHJvamVjdAorIyBDb3B5cmlnaHQgKEMpIDIwMTggWm9kaWFjIEluZmxpZ2h0IElubm92YXRpb25z
CisjCisjIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBh
bnkgcGVyc29uIG9idGFpbmluZyBhCisjIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2Np
YXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCisjIHRvIGRlYWwgaW4g
dGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0
YXRpb24KKyMgdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gs
IGRpc3RyaWJ1dGUsIHN1YiBsaWNlbnNlLAorIyBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNv
ZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKKyMgU29mdHdhcmUgaXMg
ZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoK
KyMKKyMgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3Rp
Y2UgKGluY2x1ZGluZyB0aGUKKyMgbmV4dCBwYXJhZ3JhcGgpIHNoYWxsIGJlIGluY2x1ZGVkIGlu
IGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMKKyMgb2YgdGhlIFNvZnR3YXJlLgor
IworIyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBP
RiBBTlkgS0lORCwgRVhQUkVTUyBPUgorIyBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1J
VEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKKyMgRklUTkVTUyBGT1Ig
QSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTi1JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNI
QUxMCisjIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5Z
IENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCisjIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJ
T04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCisjIEZST00sIE9VVCBP
RiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIK
KyMgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorCitsaWJldG5hdml2X2NvbXBpbGVyX2ZpbGVz
ID0gZmlsZXMoCisgICdlaXIuYycsCisgICdlaXIuaCcsCisgICdlaXJfdW5pZm9ybS5jJywKKykK
KworbGliZXRuYXZpdl9jb21waWxlciA9IHN0YXRpY19saWJyYXJ5KAorICBbJ2V0bmF2aXZfY29t
cGlsZXInXSwKKyAgbGliZXRuYXZpdl9jb21waWxlcl9maWxlcywKKyAgaW5jbHVkZV9kaXJlY3Rv
cmllcyA6IFtpbmNfY29tbW9uLCBpbmNfZXRuYXZpdl0sCisgIGNfYXJncyA6IFtjX3Zpc19hcmdz
LCBub19vdmVycmlkZV9pbml0X2FyZ3NdLAorICBkZXBlbmRlbmNpZXMgOiBbZGVwX2xpYmRybSwg
ZGVwX3ZhbGdyaW5kLCBpZGVwX25pcl0sCisgIGJ1aWxkX2J5X2RlZmF1bHQgOiB0cnVlLAorKQor
CitzdWJkaXIoJ3Rlc3RzJykKZGlmZiAtLWdpdCBhL3NyYy9ldG5hdml2L2NvbXBpbGVyL3Rlc3Rz
L2Vpcl9hc3NlbWJsZS5jcHAgYi9zcmMvZXRuYXZpdi9jb21waWxlci90ZXN0cy9laXJfYXNzZW1i
bGUuY3BwCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwLi42MzUzNTkwOGEz
MgotLS0gL2Rldi9udWxsCisrKyBiL3NyYy9ldG5hdml2L2NvbXBpbGVyL3Rlc3RzL2Vpcl9hc3Nl
bWJsZS5jcHAKQEAgLTAsMCArMSwxMTQgQEAKKy8qCisgKiBDb3B5cmlnaHQgKGMpIDIwMTggRXRu
YXZpdiBQcm9qZWN0CisgKiBDb3B5cmlnaHQgKEMpIDIwMTggWm9kaWFjIEluZmxpZ2h0IElubm92
YXRpb25zCisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFy
Z2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBh
bmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCisgKiB0
byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0
aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJn
ZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3ViIGxpY2Vuc2UsCisgKiBhbmQvb3Igc2VsbCBjb3Bp
ZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKKyAq
IFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5n
IGNvbmRpdGlvbnM6CisgKgorICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMg
cGVybWlzc2lvbiBub3RpY2UgKGluY2x1ZGluZyB0aGUKKyAqIG5leHQgcGFyYWdyYXBoKSBzaGFs
bCBiZSBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zCisgKiBv
ZiB0aGUgU29mdHdhcmUuCisgKgorICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIs
IFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElO
Q0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklM
SVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTi1JTkZSSU5H
RU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMCisgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9M
REVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgorICogTElBQklM
SVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0Us
IEFSSVNJTkcKKyAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRX
QVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKKyAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAq
CisgKiBBdXRob3JzOgorICogICAgQ2hyaXN0aWFuIEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVy
QGdtYWlsLmNvbT4KKyAqLworCisjaW5jbHVkZSA8Z3Rlc3QvZ3Rlc3QuaD4KKyNpbmNsdWRlICJl
dG5hdml2L2NvbXBpbGVyL2Vpci5oIgorCitURVNUIChBc3NlbWJsZVRlc3QsIE5vcEFzc2VtYmxl
RGlzYXNzZW1ibGUpCit7CisgICBzdHJ1Y3QgZWlyICppciA9IGVpcl9jcmVhdGUoKTsKKyAgIHN0
cnVjdCBlaXJfYmxvY2sgKmJsb2NrID0gZWlyX2Jsb2NrX2NyZWF0ZShpcik7CisKKyAgIGVpcl9O
T1AoYmxvY2spOworCisgICBzdHJ1Y3QgZWlyX2luZm8gaW5mbzsKKyAgIHZvaWQgKmJpbiA9IGVp
cl9hc3NlbWJsZShpciwgJmluZm8pOworICAgQVNTRVJUX1RSVUUoYmluKTsKKworICAgZWlyX2Rl
c3Ryb3koaXIpOworCisgICBzdHJ1Y3QgZ2NfaW5zdHIgaW5zdHI7CisgICBnY191bnBhY2tfaW5z
dHIoKHVpbnQzMl90KiApYmluLCAmaW5zdHIpOworCisgICBBU1NFUlRfRVEoaW5zdHIudHlwZSwg
R0NfT1BfVFlQRV9BTFUpOworICAgQVNTRVJUX0VRKGluc3RyLm9wY29kZSwgR0NfTk9QKTsKKwor
ICAgQVNTRVJUX0VRKGluZm8uc2l6ZWR3b3JkcywgNCk7CisKKyAgIGZyZWUoYmluKTsKK30KKwor
VEVTVCAoQXNzZW1ibGVUZXN0LCBTd2l6emxlKQoreworICAgc3RydWN0IGVpciAqaXIgPSBlaXJf
Y3JlYXRlKCk7CisgICBzdHJ1Y3QgZWlyX2Jsb2NrICpibG9jayA9IGVpcl9ibG9ja19jcmVhdGUo
aXIpOworCisgICBzdHJ1Y3QgZWlyX3JlZ2lzdGVyIGQgPSBlaXJfdGVtcF9yZWdpc3Rlcihpciwg
NCk7CisgICBzdHJ1Y3QgZWlyX3JlZ2lzdGVyIHMwID0gZWlyX3RlbXBfcmVnaXN0ZXIoaXIsIDQp
OworICAgc3RydWN0IGVpcl9yZWdpc3RlciBzMSA9IGVpcl90ZW1wX3JlZ2lzdGVyKGlyLCA0KTsK
KworICAgZWlyX0FERChibG9jaywgJmQsICZzMCwgJnMxKTsKKworICAgc3RydWN0IGVpcl9pbmZv
IGluZm87CisgICB2b2lkICpiaW4gPSBlaXJfYXNzZW1ibGUoaXIsICZpbmZvKTsKKyAgIEFTU0VS
VF9UUlVFKGJpbik7CisKKyAgIGVpcl9kZXN0cm95KGlyKTsKKworICAgc3RydWN0IGdjX2luc3Ry
IGluc3RyOworICAgZ2NfdW5wYWNrX2luc3RyKCh1aW50MzJfdCogKWJpbiwgJmluc3RyKTsKKwor
ICAgQVNTRVJUX0VRKGluc3RyLnR5cGUsIEdDX09QX1RZUEVfQUxVKTsKKyAgIEFTU0VSVF9FUShp
bnN0ci5vcGNvZGUsIEdDX0FERCk7CisgICBBU1NFUlRfVFJVRShpbnN0ci5hbHUuc3JjWzBdLnVz
ZSk7CisgICBBU1NFUlRfRkFMU0UoaW5zdHIuYWx1LnNyY1sxXS51c2UpOworICAgQVNTRVJUX1RS
VUUoaW5zdHIuYWx1LnNyY1syXS51c2UpOworICAgQVNTRVJUX0VRKGluc3RyLmFsdS5zcmNbMF0u
cmVnLCAxKTsKKyAgIEFTU0VSVF9FUShpbnN0ci5hbHUuc3JjWzJdLnJlZywgMik7CisgICBBU1NF
UlRfRVEoaW5zdHIuZHN0LnJlZywgMCk7CisKKyAgIGZyZWUoYmluKTsKK30KKworVEVTVCAoQXNz
ZW1ibGVUZXN0LCBTd2l6emxlUmVwbGljYXRlKQoreworICAgc3RydWN0IGVpciAqaXIgPSBlaXJf
Y3JlYXRlKCk7CisgICBzdHJ1Y3QgZWlyX2Jsb2NrICpibG9jayA9IGVpcl9ibG9ja19jcmVhdGUo
aXIpOworCisgICBzdHJ1Y3QgZWlyX3JlZ2lzdGVyIGQgPSBlaXJfdGVtcF9yZWdpc3Rlcihpciwg
NCk7CisgICBzdHJ1Y3QgZWlyX3JlZ2lzdGVyIHMgPSBlaXJfdGVtcF9yZWdpc3RlcihpciwgNCk7
CisgICBlaXJfRFNYKGJsb2NrLCAmZCwgJnMpOworCisgICBzdHJ1Y3QgZWlyX2luZm8gaW5mbzsK
KyAgIHZvaWQgKmJpbiA9IGVpcl9hc3NlbWJsZShpciwgJmluZm8pOworICAgQVNTRVJUX1RSVUUo
YmluKTsKKworICAgZWlyX2Rlc3Ryb3koaXIpOworCisgICBzdHJ1Y3QgZ2NfaW5zdHIgaW5zdHI7
CisgICBnY191bnBhY2tfaW5zdHIoKHVpbnQzMl90KiApYmluLCAmaW5zdHIpOworCisgICBBU1NF
UlRfRVEoaW5zdHIudHlwZSwgR0NfT1BfVFlQRV9BTFUpOworICAgQVNTRVJUX0VRKGluc3RyLm9w
Y29kZSwgR0NfRFNYKTsKKyAgIEFTU0VSVF9UUlVFKGluc3RyLmFsdS5zcmNbMF0udXNlKTsKKyAg
IEFTU0VSVF9GQUxTRShpbnN0ci5hbHUuc3JjWzFdLnVzZSk7CisgICBBU1NFUlRfVFJVRShpbnN0
ci5hbHUuc3JjWzJdLnVzZSk7CisgICBBU1NFUlRfRVEoaW5zdHIuYWx1LnNyY1swXS5yZWcsIDEp
OworICAgQVNTRVJUX0VRKGluc3RyLmFsdS5zcmNbMl0ucmVnLCAxKTsKKworICAgZnJlZShiaW4p
OworfQpkaWZmIC0tZ2l0IGEvc3JjL2V0bmF2aXYvY29tcGlsZXIvdGVzdHMvZWlyX3VuaWZvcm0u
Y3BwIGIvc3JjL2V0bmF2aXYvY29tcGlsZXIvdGVzdHMvZWlyX3VuaWZvcm0uY3BwCm5ldyBmaWxl
IG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwLi44NjdlNTFhYjM4NAotLS0gL2Rldi9udWxs
CisrKyBiL3NyYy9ldG5hdml2L2NvbXBpbGVyL3Rlc3RzL2Vpcl91bmlmb3JtLmNwcApAQCAtMCww
ICsxLDMyNCBAQAorLyoKKyAqIENvcHlyaWdodCAoYykgMjAxOCBFdG5hdml2IFByb2plY3QKKyAq
IENvcHlyaWdodCAoQykgMjAxOCBab2RpYWMgSW5mbGlnaHQgSW5ub3ZhdGlvbnMKKyAqCisgKiBQ
ZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNv
biBvYnRhaW5pbmcgYQorICogY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRv
Y3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwKKyAqIHRvIGRlYWwgaW4gdGhlIFNv
ZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24K
KyAqIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0
cmlidXRlLCBzdWIgbGljZW5zZSwKKyAqIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdh
cmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQorICogU29mdHdhcmUgaXMgZnVy
bmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKKyAq
CisgKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGlj
ZSAoaW5jbHVkaW5nIHRoZQorICogbmV4dCBwYXJhZ3JhcGgpIHNoYWxsIGJlIGluY2x1ZGVkIGlu
IGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMKKyAqIG9mIHRoZSBTb2Z0d2FyZS4K
KyAqCisgKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5U
WSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgorICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1Qg
TElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisgKiBGSVRORVNT
IEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OLUlORlJJTkdFTUVOVC4gSU4gTk8gRVZF
TlQgU0hBTEwKKyAqIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBG
T1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCisgKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4g
QU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORworICogRlJP
TSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBP
UiBPVEhFUgorICogREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLgorICoKKyAqIEF1dGhvcnM6Cisg
KiAgICBDaHJpc3RpYW4gR21laW5lciA8Y2hyaXN0aWFuLmdtZWluZXJAZ21haWwuY29tPgorICov
CisKKyNpbmNsdWRlIDxndGVzdC9ndGVzdC5oPgorI2luY2x1ZGUgImV0bmF2aXYvY29tcGlsZXIv
ZWlyLmgiCisKK1RFU1QgKFVuaWZvcm1UZXN0LCBCYXNpYykKK3sKKyAgIHN0cnVjdCBlaXIgKmly
ID0gZWlyX2NyZWF0ZSgpOworICAgc3RydWN0IGVpcl9yZWdpc3RlciB1OworICAgY29uc3Qgc3Ry
dWN0IGVpcl91bmlmb3JtX2RhdGEgKmRhdGE7CisKKyAgIHUgPSBlaXJfdW5pZm9ybV9yZWdpc3Rl
cl91aShpciwgMSk7CisKKyAgIEFTU0VSVF9FUSh1LnR5cGUsIGVpcl9yZWdpc3Rlcjo6RUlSX1JF
R19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1LmluZGV4LCAwKTsKKyAgIEFTU0VSVF9FUSh1LnN3
aXp6bGUsIElOU1RfU1dJWl9CUk9BRENBU1QoMCkpOworCisgICBkYXRhID0gdXRpbF9keW5hcnJh
eV9lbGVtZW50KCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEsIDAp
OworICAgQVNTRVJUX0VRKGRhdGEtPmNvbnRlbnQsIEVJUl9VTklGT1JNX0NPTlNUQU5UKTsKKyAg
IEFTU0VSVF9FUShkYXRhLT5kYXRhLCAxKTsKKworICAgZWlyX2Rlc3Ryb3koaXIpOworfQorCitU
RVNUIChVbmlmb3JtVGVzdCwgUmV1c2VVbnVzZWQpCit7CisgICBzdHJ1Y3QgZWlyICppciA9IGVp
cl9jcmVhdGUoKTsKKyAgIHN0cnVjdCBlaXJfcmVnaXN0ZXIgdTEsIHUyOworCisgICBlaXJfdW5p
Zm9ybV9yZWdpc3RlcihpciwgRUlSX1VOSUZPUk1fVU5VU0VELCAwKTsKKworICAgQVNTRVJUX0VR
KHV0aWxfZHluYXJyYXlfbnVtX2VsZW1lbnRzKCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVp
cl91bmlmb3JtX2RhdGEpLCAxKTsKKworICAgdTEgPSBlaXJfdW5pZm9ybV9yZWdpc3Rlcl91aShp
ciwgMSk7CisgICB1MiA9IGVpcl91bmlmb3JtX3JlZ2lzdGVyX3VpKGlyLCAxKTsKKworICAgQVNT
RVJUX0VRKHV0aWxfZHluYXJyYXlfbnVtX2VsZW1lbnRzKCZpci0+dW5pZm9ybV9hbGxvYywgc3Ry
dWN0IGVpcl91bmlmb3JtX2RhdGEpLCAxKTsKKworICAgQVNTRVJUX0VRKHUxLnR5cGUsIGVpcl9y
ZWdpc3Rlcjo6RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1MS5pbmRleCwgMCk7Cisg
ICBBU1NFUlRfRVEodTEuc3dpenpsZSwgSU5TVF9TV0laX0JST0FEQ0FTVCgwKSk7CisKKyAgIEFT
U0VSVF9FUSh1Mi50eXBlLCBlaXJfcmVnaXN0ZXI6OkVJUl9SRUdfVU5JRk9STSk7CisgICBBU1NF
UlRfRVEodTIuaW5kZXgsIDApOworICAgQVNTRVJUX0VRKHUyLnN3aXp6bGUsIElOU1RfU1dJWl9C
Uk9BRENBU1QoMCkpOworCisgICBlaXJfZGVzdHJveShpcik7Cit9CisKK1RFU1QgKFVuaWZvcm1U
ZXN0LCBSZXVzZVVudXNlZENhdXNlZEJ5VmVjNCkKK3sKKyAgIHN0cnVjdCBlaXIgKmlyID0gZWly
X2NyZWF0ZSgpOworICAgc3RydWN0IGVpcl9yZWdpc3RlciB1MSwgdTIsIHUzOworCisgICB1MSA9
IGVpcl91bmlmb3JtX3JlZ2lzdGVyX3VpKGlyLCAwKTsKKworICAgQVNTRVJUX0VRKHV0aWxfZHlu
YXJyYXlfbnVtX2VsZW1lbnRzKCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3Jt
X2RhdGEpLCAxKTsKKworICAgdWludDMyX3QgdltdID0geworICAgICAgMTAsCisgICAgICAxMSwK
KyAgICAgIDEyLAorICAgICAgMTMsCisgICB9OworCisgICB1MiA9IGVpcl91bmlmb3JtX3JlZ2lz
dGVyX3ZlYzRfdWkoaXIsIDQsIHYpOworCisgICBBU1NFUlRfRVEodXRpbF9keW5hcnJheV9udW1f
ZWxlbWVudHMoJmlyLT51bmlmb3JtX2FsbG9jLCBzdHJ1Y3QgZWlyX3VuaWZvcm1fZGF0YSksIDgp
OworCisgICB1MyA9IGVpcl91bmlmb3JtX3JlZ2lzdGVyX3VpKGlyLCAxKTsKKworICAgQVNTRVJU
X0VRKHV0aWxfZHluYXJyYXlfbnVtX2VsZW1lbnRzKCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0
IGVpcl91bmlmb3JtX2RhdGEpLCA4KTsKKworICAgQVNTRVJUX0VRKHUxLnR5cGUsIGVpcl9yZWdp
c3Rlcjo6RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1MS5pbmRleCwgMCk7CisgICBB
U1NFUlRfRVEodTEuc3dpenpsZSwgSU5TVF9TV0laX0JST0FEQ0FTVCgwKSk7CisKKyAgIEFTU0VS
VF9FUSh1Mi50eXBlLCBlaXJfcmVnaXN0ZXI6OkVJUl9SRUdfVU5JRk9STSk7CisgICBBU1NFUlRf
RVEodTIuaW5kZXgsIDEpOworICAgQVNTRVJUX0VRKHUyLnN3aXp6bGUsIElOU1RfU1dJWl9JREVO
VElUWSk7CisKKyAgIEFTU0VSVF9FUSh1My50eXBlLCBlaXJfcmVnaXN0ZXI6OkVJUl9SRUdfVU5J
Rk9STSk7CisgICBBU1NFUlRfRVEodTMuaW5kZXgsIDApOworICAgQVNTRVJUX0VRKHUzLnN3aXp6
bGUsIElOU1RfU1dJWl9CUk9BRENBU1QoMSkpOworCisgICBlaXJfZGVzdHJveShpcik7Cit9CisK
K1RFU1QgKFVuaWZvcm1UZXN0LCBFcXVhbFVuaWZvcm1zKQoreworICAgc3RydWN0IGVpciAqaXIg
PSBlaXJfY3JlYXRlKCk7CisgICBzdHJ1Y3QgZWlyX3JlZ2lzdGVyIHUxLCB1MjsKKworICAgdTEg
PSBlaXJfdW5pZm9ybV9yZWdpc3Rlcl91aShpciwgMSk7CisgICB1MiA9IGVpcl91bmlmb3JtX3Jl
Z2lzdGVyX3VpKGlyLCAxKTsKKworICAgQVNTRVJUX0VRKHUxLnR5cGUsIGVpcl9yZWdpc3Rlcjo6
RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1MS5pbmRleCwgMCk7CisgICBBU1NFUlRf
RVEodTEuc3dpenpsZSwgSU5TVF9TV0laX0JST0FEQ0FTVCgwKSk7CisKKyAgIEFTU0VSVF9FUSh1
Mi50eXBlLCBlaXJfcmVnaXN0ZXI6OkVJUl9SRUdfVU5JRk9STSk7CisgICBBU1NFUlRfRVEodTIu
aW5kZXgsIDApOworICAgQVNTRVJUX0VRKHUyLnN3aXp6bGUsIElOU1RfU1dJWl9CUk9BRENBU1Qo
MCkpOworCisgICBlaXJfZGVzdHJveShpcik7Cit9CisKK1RFU1QgKFVuaWZvcm1UZXN0LCBNdWx0
aXBlU3dpenpsZXMpCit7CisgICBzdHJ1Y3QgZWlyICppciA9IGVpcl9jcmVhdGUoKTsKKyAgIHN0
cnVjdCBlaXJfcmVnaXN0ZXIgdTEsIHUyLCB1MywgdTQsIHU1OworICAgY29uc3Qgc3RydWN0IGVp
cl91bmlmb3JtX2RhdGEgKmRhdGE7CisKKyAgIHUxID0gZWlyX3VuaWZvcm1fcmVnaXN0ZXJfdWko
aXIsIDApOworICAgdTIgPSBlaXJfdW5pZm9ybV9yZWdpc3Rlcl91aShpciwgMSk7CisgICB1MyA9
IGVpcl91bmlmb3JtX3JlZ2lzdGVyX3VpKGlyLCAyKTsKKyAgIHU0ID0gZWlyX3VuaWZvcm1fcmVn
aXN0ZXJfdWkoaXIsIDMpOworICAgdTUgPSBlaXJfdW5pZm9ybV9yZWdpc3Rlcl91aShpciwgNCk7
CisKKyAgIEFTU0VSVF9FUSh1MS50eXBlLCBlaXJfcmVnaXN0ZXI6OkVJUl9SRUdfVU5JRk9STSk7
CisgICBBU1NFUlRfRVEodTEuaW5kZXgsIDApOworICAgQVNTRVJUX0VRKHUxLnN3aXp6bGUsIElO
U1RfU1dJWl9CUk9BRENBU1QoMCkpOworCisgICBkYXRhID0gdXRpbF9keW5hcnJheV9lbGVtZW50
KCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEsIDApOworICAgQVNT
RVJUX0VRKGRhdGEtPmNvbnRlbnQsIEVJUl9VTklGT1JNX0NPTlNUQU5UKTsKKyAgIEFTU0VSVF9F
UShkYXRhLT5kYXRhLCAwKTsKKworCisgICBBU1NFUlRfRVEodTIudHlwZSwgZWlyX3JlZ2lzdGVy
OjpFSVJfUkVHX1VOSUZPUk0pOworICAgQVNTRVJUX0VRKHUyLmluZGV4LCAwKTsKKyAgIEFTU0VS
VF9FUSh1Mi5zd2l6emxlLCBJTlNUX1NXSVpfQlJPQURDQVNUKDEpKTsKKworICAgZGF0YSA9IHV0
aWxfZHluYXJyYXlfZWxlbWVudCgmaXItPnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5pZm9y
bV9kYXRhLCAxKTsKKyAgIEFTU0VSVF9FUShkYXRhLT5jb250ZW50LCBFSVJfVU5JRk9STV9DT05T
VEFOVCk7CisgICBBU1NFUlRfRVEoZGF0YS0+ZGF0YSwgMSk7CisKKworICAgQVNTRVJUX0VRKHUz
LnR5cGUsIGVpcl9yZWdpc3Rlcjo6RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1My5p
bmRleCwgMCk7CisgICBBU1NFUlRfRVEodTMuc3dpenpsZSwgSU5TVF9TV0laX0JST0FEQ0FTVCgy
KSk7CisKKyAgIGRhdGEgPSB1dGlsX2R5bmFycmF5X2VsZW1lbnQoJmlyLT51bmlmb3JtX2FsbG9j
LCBzdHJ1Y3QgZWlyX3VuaWZvcm1fZGF0YSwgMik7CisgICBBU1NFUlRfRVEoZGF0YS0+Y29udGVu
dCwgRUlSX1VOSUZPUk1fQ09OU1RBTlQpOworICAgQVNTRVJUX0VRKGRhdGEtPmRhdGEsIDIpOwor
CisgICBBU1NFUlRfRVEodTQudHlwZSwgZWlyX3JlZ2lzdGVyOjpFSVJfUkVHX1VOSUZPUk0pOwor
ICAgQVNTRVJUX0VRKHU0LmluZGV4LCAwKTsKKyAgIEFTU0VSVF9FUSh1NC5zd2l6emxlLCBJTlNU
X1NXSVpfQlJPQURDQVNUKDMpKTsKKworICAgZGF0YSA9IHV0aWxfZHluYXJyYXlfZWxlbWVudCgm
aXItPnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCAzKTsKKyAgIEFTU0VS
VF9FUShkYXRhLT5jb250ZW50LCBFSVJfVU5JRk9STV9DT05TVEFOVCk7CisgICBBU1NFUlRfRVEo
ZGF0YS0+ZGF0YSwgMyk7CisKKworICAgQVNTRVJUX0VRKHU1LnR5cGUsIGVpcl9yZWdpc3Rlcjo6
RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1NS5pbmRleCwgMSk7CisgICBBU1NFUlRf
RVEodTUuc3dpenpsZSwgSU5TVF9TV0laX0JST0FEQ0FTVCgwKSk7CisKKyAgIGRhdGEgPSB1dGls
X2R5bmFycmF5X2VsZW1lbnQoJmlyLT51bmlmb3JtX2FsbG9jLCBzdHJ1Y3QgZWlyX3VuaWZvcm1f
ZGF0YSwgNCk7CisgICBBU1NFUlRfRVEoZGF0YS0+Y29udGVudCwgRUlSX1VOSUZPUk1fQ09OU1RB
TlQpOworICAgQVNTRVJUX0VRKGRhdGEtPmRhdGEsIDQpOworCisgICBlaXJfZGVzdHJveShpcik7
Cit9CisKK1RFU1QgKFVuaWZvcm1UZXN0LCBCYXNpY1ZlYzQpCit7CisgICBzdGF0aWMgY29uc3Qg
dWludDMyX3QgdmFsdWVzWzRdID0geyAxLCAyLCAzLCA0IH07CisgICBzdHJ1Y3QgZWlyICppciA9
IGVpcl9jcmVhdGUoKTsKKyAgIHN0cnVjdCBlaXJfcmVnaXN0ZXIgdTsKKyAgIHN0cnVjdCBlaXJf
dW5pZm9ybV9kYXRhICpkYXRhOworCisgICB1ID0gZWlyX3VuaWZvcm1fcmVnaXN0ZXJfdmVjNF91
aShpciwgNCwgdmFsdWVzKTsKKworICAgQVNTRVJUX0VRKHUudHlwZSwgZWlyX3JlZ2lzdGVyOjpF
SVJfUkVHX1VOSUZPUk0pOworICAgQVNTRVJUX0VRKHUuaW5kZXgsIDApOworICAgQVNTRVJUX0VR
KHUuc3dpenpsZSwgSU5TVF9TV0laX0lERU5USVRZKTsKKworICAgZGF0YSA9IHV0aWxfZHluYXJy
YXlfZWxlbWVudCgmaXItPnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCAw
KTsKKyAgIEFTU0VSVF9FUShkYXRhLT5jb250ZW50LCBFSVJfVU5JRk9STV9DT05TVEFOVCk7Cisg
ICBBU1NFUlRfRVEoZGF0YS0+ZGF0YSwgMSk7CisKKyAgIGRhdGEgPSB1dGlsX2R5bmFycmF5X2Vs
ZW1lbnQoJmlyLT51bmlmb3JtX2FsbG9jLCBzdHJ1Y3QgZWlyX3VuaWZvcm1fZGF0YSwgMSk7Cisg
ICBBU1NFUlRfRVEoZGF0YS0+Y29udGVudCwgRUlSX1VOSUZPUk1fQ09OU1RBTlQpOworICAgQVNT
RVJUX0VRKGRhdGEtPmRhdGEsIDIpOworCisgICBkYXRhID0gdXRpbF9keW5hcnJheV9lbGVtZW50
KCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEsIDIpOworICAgQVNT
RVJUX0VRKGRhdGEtPmNvbnRlbnQsIEVJUl9VTklGT1JNX0NPTlNUQU5UKTsKKyAgIEFTU0VSVF9F
UShkYXRhLT5kYXRhLCAzKTsKKworICAgZGF0YSA9IHV0aWxfZHluYXJyYXlfZWxlbWVudCgmaXIt
PnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCAzKTsKKyAgIEFTU0VSVF9F
UShkYXRhLT5jb250ZW50LCBFSVJfVU5JRk9STV9DT05TVEFOVCk7CisgICBBU1NFUlRfRVEoZGF0
YS0+ZGF0YSwgNCk7CisKKyAgIGVpcl9kZXN0cm95KGlyKTsKK30KKworVEVTVCAoVW5pZm9ybVRl
c3QsIEVxdWFsVW5maW9ybXNWZWM0KQoreworICAgc3RhdGljIGNvbnN0IHVpbnQzMl90IHZhbHVl
c1s0XSA9IHsgMSwgMiwgMywgNCB9OworICAgc3RydWN0IGVpciAqaXIgPSBlaXJfY3JlYXRlKCk7
CisgICBzdHJ1Y3QgZWlyX3JlZ2lzdGVyIHUxLCB1MjsKKyAgIHN0cnVjdCBlaXJfdW5pZm9ybV9k
YXRhICpkYXRhOworCisgICB1MSA9IGVpcl91bmlmb3JtX3JlZ2lzdGVyX3ZlYzRfdWkoaXIsIDQs
IHZhbHVlcyk7CisgICB1MiA9IGVpcl91bmlmb3JtX3JlZ2lzdGVyX3ZlYzRfdWkoaXIsIDQsIHZh
bHVlcyk7CisKKyAgIEFTU0VSVF9FUSh1MS50eXBlLCBlaXJfcmVnaXN0ZXI6OkVJUl9SRUdfVU5J
Rk9STSk7CisgICBBU1NFUlRfRVEodTEuaW5kZXgsIDApOworICAgQVNTRVJUX0VRKHUxLnN3aXp6
bGUsIElOU1RfU1dJWl9JREVOVElUWSk7CisKKyAgIEFTU0VSVF9FUSh1Mi50eXBlLCBlaXJfcmVn
aXN0ZXI6OkVJUl9SRUdfVU5JRk9STSk7CisgICBBU1NFUlRfRVEodTIuaW5kZXgsIDApOworICAg
QVNTRVJUX0VRKHUyLnN3aXp6bGUsIElOU1RfU1dJWl9JREVOVElUWSk7CisKKworICAgZGF0YSA9
IHV0aWxfZHluYXJyYXlfZWxlbWVudCgmaXItPnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5p
Zm9ybV9kYXRhLCAwKTsKKyAgIEFTU0VSVF9FUShkYXRhLT5jb250ZW50LCBFSVJfVU5JRk9STV9D
T05TVEFOVCk7CisgICBBU1NFUlRfRVEoZGF0YS0+ZGF0YSwgMSk7CisKKyAgIGRhdGEgPSB1dGls
X2R5bmFycmF5X2VsZW1lbnQoJmlyLT51bmlmb3JtX2FsbG9jLCBzdHJ1Y3QgZWlyX3VuaWZvcm1f
ZGF0YSwgMSk7CisgICBBU1NFUlRfRVEoZGF0YS0+Y29udGVudCwgRUlSX1VOSUZPUk1fQ09OU1RB
TlQpOworICAgQVNTRVJUX0VRKGRhdGEtPmRhdGEsIDIpOworCisgICBkYXRhID0gdXRpbF9keW5h
cnJheV9lbGVtZW50KCZpci0+dW5pZm9ybV9hbGxvYywgc3RydWN0IGVpcl91bmlmb3JtX2RhdGEs
IDIpOworICAgQVNTRVJUX0VRKGRhdGEtPmNvbnRlbnQsIEVJUl9VTklGT1JNX0NPTlNUQU5UKTsK
KyAgIEFTU0VSVF9FUShkYXRhLT5kYXRhLCAzKTsKKworICAgZGF0YSA9IHV0aWxfZHluYXJyYXlf
ZWxlbWVudCgmaXItPnVuaWZvcm1fYWxsb2MsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCAzKTsK
KyAgIEFTU0VSVF9FUShkYXRhLT5jb250ZW50LCBFSVJfVU5JRk9STV9DT05TVEFOVCk7CisgICBB
U1NFUlRfRVEoZGF0YS0+ZGF0YSwgNCk7CisKKyAgIGVpcl9kZXN0cm95KGlyKTsKK30KKworVEVT
VCAoVW5pZm9ybVRlc3QsIG5jb21wMSkKK3sKKyAgIHN0cnVjdCBlaXIgKmlyID0gZWlyX2NyZWF0
ZSgpOworCisgICBzdGF0aWMgY29uc3QgZWlyX3VuaWZvcm1fY29udGVudHMgY29udGVudHNbNF0g
PSB7CisgICAgICBFSVJfVU5JRk9STV9DT05TVEFOVCwKKyAgICAgIEVJUl9VTklGT1JNX1VOVVNF
RCwKKyAgICAgIEVJUl9VTklGT1JNX0NPTlNUQU5ULAorICAgICAgRUlSX1VOSUZPUk1fQ09OU1RB
TlQsCisgICB9OworCisgICBzdGF0aWMgY29uc3QgdWludDMyX3QgdmFsdWVzWzRdID0geworICAg
ICAgMSwKKyAgICAgIDIsCisgICAgICAzLAorICAgICAgNCwKKyAgIH07CisKKyAgIGVpcl91bmlm
b3JtX3JlZ2lzdGVyX3ZlYzQoaXIsIDQsIGNvbnRlbnRzLCB2YWx1ZXMpOworCisgICBzdHJ1Y3Qg
ZWlyX3JlZ2lzdGVyIHUgPSBlaXJfdW5pZm9ybV9yZWdpc3Rlcl91aShpciwgMik7CisKKyAgIEFT
U0VSVF9FUSh1LnR5cGUsIGVpcl9yZWdpc3Rlcjo6RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VS
VF9FUSh1LmluZGV4LCAwKTsKKyAgIEFTU0VSVF9FUSh1LnN3aXp6bGUsIElOU1RfU1dJWl9CUk9B
RENBU1QoMSkpOworfQorCitURVNUIChVbmlmb3JtVGVzdCwgbmNvbXAyKQoreworICAgc3RydWN0
IGVpciAqaXIgPSBlaXJfY3JlYXRlKCk7CisKKyAgIHN0YXRpYyBjb25zdCBlaXJfdW5pZm9ybV9j
b250ZW50cyBjb250ZW50c1tdID0geworICAgICAgRUlSX1VOSUZPUk1fQ09OU1RBTlQsCisgICAg
ICBFSVJfVU5JRk9STV9VTlVTRUQsCisgICAgICBFSVJfVU5JRk9STV9VTlVTRUQsCisgICAgICBF
SVJfVU5JRk9STV9DT05TVEFOVCwKKyAgIH07CisKKyAgIHN0YXRpYyBjb25zdCB1aW50MzJfdCB2
YWx1ZXNbXSA9IHsKKyAgICAgIDEsCisgICAgICAyLAorICAgICAgMywKKyAgICAgIDQsCisgICB9
OworCisgICBlaXJfdW5pZm9ybV9yZWdpc3Rlcl92ZWM0KGlyLCA0LCBjb250ZW50cywgdmFsdWVz
KTsKKworCisgICBzdGF0aWMgY29uc3QgZWlyX3VuaWZvcm1fY29udGVudHMgY1tdID0geworICAg
ICAgRUlSX1VOSUZPUk1fQ09OU1RBTlQsCisgICAgICBFSVJfVU5JRk9STV9DT05TVEFOVCwKKyAg
IH07CisKKyAgIHN0YXRpYyBjb25zdCB1aW50MzJfdCB2W10gPSB7CisgICAgICAxMCwKKyAgICAg
IDEwLAorICAgfTsKKworICAgc3RydWN0IGVpcl9yZWdpc3RlciB1ID0gZWlyX3VuaWZvcm1fcmVn
aXN0ZXJfdmVjNChpciwgMiwgYywgdik7CisKKyAgIEFTU0VSVF9FUSh1LnR5cGUsIGVpcl9yZWdp
c3Rlcjo6RUlSX1JFR19VTklGT1JNKTsKKyAgIEFTU0VSVF9FUSh1LmluZGV4LCAwKTsKKyAgIEFT
U0VSVF9FUSh1LnN3aXp6bGUsIElOU1RfU1dJWl9CUk9BRENBU1QoMSkpOworfQpkaWZmIC0tZ2l0
IGEvc3JjL2V0bmF2aXYvY29tcGlsZXIvdGVzdHMvbWVzb24uYnVpbGQgYi9zcmMvZXRuYXZpdi9j
b21waWxlci90ZXN0cy9tZXNvbi5idWlsZApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAw
MDAwMDAwMC4uYzc1MDZmMDRlZDUKLS0tIC9kZXYvbnVsbAorKysgYi9zcmMvZXRuYXZpdi9jb21w
aWxlci90ZXN0cy9tZXNvbi5idWlsZApAQCAtMCwwICsxLDQ0IEBACisjIENvcHlyaWdodCAoYykg
MjAxOCBFdG5hdml2IFByb2plY3QKKyMgQ29weXJpZ2h0IChDKSAyMDE4IFpvZGlhYyBJbmZsaWdo
dCBJbm5vdmF0aW9ucworIworIyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9m
IGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYQorIyBjb3B5IG9mIHRoaXMgc29mdHdh
cmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLAor
IyB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcg
d2l0aG91dCBsaW1pdGF0aW9uCisjIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1l
cmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWIgbGljZW5zZSwKKyMgYW5kL29yIHNlbGwgY29w
aWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlCisj
IFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5n
IGNvbmRpdGlvbnM6CisjCisjIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBl
cm1pc3Npb24gbm90aWNlIChpbmNsdWRpbmcgdGhlCisjIG5leHQgcGFyYWdyYXBoKSBzaGFsbCBi
ZSBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zCisjIG9mIHRo
ZSBTb2Z0d2FyZS4KKyMKKyMgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhP
VVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKyMgSU1QTElFRCwgSU5DTFVESU5H
IEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCisj
IEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT04tSU5GUklOR0VNRU5ULiBJ
TiBOTyBFVkVOVCBTSEFMTAorIyBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBM
SUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgorIyBMSUFCSUxJVFksIFdIRVRI
RVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORwor
IyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUg
VVNFIE9SIE9USEVSCisjIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKwordGVzdCgKKyAgJ2Vp
cl9hc3NlbWJsZScsCisgIGV4ZWN1dGFibGUoCisgICAgJ2Vpcl9hc3NlbWJsZScsICdlaXJfYXNz
ZW1ibGUuY3BwJywKKyAgICBjcHBfYXJncyA6IFtjcHBfdmlzX2FyZ3MsIGNwcF9tc3ZjX2NvbXBh
dF9hcmdzXSwKKyAgICBsaW5rX3dpdGg6IFtsaWJldG5hdml2X2djLCBsaWJldG5hdml2X2NvbXBp
bGVyLCBsaWJtZXNhX3V0aWxdLAorICAgIGluY2x1ZGVfZGlyZWN0b3JpZXM6IFtpbmNfY29tbW9u
LCBpbmNfZXRuYXZpdl0sCisgICAgZGVwZW5kZW5jaWVzIDogW2RlcF9jbG9jaywgZGVwX3RocmVh
ZCwgaWRlcF9ndGVzdF0sCisgICkKKykKKwordGVzdCgKKyAgJ2Vpcl91bmlmb3JtJywKKyAgZXhl
Y3V0YWJsZSgKKyAgICAnZWlyX3VuaWZvcm0nLCAnZWlyX3VuaWZvcm0uY3BwJywKKyAgICBjcHBf
YXJncyA6IFtjcHBfdmlzX2FyZ3MsIGNwcF9tc3ZjX2NvbXBhdF9hcmdzXSwKKyAgICBsaW5rX3dp
dGg6IFtsaWJldG5hdml2X2djLCBsaWJldG5hdml2X2NvbXBpbGVyLCBsaWJtZXNhX3V0aWxdLAor
ICAgIGluY2x1ZGVfZGlyZWN0b3JpZXM6IFtpbmNfY29tbW9uLCBpbmNfZXRuYXZpdl0sCisgICAg
ZGVwZW5kZW5jaWVzIDogW2RlcF9jbG9jaywgZGVwX3RocmVhZCwgaWRlcF9ndGVzdF0sCisgICkK
KykKKwpkaWZmIC0tZ2l0IGEvc3JjL2V0bmF2aXYvbWVzb24uYnVpbGQgYi9zcmMvZXRuYXZpdi9t
ZXNvbi5idWlsZAppbmRleCBhNzA2ZmVhZmU4Ni4uZTJhNjQwOGQ3YzMgMTAwNjQ0Ci0tLSBhL3Ny
Yy9ldG5hdml2L21lc29uLmJ1aWxkCisrKyBiL3NyYy9ldG5hdml2L21lc29uLmJ1aWxkCkBAIC0y
MywzICsyMyw0IEBACiBpbmNfZXRuYXZpdiA9IGluY2x1ZGVfZGlyZWN0b3JpZXMoJy4nKQogCiBz
dWJkaXIoJ2djJykKK3N1YmRpcignY29tcGlsZXInKQotLSAKMi4yMS4wCgpfX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpldG5hdml2IG1haWxpbmcgbGlzdApl
dG5hdml2QGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL2V0bmF2aXY=
