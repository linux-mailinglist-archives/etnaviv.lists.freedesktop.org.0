Return-Path: <etnaviv-bounces@lists.freedesktop.org>
X-Original-To: lists+etnaviv@lfdr.de
Delivered-To: lists+etnaviv@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D0E966148D
	for <lists+etnaviv@lfdr.de>; Sun,  7 Jul 2019 11:22:47 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 89DD089C25;
	Sun,  7 Jul 2019 09:22:46 +0000 (UTC)
X-Original-To: etnaviv@lists.freedesktop.org
Delivered-To: etnaviv@lists.freedesktop.org
X-Greylist: delayed 326 seconds by postgrey-1.36 at gabe;
 Thu, 04 Jul 2019 03:34:05 UTC
Received: from forward106j.mail.yandex.net (forward106j.mail.yandex.net
 [IPv6:2a02:6b8:0:801:2::109])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 60C74899E7;
 Thu,  4 Jul 2019 03:34:05 +0000 (UTC)
Received: from mxback16o.mail.yandex.net (mxback16o.mail.yandex.net
 [IPv6:2a02:6b8:0:1a2d::67])
 by forward106j.mail.yandex.net (Yandex) with ESMTP id 5607911A1237;
 Thu,  4 Jul 2019 06:28:35 +0300 (MSK)
Received: from smtp3o.mail.yandex.net (smtp3o.mail.yandex.net
 [2a02:6b8:0:1a2d::27])
 by mxback16o.mail.yandex.net (nwsmtp/Yandex) with ESMTP id jXl7lJfVUd-SYkiEpBk;
 Thu, 04 Jul 2019 06:28:35 +0300
Received: by smtp3o.mail.yandex.net (nwsmtp/Yandex) with ESMTPSA id
 bbr5jyRpJa-SVGee0Tu; Thu, 04 Jul 2019 06:28:33 +0300
 (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits))
 (Client certificate not present)
To: etnaviv@lists.freedesktop.org
From: Jiaxun Yang <jiaxun.yang@flygoat.com>
Subject: All-black X windows on glamor with etnaviv
Message-ID: <8352901f-cba8-3695-3c98-c562fb71a864@flygoat.com>
Date: Thu, 4 Jul 2019 11:28:31 +0800
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.2
MIME-Version: 1.0
Content-Language: en-US
X-Mailman-Approved-At: Sun, 07 Jul 2019 09:22:45 +0000
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=flygoat.com; s=mail; t=1562210915; 
 bh=tctb6dVp4DJ4phztOGUsJ6ZGuv4B1AsQq3Yfbp0GN7g=;
 h=Subject:From:To:Cc:Date:Message-ID;
 b=mGiD249uRP+GUeg0El3rcEEAA6vUUmoXLqIMEwGf51AyRNiPDHnMsYsQh6dqHa584
 PdsIqa4DgIFRUAjr0lHsXVAWpACO6TjzIpp8H5eE8JyjRopDarriLNmtMXx/wt5vmg
 cRePQf1IhMisFtw9HTuuyC0dk5VayzlN8sOnqOZM=
X-Mailman-Original-Authentication-Results: mxback16o.mail.yandex.net;
 dkim=pass header.i=@flygoat.com
X-BeenThere: etnaviv@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <etnaviv.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/etnaviv>
List-Post: <mailto:etnaviv@lists.freedesktop.org>
List-Help: <mailto:etnaviv-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=subscribe>
Cc: mesa-dev@lists.freedesktop.org, fsf@mntmn.com, xorg-devel@lists.x.org,
 chenhc@lemote.com
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: etnaviv-bounces@lists.freedesktop.org
Sender: "etnaviv" <etnaviv-bounces@lists.freedesktop.org>

SGkgZm9sa3MsCgpXZSBoYWQgc29tZSByZXBvcnRzIHRoYXQgZ2xhbW9yIGlzIG5vdCB3b3JraW5n
IGNvcnJlY3RseSB3aXRoIGV0bmF2aXYgCm1lc2EgZHJpdmVyIGZvciBsb25nIHRpbWUuIFByZXZp
b3VzbHkgTHVrYXMgSGFydG1hbm4gd2FkIHByb3Bvc2VkIGEgCnBhdGNoIFsxXSByZXBsYWNpbmcg
bGluZWFyIHJlbmRlcmluZyBidWZmZXIgd2l0aCBhIHRpbGVkIGJ1ZmZlciBhbmQgaXQgCmRvIHdv
cmtzIGJ1dCBnaXZpbmcgc2NyYW1ibGVkIG91dHB1dC4gV2UganVzdCBkaWcgdGhlIGlzc3VlIGRl
ZXBlciBhbmQgCm1hbmFnZWQgdG8gbGV0IGl0IGdpdmUgb3V0IGEgbm9ybWFsIG91dHB1dC4KClNp
bmNlIFZpdmFudGUgaGFyZHdhcmUgZG9lc24ndCBhY3R1YWxseSBzdXBwb3J0IHRpbGVkIHN1cmZh
Y2UvdGV4dHVyZSwgCm9uY2UgdGhlIGRyaXZlciBhY2NwZXQgYSBpbXBvcnRlZCBidWZmZXIgb3Ig
Y2FsbGVkIHRvIGNyZWF0ZSBhIHJlc291cmNlLCAKaXQgd2lsbCBtYWtlIGEgc2hhZG93IHRpbGVk
IGJ1ZmZlciwgYW5kIGNvbnZlcnQgdGhlIGNvbnRlbnQgaW4gdGlsZWQgCmJ1ZmZlciB0byB0aGUg
Y29udGVudCBpdCBsaW5lYXIgYnVmZmVyIHdoZW7CoCBldG5hX2ZsdXNoX3Jlc291cmNlIGluIApt
ZXNhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2NsZWFyX2JsaXQuYyBpcyBj
YWxsZWQuIApIb3dldmVyLCBpdCB3YXMgbmV2ZXIgYmVlbiBjYWxsZWQgd2l0aCBnbGFtb3IuIEJ5
IGNvbnRyYXN0IG90aGVyIAphcHBsaWNhdGlvbnMgbGlrZSBrbXNjdWJlIG9yIHdlc3RvbiB1c2lu
ZyBFR0wgR0xFUyBoYXZlIGNvcnJlY3QgYmVoYXZpb3IuCgpPdXIgc29sdXRpb24gaXMganVzdCBm
bHVzaCB0aGUgYnVmZmVyIGV2ZXJ5dGltZSAsIGl0J3Mgbm90IGEgZWxlZ2FudCAKd2F5LCBidXQg
aXQgd29ya3MuIFNpbmNlIEdDMTAwMCBpcyBvbmx5IGdpdmluZyBPcGVuR0wgMS40IHJhdGhlciB0
aGFuIAoyLjEgYXMgbWluaW1hbCByZXF1aXJlbWVudCBvZiBnbGFtb3IuIFdlIGFsc28gaGF2ZSB0
byBmb3JjZSBnbGFtb3Igd29yayAKd2l0aCBHTEVTLgoKQW55IGlkZWEgaWYgd2UgY2FuIHNvbHZl
IHRoaXMgaXNzdWUgY29ycmVjdGx5PwoKU2VlIG91ciBwYXRjaGVzIGJlbG93OgoKZGlmZiAtLWdp
dCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2JsdC5jIApiL3NyYy9nYWxs
aXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2JsdC5jCmluZGV4IDQyZDFhNDQuLjM0Mjc1OGMg
MTAwNjQ0Ci0tLSBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2JsdC5jCisr
KyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2JsdC5jCkBAIC0yNDcsNiAr
MjQ3LDcgQEAgZXRuYV9ibGl0X2NsZWFyX2NvbG9yX2JsdChzdHJ1Y3QgcGlwZV9jb250ZXh0ICpw
Y3R4LCAKc3RydWN0IHBpcGVfc3VyZmFjZSAqZHN0LAogwqDCoMKgIHN1cmYtPmxldmVsLT5jbGVh
cl92YWx1ZSA9IG5ld19jbGVhcl92YWx1ZTsKIMKgwqDCoCByZXNvdXJjZV93cml0dGVuKGN0eCwg
c3VyZi0+YmFzZS50ZXh0dXJlKTsKIMKgwqDCoCBldG5hX3Jlc291cmNlKHN1cmYtPmJhc2UudGV4
dHVyZSktPnNlcW5vKys7CivCoMKgIHBjdHgtPmZsdXNoX3Jlc291cmNlKHBjdHgsIHN1cmYtPmJh
c2UudGV4dHVyZSk7CiDCoH0KCiDCoHN0YXRpYyB2b2lkCkBAIC0zMjMsNiArMzI0LDcgQEAgZXRu
YV9ibGl0X2NsZWFyX3pzX2JsdChzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4LCAKc3RydWN0IHBp
cGVfc3VyZmFjZSAqZHN0LAogwqDCoMKgIHN1cmYtPmxldmVsLT5jbGVhcl92YWx1ZSA9IG5ld19j
bGVhcl92YWx1ZTsKIMKgwqDCoCByZXNvdXJjZV93cml0dGVuKGN0eCwgc3VyZi0+YmFzZS50ZXh0
dXJlKTsKIMKgwqDCoCBldG5hX3Jlc291cmNlKHN1cmYtPmJhc2UudGV4dHVyZSktPnNlcW5vKys7
CivCoMKgIHBjdHgtPmZsdXNoX3Jlc291cmNlKHBjdHgsIHN1cmYtPmJhc2UudGV4dHVyZSk7CiDC
oH0KCiDCoHN0YXRpYyB2b2lkCkBAIC01MTksNiArNTIxLDcgQEAgZXRuYV90cnlfYmx0X2JsaXQo
c3RydWN0IHBpcGVfY29udGV4dCAqcGN0eCwKCiDCoMKgwqAgZHN0LT5zZXFubysrOwogwqDCoMKg
IGRzdF9sZXYtPnRzX3ZhbGlkID0gZmFsc2U7CivCoMKgIHBjdHgtPmZsdXNoX3Jlc291cmNlKHBj
dHgsIGJsaXRfaW5mby0+ZHN0LnJlc291cmNlKTsKCiDCoMKgwqAgcmV0dXJuIHRydWU7CiDCoH0K
ZGlmZiAtLWdpdCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2NsZWFyX2Js
aXQuYyAKYi9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9jbGVhcl9ibGl0LmMK
aW5kZXggNDVjMzBjYi4uYjM2YWZiZiAxMDA2NDQKLS0tIGEvc3JjL2dhbGxpdW0vZHJpdmVycy9l
dG5hdml2L2V0bmF2aXZfY2xlYXJfYmxpdC5jCisrKyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRu
YXZpdi9ldG5hdml2X2NsZWFyX2JsaXQuYwpAQCAtMjQsNiArMjQsNyBAQAogwqAgKsKgwqDCoCBX
bGFkaW1pciBKLiB2YW4gZGVyIExhYW4gPGxhYW53akBnbWFpbC5jb20+CiDCoCAqLwoKKyNpbmNs
dWRlIDxleGVjaW5mby5oPgogwqAjaW5jbHVkZSAiZXRuYXZpdl9jbGVhcl9ibGl0LmgiCgogwqAj
aW5jbHVkZSAiaHcvY29tbW9uLnhtbC5oIgpkaWZmIC0tZ2l0IGEvc3JjL2dhbGxpdW0vZHJpdmVy
cy9ldG5hdml2L2V0bmF2aXZfY29udGV4dC5jIApiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZp
di9ldG5hdml2X2NvbnRleHQuYwppbmRleCBiMGE1NmM2Li4xMzIzM2U3IDEwMDY0NAotLS0gYS9z
cmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9jb250ZXh0LmMKKysrIGIvc3JjL2dh
bGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfY29udGV4dC5jCkBAIC0yOTcsMTAgKzI5Nywx
NCBAQCBldG5hX2RyYXdfdmJvKHN0cnVjdCBwaXBlX2NvbnRleHQgKnBjdHgsIGNvbnN0IApzdHJ1
Y3QgcGlwZV9kcmF3X2luZm8gKmluZm8pCiDCoMKgwqAgaWYgKERCR19FTkFCTEVEKEVUTkFfREJH
X0ZMVVNIX0FMTCkpCiDCoMKgwqDCoMKgwqAgcGN0eC0+Zmx1c2gocGN0eCwgTlVMTCwgMCk7Cgot
wqDCoCBpZiAoY3R4LT5mcmFtZWJ1ZmZlcl9zLmNidWZzWzBdKQorwqDCoCBpZiAoY3R4LT5mcmFt
ZWJ1ZmZlcl9zLmNidWZzWzBdKSB7CmV0bmFfcmVzb3VyY2UoY3R4LT5mcmFtZWJ1ZmZlcl9zLmNi
dWZzWzBdLT50ZXh0dXJlKS0+c2Vxbm8rKzsKLcKgwqAgaWYgKGN0eC0+ZnJhbWVidWZmZXJfcy56
c2J1ZikKK8KgwqDCoMKgwqAgcGN0eC0+Zmx1c2hfcmVzb3VyY2UocGN0eCwgY3R4LT5mcmFtZWJ1
ZmZlcl9zLmNidWZzWzBdLT50ZXh0dXJlKTsKK8KgwqAgfQorwqDCoCBpZiAoY3R4LT5mcmFtZWJ1
ZmZlcl9zLnpzYnVmKSB7CmV0bmFfcmVzb3VyY2UoY3R4LT5mcmFtZWJ1ZmZlcl9zLnpzYnVmLT50
ZXh0dXJlKS0+c2Vxbm8rKzsKK8KgwqDCoMKgwqAgcGN0eC0+Zmx1c2hfcmVzb3VyY2UocGN0eCwg
Y3R4LT5mcmFtZWJ1ZmZlcl9zLnpzYnVmLT50ZXh0dXJlKTsKK8KgwqAgfQogwqDCoMKgIGlmIChp
bmZvLT5pbmRleF9zaXplICYmIGluZGV4YnVmICE9IGluZm8tPmluZGV4LnJlc291cmNlKQogwqDC
oMKgwqDCoMKgIHBpcGVfcmVzb3VyY2VfcmVmZXJlbmNlKCZpbmRleGJ1ZiwgTlVMTCk7CiDCoH0K
ZGlmZiAtLWdpdCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X3JzLmMgCmIv
c3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfcnMuYwppbmRleCA4Yzg1ZjMyLi41
ZmQ4MWUwIDEwMDY0NAotLS0gYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9y
cy5jCisrKyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X3JzLmMKQEAgLTMy
NSw2ICszMjUsNyBAQCBldG5hX2JsaXRfY2xlYXJfY29sb3JfcnMoc3RydWN0IHBpcGVfY29udGV4
dCAqcGN0eCwgCnN0cnVjdCBwaXBlX3N1cmZhY2UgKmRzdCwKIMKgwqDCoCBzdXJmLT5sZXZlbC0+
Y2xlYXJfdmFsdWUgPSBuZXdfY2xlYXJfdmFsdWU7CiDCoMKgwqAgcmVzb3VyY2Vfd3JpdHRlbihj
dHgsIHN1cmYtPmJhc2UudGV4dHVyZSk7CiDCoMKgwqAgZXRuYV9yZXNvdXJjZShzdXJmLT5iYXNl
LnRleHR1cmUpLT5zZXFubysrOworwqDCoCBwY3R4LT5mbHVzaF9yZXNvdXJjZShwY3R4LCBzdXJm
LT5iYXNlLnRleHR1cmUpOwogwqB9CgogwqBzdGF0aWMgdm9pZApAQCAtMzg4LDYgKzM4OSw3IEBA
IGV0bmFfYmxpdF9jbGVhcl96c19ycyhzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4LCAKc3RydWN0
IHBpcGVfc3VyZmFjZSAqZHN0LAogwqDCoMKgIHN1cmYtPmxldmVsLT5jbGVhcl92YWx1ZSA9IG5l
d19jbGVhcl92YWx1ZTsKIMKgwqDCoCByZXNvdXJjZV93cml0dGVuKGN0eCwgc3VyZi0+YmFzZS50
ZXh0dXJlKTsKIMKgwqDCoCBldG5hX3Jlc291cmNlKHN1cmYtPmJhc2UudGV4dHVyZSktPnNlcW5v
Kys7CivCoMKgIHBjdHgtPmZsdXNoX3Jlc291cmNlKHBjdHgsIHN1cmYtPmJhc2UudGV4dHVyZSk7
CiDCoH0KCiDCoHN0YXRpYyB2b2lkCkBAIC03NDUsNiArNzQ3LDcgQEAgZXRuYV90cnlfcnNfYmxp
dChzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4LAogwqDCoMKgIGRzdC0+c2Vxbm8rKzsKIMKgwqDC
oCBkc3QtPmxldmVsc1tibGl0X2luZm8tPmRzdC5sZXZlbF0udHNfdmFsaWQgPSBmYWxzZTsKIMKg
wqDCoCBjdHgtPmRpcnR5IHw9IEVUTkFfRElSVFlfREVSSVZFX1RTOworwqDCoCBwY3R4LT5mbHVz
aF9yZXNvdXJjZShwY3R4LCBibGl0X2luZm8tPmRzdC5yZXNvdXJjZSk7CgogwqDCoMKgIHJldHVy
biB0cnVlOwoKZGlmZiAtLWdpdCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2
X3RyYW5zZmVyLmMgCmIvc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfdHJhbnNm
ZXIuYwppbmRleCBkODc1ODAzLi45ZWMzNDYzIDEwMDY0NAotLS0gYS9zcmMvZ2FsbGl1bS9kcml2
ZXJzL2V0bmF2aXYvZXRuYXZpdl90cmFuc2Zlci5jCisrKyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMv
ZXRuYXZpdi9ldG5hdml2X3RyYW5zZmVyLmMKQEAgLTE1OCw2ICsxNTgsNyBAQCBldG5hX3RyYW5z
ZmVyX3VubWFwKHN0cnVjdCBwaXBlX2NvbnRleHQgKnBjdHgsIApzdHJ1Y3QgcGlwZV90cmFuc2Zl
ciAqcHRyYW5zKQogwqDCoMKgwqDCoMKgIGlmIChyc2MtPmJhc2UuYmluZCAmIFBJUEVfQklORF9T
QU1QTEVSX1ZJRVcpIHsKIMKgwqDCoMKgwqDCoMKgwqDCoCBjdHgtPmRpcnR5IHw9IEVUTkFfRElS
VFlfVEVYVFVSRV9DQUNIRVM7CiDCoMKgwqDCoMKgwqAgfQorwqDCoMKgwqDCoCBwY3R4LT5mbHVz
aF9yZXNvdXJjZShwY3R4LCBwdHJhbnMtPnJlc291cmNlKTsKIMKgwqDCoCB9CgogwqDCoMKgIC8q
IFdlIG5lZWQgdG8gaGF2ZSB0aGUgcGF0Y2hlZCBkYXRhIHJlYWR5IGZvciB0aGUgR1BVLiAqLwoK
ClRoYW5rcwoKWzFdaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoLzIwNzgz
Mi8KCi0tCgpKaWF4dW4gWWFuZwoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KZXRuYXZpdiBtYWlsaW5nIGxpc3QKZXRuYXZpdkBsaXN0cy5mcmVlZGVza3Rv
cC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9ldG5h
dml2
