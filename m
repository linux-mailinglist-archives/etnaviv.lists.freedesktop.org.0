Return-Path: <etnaviv-bounces@lists.freedesktop.org>
X-Original-To: lists+etnaviv@lfdr.de
Delivered-To: lists+etnaviv@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id BCB9A19A43
	for <lists+etnaviv@lfdr.de>; Fri, 10 May 2019 11:09:32 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D665D89A5D;
	Fri, 10 May 2019 09:09:27 +0000 (UTC)
X-Original-To: etnaviv@lists.freedesktop.org
Delivered-To: etnaviv@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C3275899DB;
 Fri, 10 May 2019 09:09:25 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id w8so4451039wrl.6;
 Fri, 10 May 2019 02:09:25 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=7I7HgYrNJYH5asKDymM5d0IkPSk50obo3ANiIbSOWJc=;
 b=eZ4cza12XJqaHwr7bHLStaRaGWR7nOR/H9hyYN4V+GugGIWHlSQnDkVfvcLpEED0DI
 1BMhLtDktkSHcOA5f4hUDmBhIyUU+dnsU8avB/6kuRaIVY4BMIZHq0WquQzUn2Dl6Kwy
 f63OXJd09aXBZyhSc72IIchMAwfliL+8b6WP2q32D8Ew9HRoDmW3ABqomXO5OtvIoSKO
 hRNiPxjuB50aRPuaMd3gqqk+JcF92+GRKZpWXidLuZ2JVKRqtpeFUxVH3q8zQA1oslCs
 eZ8FCM0aq61QXcHiBW2JfaCxRjwnYDBxJtPUobqnhsNN/BRwpZOrAODpY88TL5098xMp
 dwXQ==
X-Gm-Message-State: APjAAAXbVNiSD1eupHvyorubJUQ/GAiUw8XySzwrqOecNJHC9VsulalN
 01Ri//xer9c0fbHzFBqUHDkGxNe4U54=
X-Google-Smtp-Source: APXvYqykraKzdosvyWPSZDtv0XFGOdydPyxh6NKVkEkdFPgsUw6Ynmq853ZwK6+SozkDQb0p4uVT1w==
X-Received: by 2002:adf:e8c4:: with SMTP id k4mr7147987wrn.9.1557479363985;
 Fri, 10 May 2019 02:09:23 -0700 (PDT)
Received: from localhost.localdomain (80-110-110-254.cgn.dynamic.surfer.at.
 [80.110.110.254])
 by smtp.gmail.com with ESMTPSA id l18sm1645344wrv.38.2019.05.10.02.09.22
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Fri, 10 May 2019 02:09:23 -0700 (PDT)
From: Christian Gmeiner <christian.gmeiner@gmail.com>
To: mesa-dev@lists.freedesktop.org
Subject: [RFC PATCH 05/17] eir: implement actual register allocator
Date: Fri, 10 May 2019 11:09:03 +0200
Message-Id: <20190510090915.2739-6-christian.gmeiner@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190510090915.2739-1-christian.gmeiner@gmail.com>
References: <20190510090915.2739-1-christian.gmeiner@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=7I7HgYrNJYH5asKDymM5d0IkPSk50obo3ANiIbSOWJc=;
 b=UJNGKPSMO8VYHzFnSiFuHjiQ4p+ZVdIMwbH5ilHYKGHrQOCuZCA2uu3Zoujs8wKCIq
 6q/htGqpTTjFTP7BcNZisyhXvgITkj7X6iCPthZ2AI5DWN+bC3PonGtpaUCLRHskttmQ
 XDNLR9KVMzKJwBcdTkzN6Tu2ufmPNIUAXW4mUxIfvQxInonkGZuTrYphlNMUIrMlEB0C
 xE7Rw4rHu2Gpa/EP2HjDuki1THxtfDJTcSH9ngzGmPz38PzqQTYYpcLqno9xBL7rD7Gp
 bVSl75+9wzgUATyZWHTwyhzOuhiuVXSeHkZtfKs1tjrFArOyyBC6VhEhwEa5bYzDABql
 uYOQ==
X-BeenThere: etnaviv@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <etnaviv.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/etnaviv>
List-Post: <mailto:etnaviv@lists.freedesktop.org>
List-Help: <mailto:etnaviv-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=subscribe>
Cc: Christian Gmeiner <christian.gmeiner@gmail.com>,
 etnaviv@lists.freedesktop.org, cphealy@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: etnaviv-bounces@lists.freedesktop.org
Sender: "etnaviv" <etnaviv-bounces@lists.freedesktop.org>

U29tZSB1bml0IHRlc3RzIHdvdWxkIGJlIGdyZWF0LgoKU2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFu
IEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVyQGdtYWlsLmNvbT4KLS0tCiBzcmMvZXRuYXZpdi9j
b21waWxlci9laXIuaCAgICAgICAgICAgICAgICAgICB8ICAxMCArLQogc3JjL2V0bmF2aXYvY29t
cGlsZXIvZWlyX3JlZ2lzdGVyX2FsbG9jYXRlLmMgfCAxNzYgKysrKysrKysrKysrKysrKysrLQog
MiBmaWxlcyBjaGFuZ2VkLCAxODQgaW5zZXJ0aW9ucygrKSwgMiBkZWxldGlvbnMoLSkKCmRpZmYg
LS1naXQgYS9zcmMvZXRuYXZpdi9jb21waWxlci9laXIuaCBiL3NyYy9ldG5hdml2L2NvbXBpbGVy
L2Vpci5oCmluZGV4IGYyNjUyODYzZGU2Li5iYmRlMTBjZGUwOCAxMDA2NDQKLS0tIGEvc3JjL2V0
bmF2aXYvY29tcGlsZXIvZWlyLmgKKysrIGIvc3JjL2V0bmF2aXYvY29tcGlsZXIvZWlyLmgKQEAg
LTI5LDYgKzI5LDcgQEAKICNkZWZpbmUgSF9FSVIKIAogI2luY2x1ZGUgPGFzc2VydC5oPgorI2lu
Y2x1ZGUgImNvbXBpbGVyL3NoYWRlcl9lbnVtcy5oIgogI2luY2x1ZGUgInV0aWwvbGlzdC5oIgog
I2luY2x1ZGUgInV0aWwvdV9keW5hcnJheS5oIgogI2luY2x1ZGUgInV0aWwvdV9tYXRoLmgiCkBA
IC00MCw2ICs0MSw3IEBAIGV4dGVybiAiQyJ7CiAKIHN0cnVjdCBlaXI7CiBzdHJ1Y3QgZWlyX2Js
b2NrOworc3RydWN0IGVpcl9jb21waWxlcjsKIHN0cnVjdCBlaXJfcmFfcmVnX3NldDsKIAogc3Ry
dWN0IGVpcl9yZWdpc3RlcgpAQCAtMTQ5LDEwICsxNTEsMTMgQEAgc3RydWN0IGVpcgogICAgICog
YW5kIHRoZSB1c2VkIGNvbXBvbmVudHMgcGVyIHJlZ2lzdGVyICovCiAgICBzdHJ1Y3QgdXRpbF9k
eW5hcnJheSByZWdfYWxsb2M7CiAKLSAgIC8qIGtlZXAgdHJhY2sgb2YgbnVtYmVyIG9mIGFsbG9j
YXRlZCB1bmlmb3JtcyAqLworICAgLyoga2VlcCB0cmFjayBvZiBudW1iZXIgb2YgYWxsb2NhdGVk
IHVuaWZvcm1zIC0gcHJlIFJBICovCiAgICBzdHJ1Y3QgdXRpbF9keW5hcnJheSB1bmlmb3JtX2Fs
bG9jOwogICAgdW5zaWduZWQgdW5pZm9ybV9vZmZzZXQ7CiAKKyAgIC8qIHRvdGFsIHVzZWQgdGVt
cCByZWdpc3RlciAtIHBvc3QgUkEgKi8KKyAgIHVuc2lnbmVkIG51bV90ZW1wczsKKwogICAgLyog
TGl2ZSByYW5nZXMgb2YgdGVtcCByZWdpc3RlcnMgKi8KICAgIGludCAqdGVtcF9zdGFydCwgKnRl
bXBfZW5kOwogfTsKQEAgLTMwMSw2ICszMDYsOSBAQCBlaXJfdGVtcF9yYW5nZV9lbmQoY29uc3Qg
c3RydWN0IGVpciogaXIsIHVuc2lnbmVkIG4pOwogc3RydWN0IGVpcl9yYV9yZWdfc2V0ICoKIGVp
cl9yYV9hbGxvY19yZWdfc2V0KHZvaWQgKm1lbWN0eCk7CiAKK2Jvb2wKK2Vpcl9yZWdpc3Rlcl9h
bGxvY2F0ZShzdHJ1Y3QgZWlyICppciwgZ2xfc2hhZGVyX3N0YWdlIHR5cGUsIHN0cnVjdCBlaXJf
Y29tcGlsZXIgKmNvbXBpbGVyKTsKKwogdWludDMyX3QgKgogZWlyX2Fzc2VtYmxlKGNvbnN0IHN0
cnVjdCBlaXIgKmlyLCBzdHJ1Y3QgZWlyX2luZm8gKmluZm8pOwogCmRpZmYgLS1naXQgYS9zcmMv
ZXRuYXZpdi9jb21waWxlci9laXJfcmVnaXN0ZXJfYWxsb2NhdGUuYyBiL3NyYy9ldG5hdml2L2Nv
bXBpbGVyL2Vpcl9yZWdpc3Rlcl9hbGxvY2F0ZS5jCmluZGV4IDMzMmQ2ODZhZGQ5Li5lMDJmYzM3
YTVlZiAxMDA2NDQKLS0tIGEvc3JjL2V0bmF2aXYvY29tcGlsZXIvZWlyX3JlZ2lzdGVyX2FsbG9j
YXRlLmMKKysrIGIvc3JjL2V0bmF2aXYvY29tcGlsZXIvZWlyX3JlZ2lzdGVyX2FsbG9jYXRlLmMK
QEAgLTE2NCw3ICsxNjQsNyBAQCBlaXJfcmFfYWxsb2NfcmVnX3NldCh2b2lkICptZW1jdHgpCiAg
ICAgICB9CiAgICB9CiAKLQl1bnNpZ25lZCBpbnQgKipxX3ZhbHVlcyA9IHJhbGxvY19hcnJheShz
ZXQsIHVuc2lnbmVkICosIEVJUl9OVU1fUkVHX0NMQVNTRVMpOworICAgdW5zaWduZWQgaW50ICoq
cV92YWx1ZXMgPSByYWxsb2NfYXJyYXkoc2V0LCB1bnNpZ25lZCAqLCBFSVJfTlVNX1JFR19DTEFT
U0VTKTsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgRUlSX05VTV9SRUdfQ0xBU1NFUzsgaSsrKSB7
CiAgICAgICBxX3ZhbHVlc1tpXSA9IHJ6YWxsb2NfYXJyYXkocV92YWx1ZXMsIHVuc2lnbmVkLCBF
SVJfTlVNX1JFR19DTEFTU0VTKTsKICAgICAgIGZvciAoaW50IGogPSAwOyBqIDwgRUlSX05VTV9S
RUdfQ0xBU1NFUzsgaisrKQpAQCAtMTc3LDMgKzE3NywxNzcgQEAgZWlyX3JhX2FsbG9jX3JlZ19z
ZXQodm9pZCAqbWVtY3R4KQogCiAgICByZXR1cm4gc2V0OwogfQorCitzdGF0aWMgYm9vbAoraW50
ZXJmZXJlcyhjb25zdCBzdHJ1Y3QgZWlyICppciwgaW50IGEsIGludCBiKQoreworICAgcmV0dXJu
ICEoKGVpcl90ZW1wX3JhbmdlX2VuZChpciwgYSkgPD0gZWlyX3RlbXBfcmFuZ2Vfc3RhcnQoaXIs
IGIpKSB8fAorICAgICAgICAgICAgKGVpcl90ZW1wX3JhbmdlX2VuZChpciwgYikgPD0gZWlyX3Rl
bXBfcmFuZ2Vfc3RhcnQoaXIsIGEpKSk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZAorcmVzd2l6
emxlKHN0cnVjdCBlaXJfcmVnaXN0ZXIgKnJlZywgaW50IHZpcnRfcmVnKQoreworICAgc3RhdGlj
IGNvbnN0IHVuc2lnbmVkIHN3aXp6bGVbRUlSX05VTV9SRUdfVFlQRVNdID0geworICAgICAgSU5T
VF9TV0laKDAsIDEsIDIsIDMpLCAvKiBYWVpXICovCisgICAgICBJTlNUX1NXSVooMCwgMSwgMiwg
MiksIC8qIFhZWiAqLworICAgICAgSU5TVF9TV0laKDAsIDEsIDMsIDMpLCAvKiBYWVcgKi8KKyAg
ICAgIElOU1RfU1dJWigwLCAyLCAzLCAzKSwgLyogWFpXICovCisgICAgICBJTlNUX1NXSVooMSwg
MiwgMywgMyksIC8qIFlaVyAqLworICAgICAgSU5TVF9TV0laKDAsIDEsIDEsIDEpLCAvKiBYWSAq
LworICAgICAgSU5TVF9TV0laKDAsIDIsIDIsIDIpLCAvKiBYWiAqLworICAgICAgSU5TVF9TV0la
KDAsIDMsIDMsIDMpLCAvKiBYVyAqLworICAgICAgSU5TVF9TV0laKDEsIDIsIDIsIDIpLCAvKiBZ
WiAqLworICAgICAgSU5TVF9TV0laKDEsIDMsIDMsIDMpLCAvKiBZVyAqLworICAgICAgSU5TVF9T
V0laKDIsIDMsIDMsIDMpLCAvKiBaVyAqLworICAgICAgSU5TVF9TV0laKDAsIDAsIDAsIDApLCAv
KiBYICovCisgICAgICBJTlNUX1NXSVooMSwgMSwgMSAsMSksIC8qIFkgKi8KKyAgICAgIElOU1Rf
U1dJWigyLCAyLCAyLCAyKSwgLyogWiAqLworICAgICAgSU5TVF9TV0laKDMsIDMsIDMsIDMpLCAv
KiBXICovCisgICB9OworCisgICBjb25zdCBpbnQgdHlwZSA9IGVpcl9yZWdfZ2V0X3R5cGUodmly
dF9yZWcpOworICAgcmVnLT5zd2l6emxlID0gc3dpenpsZVt0eXBlXTsKK30KKworc3RhdGljIHVu
c2lnbmVkIGlubGluZQorcmVzdWx0KHN0cnVjdCByYV9ncmFwaCAqZywgdW5zaWduZWQgcmVnKQor
eworICAgY29uc3QgaW50IHZpcnRfcmVnID0gcmFfZ2V0X25vZGVfcmVnKGcsIHJlZyk7CisKKyAg
IHJldHVybiBldG5hX3JlZ19nZXRfYmFzZSh2aXJ0X3JlZyk7Cit9CisKK3N0YXRpYyB2b2lkCith
c3NpZ24oc3RydWN0IGVpcl9yZWdpc3RlciAqcmVnLCBzdHJ1Y3QgcmFfZ3JhcGggKmcsIHVuc2ln
bmVkICpudW1fdGVtcHMpCit7CisgICBpZiAocmVnLT50eXBlICE9IEVJUl9SRUdfVEVNUCkKKyAg
ICAgIHJldHVybjsKKworICAgY29uc3QgaW50IHZpcnRfcmVnID0gcmFfZ2V0X25vZGVfcmVnKGcs
IHJlZy0+aW5kZXgpOworCisgICAvKgorICAgICogY29udmVydCB2aXJ0dWFsIHJlZ2lzdGVyIGJh
Y2sgdG8gaHcgcmVnaXN0ZXIKKyAgICAqIGFuZCBjaGFuZ2Ugc3dpenpsZSBpZiBuZWVkZWQKKyAg
ICAqLworICAgcmVnLT5pbmRleCA9IGV0bmFfcmVnX2dldF9iYXNlKHZpcnRfcmVnKTsKKworICAg
aWYgKGVpcl9yZWdfZ2V0X3R5cGUodmlydF9yZWcpICE9IEVJUl9SRUdfQ0xBU1NfVkVDNCkKKyAg
ICAgIHJlc3dpenpsZShyZWcsIHZpcnRfcmVnKTsKKworICAgKm51bV90ZW1wcyA9IE1BWDIoKm51
bV90ZW1wcywgcmVnLT5pbmRleCArIDEpOworfQorCitib29sCitlaXJfcmVnaXN0ZXJfYWxsb2Nh
dGUoc3RydWN0IGVpciAqaXIsIGdsX3NoYWRlcl9zdGFnZSB0eXBlLCBzdHJ1Y3QgZWlyX2NvbXBp
bGVyICpjb21waWxlcikKK3sKKyAgIGludCBudW0gPSB1dGlsX2R5bmFycmF5X251bV9lbGVtZW50
cygmaXItPnJlZ19hbGxvYywgdW5zaWduZWQpOworCisgICBpZiAobnVtID09IDApCisgICAgICBy
ZXR1cm4gdHJ1ZTsKKworICAgaW50IGZyYWdfdmFyeWluZ19wb3MgPSAtMTsKKworICAgaWYgKHR5
cGUgPT0gTUVTQV9TSEFERVJfRlJBR01FTlQpIHsKKyAgICAgIGZvciAodW5zaWduZWQgaSA9IDA7
IGkgPCBpci0+bnVtX2lucHV0czsgaSsrKSB7CisgICAgICAgICBpZiAoaXItPmlucHV0c1tpXS5z
bG90ID09IFZBUllJTkdfU0xPVF9QT1MpIHsKKyAgICAgICAgICAgIGZyYWdfdmFyeWluZ19wb3Mg
PSBpOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgICB9CisgICAgICB9CisKKyAgICAgIC8q
IGFsbG9jYXRlIG9uZSBleHRyYSByZWdpc3RlciBmb3IgaGFyZHdpcmVkIHQwIHJlZ2lzdGVyICov
CisgICAgICBpZiAoZnJhZ192YXJ5aW5nX3BvcyA9PSAtMSkgeworICAgICAgICAgbnVtKys7Cisg
ICAgICAgICBmcmFnX3ZhcnlpbmdfcG9zID0gbnVtIC0gMTsKKyAgICAgIH0KKyAgIH0KKworICAg
c3RydWN0IHJhX2dyYXBoICpnID0gcmFfYWxsb2NfaW50ZXJmZXJlbmNlX2dyYXBoKGNvbXBpbGVy
LT5zZXQtPnJlZ3MsIG51bSk7CisgICB1bnNpZ25lZCBudW1fdGVtcHMgPSAwOworCisgICBhc3Nl
cnQoZyk7CisgICBhc3NlcnQoaXItPnRlbXBfc3RhcnQpOworICAgYXNzZXJ0KGlyLT50ZW1wX2Vu
ZCk7CisKKyAgIHVuc2lnbmVkIGkgPSAwOworICAgdXRpbF9keW5hcnJheV9mb3JlYWNoKCZpci0+
cmVnX2FsbG9jLCB1bnNpZ25lZCwgbnVtX2NvbXBvbmVudHMpIHsKKyAgICAgIHN3aXRjaCAoKm51
bV9jb21wb25lbnRzKSB7CisgICAgICBjYXNlIDE6CisgICAgICAgICByYV9zZXRfbm9kZV9jbGFz
cyhnLCBpLCBjb21waWxlci0+c2V0LT5jbGFzc1tFSVJfUkVHX0NMQVNTX1ZJUlRfU0NBTEFSXSk7
CisgICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgMjoKKyAgICAgICAgIHJhX3NldF9ub2RlX2Ns
YXNzKGcsIGksIGNvbXBpbGVyLT5zZXQtPmNsYXNzW0VJUl9SRUdfQ0xBU1NfVklSVF9WRUMyXSk7
CisgICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgMzoKKyAgICAgICAgIHJhX3NldF9ub2RlX2Ns
YXNzKGcsIGksIGNvbXBpbGVyLT5zZXQtPmNsYXNzW0VJUl9SRUdfQ0xBU1NfVklSVF9WRUMzXSk7
CisgICAgICAgICBicmVhazsKKyAgICAgIGNhc2UgNDoKKyAgICAgICAgIHJhX3NldF9ub2RlX2Ns
YXNzKGcsIGksIGNvbXBpbGVyLT5zZXQtPmNsYXNzW0VJUl9SRUdfQ0xBU1NfVkVDNF0pOworICAg
ICAgICAgYnJlYWs7CisgICAgICBkZWZhdWx0OgorICAgICAgICAgdW5yZWFjaGFibGUoIm5vdCBz
dXBwb3J0ZWQgbnVtX2NvbXBvbmVudHMiKTsKKyAgICAgICAgIGJyZWFrOworICAgICAgfQorCisg
ICAgICBpKys7CisgICB9CisKKyAgIC8qIFRPRE86IGhhbmRsZSBzY2FsYXIgb3Bjb2RlcyAqLwor
I2lmIDAKKyAgIGVpcl9mb3JfZWFjaF9ibG9jayhibG9jaywgaXIpIHsKKyAgICAgIGVpcl9mb3Jf
ZWFjaF9pbnN0KGluc3QsIGJsb2NrKSB7CisgICAgICAgICBpZiAoZ2Nfb3BfaXNfc2NhbGFyKGlu
c3QtPmdjLm9wY29kZSkpIHsKKyAgICAgICAgICAgIHJhX3NldF9ub2RlX3JlZyhnLCApCisgICAg
ICAgICB9CisgICAgICB9CisgICB9CisjZW5kaWYKKworICAgZm9yICh1bnNpZ25lZCBpID0gMDsg
aSA8IG51bTsgaSsrKQorICAgICAgZm9yICh1bnNpZ25lZCBqID0gMDsgaiA8IGk7IGorKykKKwkg
ICAgICBpZiAoaW50ZXJmZXJlcyhpciwgaSwgaikpCisJICAgICAgICAgcmFfYWRkX25vZGVfaW50
ZXJmZXJlbmNlKGcsIGksIGopOworCisgICBpZiAodHlwZSA9PSBNRVNBX1NIQURFUl9GUkFHTUVO
VCkgeworICAgICAgZm9yICh1bnNpZ25lZCBpID0gMDsgaSA8IG51bTsgaSsrKSB7CisgICAgICAg
ICBmb3IgKGludCBqID0gMDsgaiA8IGk7IGorKykgeworICAgICAgICAgICAgcmFfYWRkX25vZGVf
aW50ZXJmZXJlbmNlKGcsIGksIGopOworICAgICAgICAgfQorICAgICAgfQorCisgICAgICAvKiBo
YXJkIGNvZGUgZnJhZ19jb2xvcl9vdXRfaWR4IHRvIHJlZ2lzdGVyIHQwICovCisgICAgICByYV9z
ZXRfbm9kZV9yZWcoZywgZnJhZ192YXJ5aW5nX3BvcywgMCk7CisgICB9CisKKyAgIGJvb2wgc3Vj
Y2VzcyA9IHJhX2FsbG9jYXRlKGcpOworICAgaWYgKCFzdWNjZXNzKQorICAgICAgZ290byBvdXQ7
CisKKyAgIGVpcl9mb3JfZWFjaF9ibG9jayhibG9jaywgaXIpIHsKKyAgICAgIGVpcl9mb3JfZWFj
aF9pbnN0KGluc3QsIGJsb2NrKSB7CisgICAgICAgICBhc3NpZ24oJmluc3QtPmRzdCwgZywgJm51
bV90ZW1wcyk7CisgICAgICAgICBhc3NpZ24oJmluc3QtPnNyY1swXSwgZywgJm51bV90ZW1wcyk7
CisgICAgICAgICBhc3NpZ24oJmluc3QtPnNyY1sxXSwgZywgJm51bV90ZW1wcyk7CisgICAgICAg
ICBhc3NpZ24oJmluc3QtPnNyY1syXSwgZywgJm51bV90ZW1wcyk7CisgICAgICB9CisgICB9CisK
KyAgIC8qIHVwZGF0ZSBvdXRwdXRzIGFycmF5ICovCisgICBmb3IgKHVuc2lnbmVkIGkgPSAwOyBp
IDwgaXItPm51bV9vdXRwdXRzOyBpKyspCisgICAgICBpci0+b3V0cHV0c1tpXS5yZWcgPSByZXN1
bHQoZywgaSk7CisKKyAgIGlyLT5udW1fdGVtcHMgPSBudW1fdGVtcHM7CisKKyAgIC8qIGZyZWUg
bGl2ZSByYW5nZXMgaW5mb3JtYXRpb24gYXMgdGhleSBhcmUgbm90IG5lZWRlZCBhbnltb3JlICov
CisgICByYWxsb2NfZnJlZShpci0+dGVtcF9zdGFydCk7CisgICByYWxsb2NfZnJlZShpci0+dGVt
cF9lbmQpOworCisgICBpci0+dGVtcF9zdGFydCA9IE5VTEw7CisgICBpci0+dGVtcF9lbmQgPSBO
VUxMOworCitvdXQ6CisgICByYWxsb2NfZnJlZShnKTsKKworICAgcmV0dXJuIHN1Y2Nlc3M7Cit9
Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fCmV0bmF2aXYgbWFpbGluZyBsaXN0CmV0bmF2aXZAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vZXRuYXZpdg==
