Return-Path: <etnaviv-bounces@lists.freedesktop.org>
X-Original-To: lists+etnaviv@lfdr.de
Delivered-To: lists+etnaviv@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 1465619A47
	for <lists+etnaviv@lfdr.de>; Fri, 10 May 2019 11:09:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7A57089BB2;
	Fri, 10 May 2019 09:09:35 +0000 (UTC)
X-Original-To: etnaviv@lists.freedesktop.org
Delivered-To: etnaviv@lists.freedesktop.org
Received: from mail-wm1-x342.google.com (mail-wm1-x342.google.com
 [IPv6:2a00:1450:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6B6A689B65;
 Fri, 10 May 2019 09:09:32 +0000 (UTC)
Received: by mail-wm1-x342.google.com with SMTP id j187so6612728wmj.1;
 Fri, 10 May 2019 02:09:32 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=a+2XRSiRVHqr5/7Qr8QNPE7p3xbfHWldeML4PQ6Uke4=;
 b=YzFDwMPNe2D+TMZ0XMS1sJs9/7hQGiQ8nvT3+pXkR6pw1mJSXcRV2H9mVOkWhJqv7C
 NWR7/IYD1T64v0/lS6C2npfTQGRyMzoe1BPFATKMFcuGpIjzyZuL79jfLeAr/l/ocM9f
 ncHftyrKcH+Zg6KZDKc+9+NEJ64bOanYgcDLzUyq3/rM2tCOt6iAkjtmd4BdBiPC7bXA
 XTGDRS45UbJyOYa3Xrehh/JOzDeilIaLdKs3vOOO+hPh4E5AI3zL/UC3TyztpsN41J+7
 q4AFxKBCN0Gv+EpgOimk+JZ5/XVbNQQuNjA1KmM9CsIex/PqsNwpjXj4XAvKWuppkJcN
 bHRQ==
X-Gm-Message-State: APjAAAX/D4ijdFRL24UWqcY4iG2w3I5iwMAuEybDieNSse25O4d04Zii
 WJrB6tgE1LhmpaVm5IDyWwWQNffPJXY=
X-Google-Smtp-Source: APXvYqxBrzqHO319rnLd3TQhZdcrPcCfsLOLu5V9PxxTMIE+drV6FsuqTyZkU6MkG8mzi/ALP7J1RA==
X-Received: by 2002:a1c:1903:: with SMTP id 3mr6099068wmz.103.1557479370263;
 Fri, 10 May 2019 02:09:30 -0700 (PDT)
Received: from localhost.localdomain (80-110-110-254.cgn.dynamic.surfer.at.
 [80.110.110.254])
 by smtp.gmail.com with ESMTPSA id l18sm1645344wrv.38.2019.05.10.02.09.28
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Fri, 10 May 2019 02:09:29 -0700 (PDT)
From: Christian Gmeiner <christian.gmeiner@gmail.com>
To: mesa-dev@lists.freedesktop.org
Subject: [RFC PATCH 10/17] etnaviv: hook-up eir into gallium driver
Date: Fri, 10 May 2019 11:09:08 +0200
Message-Id: <20190510090915.2739-11-christian.gmeiner@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190510090915.2739-1-christian.gmeiner@gmail.com>
References: <20190510090915.2739-1-christian.gmeiner@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=a+2XRSiRVHqr5/7Qr8QNPE7p3xbfHWldeML4PQ6Uke4=;
 b=Ck6q4LRQd13h480ijyJabJlh8LDpp7oP61EMeG0tCzElM8PM/pKBjfH2G/2he8N4xT
 P/R5FaUWkOmm7RchWq9Uwvosa8prAM8pfHrpYIqptwhGCUf4t/LFSXCk7ZQZTF+VT1XA
 +ncYpYwGO4yltbFdcqEYORumvVijoXhZ3fVMoPun9xBg/ISJa8hQpGTA2cs7C9I3zZXW
 4kIZpzpu3TLsMhZXJ/VzTbDMIbkwAJoaUCSPt6nrGODTA/2ASgxHPdpcTPKYp6WS8mBe
 KGFtFv6FFQpt1f3XJn2gZFDGskhHZXlJ7HpPM1LNBTUO9jEk/F/Lor6vF0YIA0CrZbXX
 m3nw==
X-BeenThere: etnaviv@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <etnaviv.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/etnaviv>
List-Post: <mailto:etnaviv@lists.freedesktop.org>
List-Help: <mailto:etnaviv-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=subscribe>
Cc: Christian Gmeiner <christian.gmeiner@gmail.com>,
 etnaviv@lists.freedesktop.org, cphealy@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: etnaviv-bounces@lists.freedesktop.org
Sender: "etnaviv" <etnaviv-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVyQGdtYWls
LmNvbT4KLS0tCiBzcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvTWFrZWZpbGUuc291cmNlcyB8
ICAgMiArCiBzcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9laXIuYyAgICB8IDQ1
NCArKysrKysrKysrKysrKysrKysrCiBzcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZp
dl9laXIuaCAgICB8ICA3MSArKysKIHNyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2
X3NjcmVlbi5jIHwgIDE1ICsKIHNyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X3Nj
cmVlbi5oIHwgICAyICsKIHNyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9tZXNvbi5idWlsZCAg
ICAgIHwgICA4ICstCiA2IGZpbGVzIGNoYW5nZWQsIDU0OSBpbnNlcnRpb25zKCspLCAzIGRlbGV0
aW9ucygtKQogY3JlYXRlIG1vZGUgMTAwNjQ0IHNyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9l
dG5hdml2X2Vpci5jCiBjcmVhdGUgbW9kZSAxMDA2NDQgc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5h
dml2L2V0bmF2aXZfZWlyLmgKCmRpZmYgLS1naXQgYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2
aXYvTWFrZWZpbGUuc291cmNlcyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9NYWtlZmls
ZS5zb3VyY2VzCmluZGV4IDAxZTdlNDlhMzhhLi42MmU2NWZiNmM1ZSAxMDA2NDQKLS0tIGEvc3Jj
L2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L01ha2VmaWxlLnNvdXJjZXMKKysrIGIvc3JjL2dhbGxp
dW0vZHJpdmVycy9ldG5hdml2L01ha2VmaWxlLnNvdXJjZXMKQEAgLTIzLDYgKzIzLDggQEAgQ19T
T1VSQ0VTIDo9ICBcCiAJZXRuYXZpdl9kZWJ1Zy5oIFwKIAlldG5hdml2X2Rpc2FzbS5jIFwKIAll
dG5hdml2X2Rpc2FzbS5oIFwKKwlldG5hdml2X2Vpci5jIFwKKwlldG5hdml2X2Vpci5oIFwKIAll
dG5hdml2X2VtaXQuYyBcCiAJZXRuYXZpdl9lbWl0LmggXAogCWV0bmF2aXZfZXRjMi5jIFwKZGlm
ZiAtLWdpdCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2Vpci5jIGIvc3Jj
L2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfZWlyLmMKbmV3IGZpbGUgbW9kZSAxMDA2
NDQKaW5kZXggMDAwMDAwMDAwMDAuLjY5MTRmODNmNWZjCi0tLSAvZGV2L251bGwKKysrIGIvc3Jj
L2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfZWlyLmMKQEAgLTAsMCArMSw0NTQgQEAK
Ky8qCisgKiBDb3B5cmlnaHQgKGMpIDIwMTggRXRuYXZpdiBQcm9qZWN0CisgKiBDb3B5cmlnaHQg
KEMpIDIwMTggWm9kaWFjIEluZmxpZ2h0IElubm92YXRpb25zCisgKgorICogUGVybWlzc2lvbiBp
cyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5n
IGEKKyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9u
IGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCisgKiB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRo
b3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uCisgKiB0aGUgcmln
aHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3Vi
IGxpY2Vuc2UsCisgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8g
cGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKKyAqIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBk
byBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CisgKgorICogVGhlIGFi
b3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2UgKGluY2x1ZGlu
ZyB0aGUKKyAqIG5leHQgcGFyYWdyYXBoKSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGwgY29waWVz
IG9yIHN1YnN0YW50aWFsIHBvcnRpb25zCisgKiBvZiB0aGUgU29mdHdhcmUuCisgKgorICogVEhF
IFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJ
TkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8g
VEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAorICogRklUTkVTUyBGT1IgQSBQQVJU
SUNVTEFSIFBVUlBPU0UgQU5EIE5PTi1JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMCisg
KiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJ
TSwgREFNQUdFUyBPUiBPVEhFUgorICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBP
RiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcKKyAqIEZST00sIE9VVCBPRiBP
UiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIKKyAq
IERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKiBBdXRob3JzOgorICogICAgQ2hyaXN0
aWFuIEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVyQGdtYWlsLmNvbT4KKyAqLworCisjaW5jbHVk
ZSAiZXRuYXZpdl9laXIuaCIKKworI2luY2x1ZGUgImV0bmF2aXZfY29udGV4dC5oIgorI2luY2x1
ZGUgImV0bmF2aXZfZGVidWcuaCIKKyNpbmNsdWRlICJldG5hdml2X3V0aWwuaCIKKyNpbmNsdWRl
ICJuaXIvdGdzaV90b19uaXIuaCIKKyNpbmNsdWRlICJ0Z3NpL3Rnc2lfZHVtcC5oIgorI2luY2x1
ZGUgInV0aWwvdV9kZWJ1Zy5oIgorI2luY2x1ZGUgInV0aWwvdV9tZW1vcnkuaCIKKyNpbmNsdWRl
ICJldG5hdml2L2NvbXBpbGVyL2Vpcl9jb21waWxlci5oIgorI2luY2x1ZGUgImV0bmF2aXYvY29t
cGlsZXIvZWlyX25pci5oIgorI2luY2x1ZGUgImV0bmF2aXYvY29tcGlsZXIvZWlyX3NoYWRlci5o
IgorI2luY2x1ZGUgInBpcGUvcF9zdGF0ZS5oIgorCitzdGF0aWMgdm9pZAorZHVtcF9zaGFkZXJf
aW5mbyhzdHJ1Y3QgZWlyX3NoYWRlcl92YXJpYW50ICp2LCBzdHJ1Y3QgcGlwZV9kZWJ1Z19jYWxs
YmFjayAqZGVidWcpCit7CisgICBpZiAoIXVubGlrZWx5KGV0bmFfbWVzYV9kZWJ1ZyAmIEVUTkFf
REJHX1NIQURFUkRCKSkKKyAgICAgIHJldHVybjsKKworICAgcGlwZV9kZWJ1Z19tZXNzYWdlKGRl
YnVnLCBTSEFERVJfSU5GTywgIlxuIgorICAgICAgICAgIlNIQURFUi1EQjogJXMgcHJvZyAlZC8l
ZDogJXUgaW5zdHJ1Y3Rpb25zICV1IHRlbXBzXG4iCisgICAgICAgICAiU0hBREVSLURCOiAlcyBw
cm9nICVkLyVkOiAldSBpbW1lZGlhdGVzICV1IGNvbnN0c1xuIgorICAgICAgICAgIlNIQURFUi1E
QjogJXMgcHJvZyAlZC8lZDogJXUgbG9vcHNcbiIsCisgICAgICAgICBnbF9zaGFkZXJfc3RhZ2Vf
bmFtZSh2LT5zaGFkZXItPnR5cGUpLAorICAgICAgICAgdi0+c2hhZGVyLT5pZCwgdi0+aWQsCisg
ICAgICAgICB2LT5pbmZvLnNpemVkd29yZHMsCisgICAgICAgICB2LT5udW1fdGVtcHMsCisgICAg
ICAgICBnbF9zaGFkZXJfc3RhZ2VfbmFtZSh2LT5zaGFkZXItPnR5cGUpLAorICAgICAgICAgdi0+
c2hhZGVyLT5pZCwgdi0+aWQsCisgICAgICAgICB1dGlsX2R5bmFycmF5X251bV9lbGVtZW50cygm
di0+dW5pZm9ybXMsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhKSwKKyAgICAgICAgIHYtPmNvbnN0
X3NpemUsCisgICAgICAgICBnbF9zaGFkZXJfc3RhZ2VfbmFtZSh2LT5zaGFkZXItPnR5cGUpLAor
ICAgICAgICAgdi0+c2hhZGVyLT5pZCwgdi0+aWQsCisgICAgICAgICB2LT5udW1fbG9vcHMpOwor
fQorCitzdHJ1Y3QgZWlyX3NoYWRlciAqCitlaXJfc2hhZGVyX2NyZWF0ZShzdHJ1Y3QgZWlyX2Nv
bXBpbGVyICpjb21waWxlciwKKyAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cnVjdCBwaXBlX3No
YWRlcl9zdGF0ZSAqY3NvLAorICAgICAgICAgICAgICAgICAgZ2xfc2hhZGVyX3N0YWdlIHR5cGUs
CisgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGlwZV9kZWJ1Z19jYWxsYmFjayAqZGVidWcsCisg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGlwZV9zY3JlZW4gKnNjcmVlbikKK3sKKyAgIHN0cnVj
dCBuaXJfc2hhZGVyICpuaXI7CisKKyAgIGFzc2VydChjb21waWxlcik7CisKKyAgIGlmIChjc28t
PnR5cGUgPT0gUElQRV9TSEFERVJfSVJfTklSKSB7CisgICAgICAvKiB3ZSB0YWtlIG93bmVyc2hp
cCBvZiB0aGUgcmVmZXJlbmNlICovCisgICAgICBuaXIgPSBjc28tPmlyLm5pcjsKKyAgIH0gZWxz
ZSB7CisgICAgICBkZWJ1Z19hc3NlcnQoY3NvLT50eXBlID09IFBJUEVfU0hBREVSX0lSX1RHU0kp
OworCisgICAgICBpZiAoZWlyX2NvbXBpbGVyX2RlYnVnICYgRUlSX0RCR19ESVNBU00pCisgICAg
ICAgICB0Z3NpX2R1bXAoY3NvLT50b2tlbnMsIDApOworCisgICAgICBuaXIgPSBlaXJfdGdzaV90
b19uaXIoY3NvLT50b2tlbnMsIHNjcmVlbik7CisgICB9CisKKyAgIHN0cnVjdCBlaXJfc2hhZGVy
ICpzaGFkZXIgPSBlaXJfc2hhZGVyX2Zyb21fbmlyKGNvbXBpbGVyLCBuaXIpOworCisgICBpZiAo
ZXRuYV9tZXNhX2RlYnVnICYgRVROQV9EQkdfU0hBREVSREIpIHsKKyAgICAgIC8qIGlmIHNoYWRl
ci1kYiBydW4sIGNyZWF0ZSBhIHN0YW5kYXJkIHZhcmlhbnQgaW1tZWRpYXRlbHkKKyAgICAgICAq
IChhcyBvdGhlcndpc2Ugbm90aGluZyB3aWxsIHRyaWdnZXIgdGhlIHNoYWRlciB0byBiZQorICAg
ICAgICogYWN0dWFsbHkgY29tcGlsZWQpCisgICAgICAgKi8KKyAgICAgIHN0YXRpYyBzdHJ1Y3Qg
ZXRuYV9zaGFkZXJfa2V5IGtleTsKKyAgICAgIG1lbXNldCgma2V5LCAwLCBzaXplb2Yoa2V5KSk7
CisgICAgICBlaXJfc2hhZGVyX3ZhcmlhbnQoc2hhZGVyLCBrZXksIGRlYnVnKTsKKyAgIH0KKwor
ICAgcmV0dXJuIHNoYWRlcjsKK30KKwordm9pZCAqCitlaXJfc2hhZGVyX3ZhcmlhbnQodm9pZCAq
cywKKyAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgZXRuYV9zaGFkZXJfa2V5IGtleSwKKyAgICAg
ICAgICAgICAgICAgICBzdHJ1Y3QgcGlwZV9kZWJ1Z19jYWxsYmFjayAqZGVidWcpCit7CisgICBz
dHJ1Y3QgZWlyX3NoYWRlciAqc2hhZGVyID0gKHN0cnVjdCBlaXJfc2hhZGVyICopczsKKworICAg
LyogY29udmVydCBmcm9tIGV0bmFfc2hhZGVyX2tleSB0byBlaXJfc2hhZGVyX2tleSAqLworICAg
c3RydWN0IGVpcl9zaGFkZXJfa2V5IGVpcl9rZXkgPSB7CisgICAgICAuZnJhZ19yYl9zd2FwID0g
a2V5LmZyYWdfcmJfc3dhcAorICAgfTsKKworICAgc3RydWN0IGVpcl9zaGFkZXJfdmFyaWFudCAq
djsKKyAgIGJvb2wgY3JlYXRlZCA9IGZhbHNlOworCisgICB2ID0gZWlyX3NoYWRlcl9nZXRfdmFy
aWFudChzaGFkZXIsIGVpcl9rZXksICZjcmVhdGVkKTsKKworICAgaWYgKGNyZWF0ZWQpCisgICAg
ICBkdW1wX3NoYWRlcl9pbmZvKHYsIGRlYnVnKTsKKworICAgcmV0dXJuIHY7Cit9CisKK3N0cnVj
dCBuaXJfc2hhZGVyICoKK2Vpcl90Z3NpX3RvX25pcihjb25zdCBzdHJ1Y3QgdGdzaV90b2tlbiAq
dG9rZW5zLCBzdHJ1Y3QgcGlwZV9zY3JlZW4gKnNjcmVlbikKK3sKKyAgIGlmICghc2NyZWVuKSB7
CisgICAgICBjb25zdCBuaXJfc2hhZGVyX2NvbXBpbGVyX29wdGlvbnMgKm9wdGlvbnMgPSBlaXJf
Z2V0X2NvbXBpbGVyX29wdGlvbnMoKTsKKworICAgICAgcmV0dXJuIHRnc2lfdG9fbmlyX25vc2Ny
ZWVuKHRva2Vucywgb3B0aW9ucyk7CisgICB9CisKKyAgIHJldHVybiB0Z3NpX3RvX25pcih0b2tl
bnMsIHNjcmVlbik7Cit9CisKK3N0YXRpYyBpbmxpbmUgdW5zaWduZWQKK2dldF9jb25zdF9pZHgo
Y29uc3Qgc3RydWN0IGV0bmFfY29udGV4dCAqY3R4LCBib29sIGZyYWcsIHVuc2lnbmVkIHNhbXBf
aWQpCit7CisgICBpZiAoZnJhZykKKyAgICAgIHJldHVybiBzYW1wX2lkOworCisgICByZXR1cm4g
c2FtcF9pZCArIGN0eC0+c3BlY3MudmVydGV4X3NhbXBsZXJfb2Zmc2V0OworfQorCitzdGF0aWMg
dWludDMyX3QKK2dldF90ZXh0dXJlX3NpemUoY29uc3Qgc3RydWN0IGV0bmFfY29udGV4dCAqY3R4
LAorICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgZWlyX3NoYWRlcl92YXJpYW50ICp2YXJp
YW50LAorICAgICAgICAgICAgICAgICBzdHJ1Y3QgZWlyX3VuaWZvcm1fZGF0YSAqdW5pZm9ybSkK
K3sKKyAgIGNvbnN0IGJvb2wgZnJhZyA9IGN0eC0+c2hhZGVyLmZzID09IHZhcmlhbnQ7CisgICBj
b25zdCB1bnNpZ25lZCBpbmRleCA9IGdldF9jb25zdF9pZHgoY3R4LCBmcmFnLCB1bmlmb3JtLT5k
YXRhKTsKKyAgIGNvbnN0IHN0cnVjdCBwaXBlX3NhbXBsZXJfdmlldyAqdGV4dHVyZSA9IGN0eC0+
c2FtcGxlcl92aWV3W2luZGV4XTsKKworICAgc3dpdGNoICh1bmlmb3JtLT5jb250ZW50KSB7Cisg
ICBjYXNlIEVJUl9VTklGT1JNX0lNQUdFX1dJRFRIOgorICAgICAgcmV0dXJuIHRleHR1cmUtPnRl
eHR1cmUtPndpZHRoMDsKKyAgIGNhc2UgRUlSX1VOSUZPUk1fSU1BR0VfSEVJR0hUOgorICAgICAg
cmV0dXJuIHRleHR1cmUtPnRleHR1cmUtPmhlaWdodDA7CisgICBjYXNlIEVJUl9VTklGT1JNX0lN
QUdFX0RFUFRIOgorICAgICAgcmV0dXJuIHRleHR1cmUtPnRleHR1cmUtPmRlcHRoMDsKKyAgIGRl
ZmF1bHQ6CisgICAgICB1bnJlYWNoYWJsZSgiQmFkIHRleHR1cmUgc2l6ZSBmaWVsZCIpOworICAg
fQorfQorCit2b2lkCitlaXJfdW5pZm9ybXNfd3JpdGUoY29uc3Qgc3RydWN0IGV0bmFfY29udGV4
dCAqY3R4LAorICAgICAgICAgICAgICAgICAgIGNvbnN0IHZvaWQgKnYsCisgICAgICAgICAgICAg
ICAgICAgc3RydWN0IHBpcGVfY29uc3RhbnRfYnVmZmVyICpjYiwKKyAgICAgICAgICAgICAgICAg
ICB1aW50MzJfdCAqdW5pZm9ybXMsIHVuc2lnbmVkICpzaXplKQoreworICAgY29uc3Qgc3RydWN0
IGVpcl9zaGFkZXJfdmFyaWFudCAqdmFyaWFudCA9IChjb25zdCBzdHJ1Y3QgZWlyX3NoYWRlcl92
YXJpYW50ICopdjsKKyAgIGNvbnN0IHVuc2lnbmVkIG9mZnNldCA9IE1JTjIoY2ItPmJ1ZmZlcl9z
aXplLCB2YXJpYW50LT5jb25zdF9zaXplKTsKKyAgIHVuc2lnbmVkIGkgPSBvZmZzZXQ7CisKKyAg
IGlmIChjYi0+dXNlcl9idWZmZXIpCisgICAgICBtZW1jcHkodW5pZm9ybXMsIGNiLT51c2VyX2J1
ZmZlciwgb2Zmc2V0ICogNCk7CisKKyAgIHV0aWxfZHluYXJyYXlfZm9yZWFjaCgmdmFyaWFudC0+
dW5pZm9ybXMsIHN0cnVjdCBlaXJfdW5pZm9ybV9kYXRhLCB1bmlmb3JtKSB7CisgICAgICBzd2l0
Y2ggKHVuaWZvcm0tPmNvbnRlbnQpIHsKKyAgICAgIGNhc2UgRUlSX1VOSUZPUk1fVU5VU0VEOgor
ICAgICAgICAgdW5pZm9ybXNbaV0gPSAwOworICAgICAgICAgYnJlYWs7CisgICAgICBjYXNlIEVJ
Ul9VTklGT1JNX0NPTlNUQU5UOgorICAgICAgICAgdW5pZm9ybXNbaV0gPSB1bmlmb3JtLT5kYXRh
OworICAgICAgICAgYnJlYWs7CisgICAgICBjYXNlIEVJUl9VTklGT1JNX0lNQUdFX1dJRFRIOgor
ICAgICAgICAgLyogZmFsbC10aHJvdWdoICovCisgICAgICBjYXNlIEVJUl9VTklGT1JNX0lNQUdF
X0hFSUdIVDoKKyAgICAgICAgIC8qIGZhbGwtdGhyb3VnaCAqLworICAgICAgY2FzZSBFSVJfVU5J
Rk9STV9JTUFHRV9ERVBUSDoKKyAgICAgICAgIHVuaWZvcm1zW2ldID0gZ2V0X3RleHR1cmVfc2l6
ZShjdHgsIHZhcmlhbnQsIHVuaWZvcm0pOworICAgICAgICAgYnJlYWs7CisgICAgICBkZWZhdWx0
OgorICAgICAgICAgdW5yZWFjaGFibGUoInVuaGFuZGxlZCBjb250ZW50IHR5cGUiKTsKKyAgICAg
ICAgIGJyZWFrOworICAgICAgfQorCisgICAgICBpKys7CisgICB9CisKKyAgICpzaXplID0gaTsK
K30KKwordWludDMyX3QKK2Vpcl91bmlmb3Jtc19jb25zdF9jb3VudChjb25zdCB2b2lkICp2KQor
eworICAgY29uc3Qgc3RydWN0IGVpcl9zaGFkZXJfdmFyaWFudCAqdmFyaWFudCA9IChjb25zdCBz
dHJ1Y3QgZWlyX3NoYWRlcl92YXJpYW50ICopdjsKKworICAgcmV0dXJuIHZhcmlhbnQtPmNvbnN0
X3NpemU7Cit9CisKK3VpbnQzMl90CitlaXJfdW5pZm9ybV9kaXJ0eV9mbGFncyhjb25zdCB2b2lk
ICp2KQoreworICAgLyogVE9ETzogKi8KKyAgIHJldHVybiAwOworfQorCitzdGF0aWMgdWludDMy
X3QKK2V0bmFfY2FsY3VsYXRlX2xvYWRfYmFsYW5jZShjb25zdCBzdHJ1Y3QgZXRuYV9zcGVjcyAq
c3BlY3MsIHVuc2lnbmVkIG51bV9yZWdzKQoreworICAgLyogZmlsbCBpbiAibXlzdGVyeSBtZWF0
IiBsb2FkIGJhbGFuY2luZyB2YWx1ZS4gVGhpcyB2YWx1ZSBkZXRlcm1pbmVzIGhvdworICAgICog
d29yayBpcyBzY2hlZHVsZWQgYmV0d2VlbiBWUyBhbmQgUFMKKyAgICAqIGluIHRoZSB1bmlmaWVk
IHNoYWRlciBhcmNoaXRlY3R1cmUuIE1vcmUgcHJlY2lzZWx5LCBpdCBpcyBkZXRlcm1pbmVkIGZy
b20KKyAgICAqIHRoZSBudW1iZXIgb2YgVlMgb3V0cHV0cywgYXMgd2VsbCBhcyBjaGlwLXNwZWNp
ZmljCisgICAgKiB2ZXJ0ZXggb3V0cHV0IGJ1ZmZlciBzaXplLCB2ZXJ0ZXggY2FjaGUgc2l6ZSwg
YW5kIHRoZSBudW1iZXIgb2Ygc2hhZGVyCisgICAgKiBjb3Jlcy4KKyAgICAqLworICAgdW5zaWdu
ZWQgaGFsZl9vdXQgPSAobnVtX3JlZ3MgKyAxKSAvIDI7CisgICBhc3NlcnQoaGFsZl9vdXQpOwor
CisgICB1aW50MzJfdCBiID0gKCgyMDQ4MCAvIChzcGVjcy0+dmVydGV4X291dHB1dF9idWZmZXJf
c2l6ZSAtCisgICAgICAgICAgICAgICAgICAgICAgICAgICAyICogaGFsZl9vdXQgKiBzcGVjcy0+
dmVydGV4X2NhY2hlX3NpemUpKSArCisgICAgICAgICAgICAgICAgIDkpIC8KKyAgICAgICAgICAg
ICAgICAxMDsKKyAgIHVpbnQzMl90IGEgPSAoYiArIDI1NiAvIChzcGVjcy0+c2hhZGVyX2NvcmVf
Y291bnQgKiBoYWxmX291dCkpIC8gMjsKKworICAgcmV0dXJuIFZJVlNfVlNfTE9BRF9CQUxBTkNJ
TkdfQShNSU4yKGEsIDI1NSkpIHwKKyAgICAgICAgICBWSVZTX1ZTX0xPQURfQkFMQU5DSU5HX0Io
TUlOMihiLCAyNTUpKSB8CisgICAgICAgICAgVklWU19WU19MT0FEX0JBTEFOQ0lOR19DKDB4M2Yp
IHwKKyAgICAgICAgICBWSVZTX1ZTX0xPQURfQkFMQU5DSU5HX0QoMHgwZik7Cit9CisKKy8qIExp
bmsgdnMgYW5kIGZzIHRvZ2V0aGVyOiBmaWxsIGluIHNoYWRlcl9zdGF0ZSBmcm9tIHZzIGFuZCBm
cworICogYXMgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZXZlcnkgdGltZSBhIG5ldyBmcyBvciB2
cyBpcyBib3VuZCwgdGhlIGdvYWwgaXMgdG8KKyAqIGRvIGxpdHRsZSBwcm9jZXNzaW5nIGFzIHBv
c3NpYmxlIGhlcmUsIGFuZCB0byBwcmVjb21wdXRlIGFzIG11Y2ggYXMgcG9zc2libGUgaW4KKyAq
IHRoZSB2cy9mcyBzaGFkZXJfb2JqZWN0LgorICoKKyAqIFhYWCB3ZSBjb3VsZCBjYWNoZSB0aGUg
bGluayByZXN1bHQgZm9yIGEgY2VydGFpbiBzZXQgb2YgVlMvUFM7IHVzdWFsbHkgYSBwYWlyCisg
KiBvZiBWUyBhbmQgUFMgd2lsbCBiZSB1c2VkIHRvZ2V0aGVyIGFueXdheS4KKyAqLworYm9vbAor
ZWlyX2xpbmtfc2hhZGVycyhzdHJ1Y3QgZXRuYV9jb250ZXh0ICpjdHgpCit7CisgICBpZiAoIWN0
eC0+c2hhZGVyLnZzIHx8ICFjdHgtPnNoYWRlci5mcykKKyAgICAgIHJldHVybiBmYWxzZTsKKwor
ICAgc3RydWN0IGNvbXBpbGVkX3NoYWRlcl9zdGF0ZSAqY3MgPSAmY3R4LT5zaGFkZXJfc3RhdGU7
CisgICBzdHJ1Y3QgZWlyX3NoYWRlcl92YXJpYW50ICp2cyA9IGN0eC0+c2hhZGVyLnZzOworICAg
c3RydWN0IGVpcl9zaGFkZXJfdmFyaWFudCAqZnMgPSBjdHgtPnNoYWRlci5mczsKKyAgIHN0cnVj
dCBlaXJfc2hhZGVyX2xpbmthZ2UgbGluayA9IHsgfTsKKworICAgZWlyX2xpbmtfc2hhZGVyKCZs
aW5rLCB2cywgZnMpOworCisjaWZkZWYgREVCVUcKKyAgIGlmIChEQkdfRU5BQkxFRChFVE5BX0RC
R19EVU1QX1NIQURFUlMpKSB7CisgICAgICBlaXJfZHVtcF9zaGFkZXIodnMpOworICAgICAgZWly
X2R1bXBfc2hhZGVyKGZzKTsKKyAgIH0KKyNlbmRpZgorCisgICBpZiAoREJHX0VOQUJMRUQoRVRO
QV9EQkdfTElOS0VSX01TR1MpKSB7CisgICAgICBkZWJ1Z19wcmludGYoImxpbmsgcmVzdWx0Olxu
Iik7CisgICAgICBkZWJ1Z19wcmludGYoIiAgdnMgIC0+IGZzICBjb21wcyB1c2UgICAgIHBhX2F0
dHJcbiIpOworCisgICAgICBmb3IgKGludCBpZHggPSAwOyBpZHggPCBsaW5rLm51bV92YXJ5aW5n
czsgKytpZHgpCisgICAgICAgICBkZWJ1Z19wcmludGYoIiAgdCUtMnUgLT4gdCUtMnUgJS01Lipz
ICV1LCV1LCV1LCV1IDB4JTA4eFxuIiwKKyAgICAgICAgICAgICAgICAgICAgICBsaW5rLnZhcnlp
bmdzW2lkeF0ucmVnLCBpZHggKyAxLAorICAgICAgICAgICAgICAgICAgICAgIGxpbmsudmFyeWlu
Z3NbaWR4XS5uY29tcCwgInh5enciLAorICAgICAgICAgICAgICAgICAgICAgIGxpbmsudmFyeWlu
Z3NbaWR4XS51c2VbMF0sIGxpbmsudmFyeWluZ3NbaWR4XS51c2VbMV0sCisgICAgICAgICAgICAg
ICAgICAgICAgbGluay52YXJ5aW5nc1tpZHhdLnVzZVsyXSwgbGluay52YXJ5aW5nc1tpZHhdLnVz
ZVszXSwKKyAgICAgICAgICAgICAgICAgICAgICBsaW5rLnZhcnlpbmdzW2lkeF0ucGFfYXR0cmli
dXRlcyk7CisgICB9CisKKyAgIC8qIHNldCBsYXN0X3ZhcnlpbmdfMnggZmxhZyBpZiB0aGUgbGFz
dCB2YXJ5aW5nIGhhcyAxIG9yIDIgY29tcG9uZW50cyAqLworICAgYm9vbCBsYXN0X3Zhcnlpbmdf
MnggPSBmYWxzZTsKKyAgIGlmIChsaW5rLm51bV92YXJ5aW5ncyA+IDAgJiYgbGluay52YXJ5aW5n
c1tsaW5rLm51bV92YXJ5aW5ncyAtIDFdLm5jb21wIDw9IDIpCisgICAgICBsYXN0X3Zhcnlpbmdf
MnggPSB0cnVlOworCisgICBjcy0+UkFfQ09OVFJPTCA9IFZJVlNfUkFfQ09OVFJPTF9VTkswIHwK
KyAgICAgICAgICAgICAgICAgICAgQ09ORChsYXN0X3ZhcnlpbmdfMngsIFZJVlNfUkFfQ09OVFJP
TF9MQVNUX1ZBUllJTkdfMlgpOworCisgICBjcy0+UEFfQVRUUklCVVRFX0VMRU1FTlRfQ09VTlQg
PSBWSVZTX1BBX0FUVFJJQlVURV9FTEVNRU5UX0NPVU5UX0NPVU5UKGxpbmsubnVtX3Zhcnlpbmdz
KTsKKyAgIGZvciAoaW50IGlkeCA9IDA7IGlkeCA8IGxpbmsubnVtX3ZhcnlpbmdzOyArK2lkeCkK
KyAgICAgIGNzLT5QQV9TSEFERVJfQVRUUklCVVRFU1tpZHhdID0gbGluay52YXJ5aW5nc1tpZHhd
LnBhX2F0dHJpYnV0ZXM7CisKKyAgIGNzLT5WU19FTkRfUEMgPSB2cy0+aW5mby5zaXplZHdvcmRz
IC8gNDsKKyAgIGNzLT5WU19PVVRQVVRfQ09VTlQgPSAxICsgbGluay5udW1fdmFyeWluZ3M7IC8q
IHBvc2l0aW9uICsgdmFyeWluZ3MgKi8KKworICAgLyogdnMgb3V0cHV0cyAodmFyeWluZ3MpICov
CisgICBERUZJTkVfRVROQV9CSVRBUlJBWSh2c19vdXRwdXQsIDE2LCA4KSA9IHswfTsKKyAgIGlu
dCB2YXJpZCA9IDA7CisgICBldG5hX2JpdGFycmF5X3NldCh2c19vdXRwdXQsIDgsIHZhcmlkKyss
IHZzLT52c19wb3Nfb3V0X3JlZyk7CisgICBmb3IgKGludCBpZHggPSAwOyBpZHggPCBsaW5rLm51
bV92YXJ5aW5nczsgKytpZHgpCisgICAgICBldG5hX2JpdGFycmF5X3NldCh2c19vdXRwdXQsIDgs
IHZhcmlkKyssIGxpbmsudmFyeWluZ3NbaWR4XS5yZWcpOworICAgaWYgKHZzLT52c19wb2ludHNp
emVfb3V0X3JlZyA+PSAwKQorICAgICAgZXRuYV9iaXRhcnJheV9zZXQodnNfb3V0cHV0LCA4LCB2
YXJpZCsrLCB2cy0+dnNfcG9pbnRzaXplX291dF9yZWcpOyAvKiBwb2ludHNpemUgaXMgbGFzdCAq
LworCisgICBmb3IgKGludCBpZHggPSAwOyBpZHggPCBBUlJBWV9TSVpFKGNzLT5WU19PVVRQVVQp
OyArK2lkeCkKKyAgICAgIGNzLT5WU19PVVRQVVRbaWR4XSA9IHZzX291dHB1dFtpZHhdOworCisg
ICBpZiAodnMtPnZzX3BvaW50c2l6ZV9vdXRfcmVnICE9IC0xKSB7CisgICAgICAvKiB2ZXJ0ZXgg
c2hhZGVyIG91dHB1dHMgcG9pbnQgY29vcmRpbmF0ZSwgcHJvdmlkZSBleHRyYSBvdXRwdXQgYW5k
IG1ha2UKKyAgICAgICAqIHN1cmUgUEEgY29uZmlnIGlzCisgICAgICAgKiBub3QgbWFza2VkICov
CisgICAgICBjcy0+UEFfQ09ORklHID0gfjA7CisgICAgICBjcy0+VlNfT1VUUFVUX0NPVU5UX1BT
SVpFID0gY3MtPlZTX09VVFBVVF9DT1VOVCArIDE7CisgICB9IGVsc2UgeworICAgICAgLyogdmVy
dGV4IHNoYWRlciBkb2VzIG5vdCBvdXRwdXQgcG9pbnQgY29vcmRpbmF0ZSwgbWFrZSBzdXJlIHRo
YXRlCisgICAgICAgKiBQT0lOVF9TSVpFX0VOQUJMRSBpcyBtYXNrZWQKKyAgICAgICAqIGFuZCBu
byBleHRyYSBvdXRwdXQgaXMgZ2l2ZW4gKi8KKyAgICAgIGNzLT5QQV9DT05GSUcgPSB+VklWU19Q
QV9DT05GSUdfUE9JTlRfU0laRV9FTkFCTEU7CisgICAgICBjcy0+VlNfT1VUUFVUX0NPVU5UX1BT
SVpFID0gY3MtPlZTX09VVFBVVF9DT1VOVDsKKyAgIH0KKworICAgY3MtPlZTX0xPQURfQkFMQU5D
SU5HID0gZXRuYV9jYWxjdWxhdGVfbG9hZF9iYWxhbmNlKCZjdHgtPnNwZWNzLCB2cy0+bnVtX291
dHB1dHMpOworCisgICBzdGF0aWMgY29uc3QgdWludDhfdCBmc19pbnB1dF9jb3VudF91bms4ID0g
MzE7IC8qIFhYWCB3aGF0IGlzIHRoaXMgKi8KKworICAgY3MtPlZTX1NUQVJUX1BDID0gMDsKKyAg
IGNzLT5QU19FTkRfUEMgPSBmcy0+aW5mby5zaXplZHdvcmRzIC8gNDsKKyAgIGNzLT5QU19PVVRQ
VVRfUkVHID0gZnMtPmZzX2NvbG9yX291dF9yZWc7CisgICBjcy0+UFNfSU5QVVRfQ09VTlQgPQor
ICAgICAgVklWU19QU19JTlBVVF9DT1VOVF9DT1VOVChsaW5rLm51bV92YXJ5aW5ncyArIDEpIHwg
LyogTnVtYmVyIG9mIGlucHV0cyBwbHVzIHBvc2l0aW9uICovCisgICAgICBWSVZTX1BTX0lOUFVU
X0NPVU5UX1VOSzgoZnNfaW5wdXRfY291bnRfdW5rOCk7CisgICBjcy0+UFNfVEVNUF9SRUdJU1RF
Ul9DT05UUk9MID0KKyAgICAgIFZJVlNfUFNfVEVNUF9SRUdJU1RFUl9DT05UUk9MX05VTV9URU1Q
UyhNQVgyKGZzLT5udW1fdGVtcHMsIGxpbmsubnVtX3ZhcnlpbmdzICsgMSkpOworICAgY3MtPlBT
X0NPTlRST0wgPSBWSVZTX1BTX0NPTlRST0xfVU5LMTsgLyogWFhYIHdoZW4gY2FuIHdlIHNldCBC
WVBBU1M/ICovCisgICBjcy0+UFNfU1RBUlRfUEMgPSAwOworCisgICAvKiBQcmVjb21wdXRlIFBT
X0lOUFVUX0NPVU5UIGFuZCBURU1QX1JFR0lTVEVSX0NPTlRST0wgaW4gdGhlIGNhc2Ugb2YgTVNB
QQorICAgICogbW9kZSwgYXZvaWRzIHNvbWUgZnVtYmxpbmcgaW4gc3luY19jb250ZXh0LiAqLwor
ICAgY3MtPlBTX0lOUFVUX0NPVU5UX01TQUEgPQorICAgICAgVklWU19QU19JTlBVVF9DT1VOVF9D
T1VOVChsaW5rLm51bV92YXJ5aW5ncyArIDIpIHwgLyogTVNBQSBhZGRzIGFub3RoZXIgaW5wdXQg
Ki8KKyAgICAgIFZJVlNfUFNfSU5QVVRfQ09VTlRfVU5LOChmc19pbnB1dF9jb3VudF91bms4KTsK
KyAgIGNzLT5QU19URU1QX1JFR0lTVEVSX0NPTlRST0xfTVNBQSA9CisgICAgICBWSVZTX1BTX1RF
TVBfUkVHSVNURVJfQ09OVFJPTF9OVU1fVEVNUFMoTUFYMihmcy0+bnVtX3RlbXBzLCBsaW5rLm51
bV92YXJ5aW5ncyArIDIpKTsKKworICAgdWludDMyX3QgdG90YWxfY29tcG9uZW50cyA9IDA7Cisg
ICBERUZJTkVfRVROQV9CSVRBUlJBWShudW1fY29tcG9uZW50cywgRVROQV9OVU1fVkFSWUlOR1Ms
IDQpID0gezB9OworICAgREVGSU5FX0VUTkFfQklUQVJSQVkoY29tcG9uZW50X3VzZSwgNCAqIEVU
TkFfTlVNX1ZBUllJTkdTLCAyKSA9IHswfTsKKyAgIGZvciAoaW50IGlkeCA9IDA7IGlkeCA8IGxp
bmsubnVtX3ZhcnlpbmdzOyArK2lkeCkgeworCisgICAgICBldG5hX2JpdGFycmF5X3NldChudW1f
Y29tcG9uZW50cywgNCwgaWR4LCBsaW5rLnZhcnlpbmdzW2lkeF0ubmNvbXApOworICAgICAgZm9y
IChpbnQgY29tcCA9IDA7IGNvbXAgPCBsaW5rLnZhcnlpbmdzW2lkeF0ubmNvbXA7ICsrY29tcCkg
eworICAgICAgICAgZXRuYV9iaXRhcnJheV9zZXQoY29tcG9uZW50X3VzZSwgMiwgdG90YWxfY29t
cG9uZW50cywgbGluay52YXJ5aW5nc1tpZHhdLnVzZVtjb21wXSk7CisgICAgICAgICB0b3RhbF9j
b21wb25lbnRzICs9IDE7CisgICAgICB9CisgICB9CisKKyAgIGNzLT5HTF9WQVJZSU5HX1RPVEFM
X0NPTVBPTkVOVFMgPQorICAgICAgVklWU19HTF9WQVJZSU5HX1RPVEFMX0NPTVBPTkVOVFNfTlVN
KGFsaWduKHRvdGFsX2NvbXBvbmVudHMsIDIpKTsKKyAgIGNzLT5HTF9WQVJZSU5HX05VTV9DT01Q
T05FTlRTID0gbnVtX2NvbXBvbmVudHNbMF07CisgICBjcy0+R0xfVkFSWUlOR19DT01QT05FTlRf
VVNFWzBdID0gY29tcG9uZW50X3VzZVswXTsKKyAgIGNzLT5HTF9WQVJZSU5HX0NPTVBPTkVOVF9V
U0VbMV0gPSBjb21wb25lbnRfdXNlWzFdOworI2lmIDAKKyAgIGNzLT5HTF9IQUxUSTVfU0hfU1BF
Q0lBTFMgPQorICAgICAgMHg3ZjdmMDAwMCB8IC8qIHVua25vd24gYml0cywgcHJvYmFibHkgb3Ro
ZXIgUFMgaW5wdXRzICovCisgICAgICAvKiBwb2ludHNpemUgaXMgbGFzdCAoc2VlIGFib3ZlKSAq
LworICAgICAgVklWU19HTF9IQUxUSTVfU0hfU1BFQ0lBTFNfVlNfUFNJWkVfT1VUKCh2cy0+dnNf
cG9pbnRzaXplX291dF9yZWcgIT0gLTEpID8KKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjcy0+VlNfT1VUUFVUX0NPVU5UICogNCA6IDB4MDApIHwKKyAgICAg
IFZJVlNfR0xfSEFMVEk1X1NIX1NQRUNJQUxTX1BTX1BDT09SRF9JTigobGluay5wY29vcmRfdmFy
eWluZ19jb21wX29mcyAhPSAtMSkgPworICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIGxpbmsucGNvb3JkX3ZhcnlpbmdfY29tcF9vZnMgOiAweDdmKTsKKyNlbmRp
ZgorICAgLyogcmVmZXJlbmNlIGluc3RydWN0aW9uIG1lbW9yeSAqLworICAgY3MtPnZzX2luc3Rf
bWVtX3NpemUgPSB2cy0+aW5mby5zaXplZHdvcmRzOworICAgY3MtPlZTX0lOU1RfTUVNID0gdnMt
PmNvZGU7CisKKyAgIGNzLT5wc19pbnN0X21lbV9zaXplID0gZnMtPmluZm8uc2l6ZWR3b3JkczsK
KyAgIGNzLT5QU19JTlNUX01FTSA9IGZzLT5jb2RlOworCisjaWYgMAorICAgaWYgKHZzLT5uZWVk
c19pY2FjaGUgfCBmcy0+bmVlZHNfaWNhY2hlKSB7CisgICAgICAvKiBJZiBlaXRoZXIgb2YgdGhl
IHNoYWRlcnMgbmVlZHMgSUNBQ0hFLCB3ZSB1c2UgaXQgZm9yIGJvdGguIEl0IGlzCisgICAgICAg
KiBlaXRoZXIgc3dpdGNoZWQgb24gb3Igb2ZmIGZvciB0aGUgZW50aXJlIHNoYWRlciBwcm9jZXNz
b3IuCisgICAgICAgKi8KKyAgICAgIGlmICghZXRuYV9pY2FjaGVfdXBsb2FkX3NoYWRlcihjdHgs
IHZzKSB8fAorICAgICAgICAgICFldG5hX2ljYWNoZV91cGxvYWRfc2hhZGVyKGN0eCwgZnMpKSB7
CisgICAgICAgICBhc3NlcnQoMCk7CisgICAgICAgICByZXR1cm4gZmFsc2U7CisgICAgICB9CisK
KyAgICAgIGNzLT5WU19JTlNUX0FERFIuYm8gPSB2cy0+Ym87CisgICAgICBjcy0+VlNfSU5TVF9B
RERSLm9mZnNldCA9IDA7CisgICAgICBjcy0+VlNfSU5TVF9BRERSLmZsYWdzID0gRVROQV9SRUxP
Q19SRUFEOworICAgICAgY3MtPlBTX0lOU1RfQUREUi5ibyA9IGZzLT5ibzsKKyAgICAgIGNzLT5Q
U19JTlNUX0FERFIub2Zmc2V0ID0gMDsKKyAgICAgIGNzLT5QU19JTlNUX0FERFIuZmxhZ3MgPSBF
VE5BX1JFTE9DX1JFQUQ7CisgICB9IGVsc2UgeworI2VuZGlmCisgICAgICAvKiBjbGVhciByZWxv
Y3MgKi8KKyAgICAgIG1lbXNldCgmY3MtPlZTX0lOU1RfQUREUiwgMCwgc2l6ZW9mKGNzLT5WU19J
TlNUX0FERFIpKTsKKyAgICAgIG1lbXNldCgmY3MtPlBTX0lOU1RfQUREUiwgMCwgc2l6ZW9mKGNz
LT5QU19JTlNUX0FERFIpKTsKKyNpZiAwCisgICB9CisjZW5kaWYKKworICAgcmV0dXJuIHRydWU7
Cit9CisKK2Jvb2wKK2Vpcl9zaGFkZXJfdXBkYXRlX3ZlcnRleChzdHJ1Y3QgZXRuYV9jb250ZXh0
ICpjdHgpCit7CisgICBzdHJ1Y3QgY29tcGlsZWRfc2hhZGVyX3N0YXRlICpjcyA9ICZjdHgtPnNo
YWRlcl9zdGF0ZTsKKyAgIGNvbnN0IHN0cnVjdCBlaXJfc2hhZGVyX3ZhcmlhbnQgKnZzID0gY3R4
LT5zaGFkZXIudnM7CisgICBjb25zdCBzdHJ1Y3QgY29tcGlsZWRfdmVydGV4X2VsZW1lbnRzX3N0
YXRlICp2ZXMgPSBjdHgtPnZlcnRleF9lbGVtZW50czsKKyAgIHVuc2lnbmVkIG51bV90ZW1wcywg
Y3VyX3RlbXAsIG51bV92c19pbnB1dHM7CisKKyAgIGlmICghdnMpCisgICAgICByZXR1cm4gZmFs
c2U7CisKKyAgIG51bV92c19pbnB1dHMgPSBNQVgyKHZlcy0+bnVtX2VsZW1lbnRzLCB2cy0+bnVt
X2lucHV0cyk7CisgICBpZiAobnVtX3ZzX2lucHV0cyAhPSB2ZXMtPm51bV9lbGVtZW50cykgewor
ICAgICAgQlVHKCJOdW1iZXIgb2YgZWxlbWVudHMgJXUgZG9lcyBub3QgbWF0Y2ggdGhlIG51bWJl
ciBvZiBWUyBpbnB1dHMgJXUiLAorICAgICAgICAgIHZlcy0+bnVtX2VsZW1lbnRzLCB2cy0+bnVt
X2lucHV0cyk7CisgICAgICByZXR1cm4gZmFsc2U7CisgICB9CisKKyAgIGN1cl90ZW1wID0gdnMt
Pm51bV90ZW1wczsKKyAgIG51bV90ZW1wcyA9IG51bV92c19pbnB1dHMgLSB2cy0+bnVtX2lucHV0
cyArIGN1cl90ZW1wOworICAgY29uc3QgdWludDhfdCB2c19pbnB1dF9jb3VudF91bms4ID0gKHZz
LT5udW1faW5wdXRzICsgMTkpIC8gMTY7CisKKyAgIGNzLT5WU19JTlBVVF9DT1VOVCA9IFZJVlNf
VlNfSU5QVVRfQ09VTlRfQ09VTlQobnVtX3ZzX2lucHV0cykgfAorICAgICAgICAgICAgICAgICAg
ICAgICAgVklWU19WU19JTlBVVF9DT1VOVF9VTks4KHZzX2lucHV0X2NvdW50X3VuazgpOworICAg
Y3MtPlZTX1RFTVBfUkVHSVNURVJfQ09OVFJPTCA9CisgICAgICBWSVZTX1ZTX1RFTVBfUkVHSVNU
RVJfQ09OVFJPTF9OVU1fVEVNUFMobnVtX3RlbXBzKTsKKworICAgLyogdnMgaW5wdXRzIChhdHRy
aWJ1dGVzKSAqLworICAgREVGSU5FX0VUTkFfQklUQVJSQVkodnNfaW5wdXQsIDE2LCA4KSA9IHsw
fTsKKyAgIGZvciAoaW50IGlkeCA9IDA7IGlkeCA8IG51bV92c19pbnB1dHM7ICsraWR4KSB7Cisg
ICAgICBpZiAoaWR4IDwgdnMtPm51bV9pbnB1dHMpCisgICAgICAgICBldG5hX2JpdGFycmF5X3Nl
dCh2c19pbnB1dCwgOCwgaWR4LCB2cy0+aW5wdXRzW2lkeF0uc2xvdCk7CisgICAgICBlbHNlCisg
ICAgICAgICBldG5hX2JpdGFycmF5X3NldCh2c19pbnB1dCwgOCwgaWR4LCBjdXJfdGVtcCsrKTsK
KyAgIH0KKworICAgZm9yIChpbnQgaWR4ID0gMDsgaWR4IDwgQVJSQVlfU0laRShjcy0+VlNfSU5Q
VVQpOyArK2lkeCkKKyAgICAgIGNzLT5WU19JTlBVVFtpZHhdID0gdnNfaW5wdXRbaWR4XTsKKwor
ICAgcmV0dXJuIHRydWU7Cit9CmRpZmYgLS1naXQgYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2
aXYvZXRuYXZpdl9laXIuaCBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2Vp
ci5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwLi4yMzVhMGMxZDNhZAot
LS0gL2Rldi9udWxsCisrKyBiL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X2Vp
ci5oCkBAIC0wLDAgKzEsNzEgQEAKKy8qCisgKiBDb3B5cmlnaHQgKGMpIDIwMTggRXRuYXZpdiBQ
cm9qZWN0CisgKiBDb3B5cmlnaHQgKEMpIDIwMTggWm9kaWFjIEluZmxpZ2h0IElubm92YXRpb25z
CisgKgorICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRv
IGFueSBwZXJzb24gb2J0YWluaW5nIGEKKyAqIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNz
b2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksCisgKiB0byBkZWFs
IGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBs
aW1pdGF0aW9uCisgKiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVi
bGlzaCwgZGlzdHJpYnV0ZSwgc3ViIGxpY2Vuc2UsCisgKiBhbmQvb3Igc2VsbCBjb3BpZXMgb2Yg
dGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUKKyAqIFNvZnR3
YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRp
dGlvbnM6CisgKgorICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlz
c2lvbiBub3RpY2UgKGluY2x1ZGluZyB0aGUKKyAqIG5leHQgcGFyYWdyYXBoKSBzaGFsbCBiZSBp
bmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zCisgKiBvZiB0aGUg
U29mdHdhcmUuCisgKgorICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhP
VVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKKyAqIElNUExJRUQsIElOQ0xVRElO
RyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAor
ICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTi1JTkZSSU5HRU1FTlQu
IElOIE5PIEVWRU5UIFNIQUxMCisgKiBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBC
RSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgorICogTElBQklMSVRZLCBX
SEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJ
TkcKKyAqIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9S
IFRIRSBVU0UgT1IgT1RIRVIKKyAqIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KKyAqCisgKiBB
dXRob3JzOgorICogICAgQ2hyaXN0aWFuIEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVyQGdtYWls
LmNvbT4KKyAqLworCisjaWZuZGVmIEhfRVROQVZJVl9FSVIKKyNkZWZpbmUgSF9FVE5BVklWX0VJ
UgorCisjaW5jbHVkZSAiZXRuYXZpdl9zaGFkZXIuaCIKKworI2luY2x1ZGUgImV0bmF2aXYvY29t
cGlsZXIvZWlyX3NoYWRlci5oIgorI2luY2x1ZGUgInBpcGUvcF9zdGF0ZS5oIgorCitzdHJ1Y3Qg
ZXRuYV9jb250ZXh0OworCitzdHJ1Y3QgZWlyX3NoYWRlciAqCitlaXJfc2hhZGVyX2NyZWF0ZShz
dHJ1Y3QgZWlyX2NvbXBpbGVyICpjb21waWxlciwKKyAgICAgICAgICAgICAgICAgIGNvbnN0IHN0
cnVjdCBwaXBlX3NoYWRlcl9zdGF0ZSAqY3NvLAorICAgICAgICAgICAgICAgICAgZ2xfc2hhZGVy
X3N0YWdlIHR5cGUsCisgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGlwZV9kZWJ1Z19jYWxsYmFj
ayAqZGVidWcsCisgICAgICAgICAgICAgICAgICBzdHJ1Y3QgcGlwZV9zY3JlZW4gKnNjcmVlbik7
CisKK3ZvaWQgKgorZWlyX3NoYWRlcl92YXJpYW50KHZvaWQgKnMsCisgICAgICAgICAgICAgICAg
ICAgc3RydWN0IGV0bmFfc2hhZGVyX2tleSBrZXksCisgICAgICAgICAgICAgICAgICAgc3RydWN0
IHBpcGVfZGVidWdfY2FsbGJhY2sgKmRlYnVnKTsKKworc3RydWN0IG5pcl9zaGFkZXIgKgorZWly
X3Rnc2lfdG9fbmlyKGNvbnN0IHN0cnVjdCB0Z3NpX3Rva2VuICp0b2tlbnMsIHN0cnVjdCBwaXBl
X3NjcmVlbiAqc2NyZWVuKTsKKwordm9pZAorZWlyX3VuaWZvcm1zX3dyaXRlKGNvbnN0IHN0cnVj
dCBldG5hX2NvbnRleHQgKmN0eCwKKyAgICAgICAgICAgICAgICAgICBjb25zdCB2b2lkICp2LAor
ICAgICAgICAgICAgICAgICAgIHN0cnVjdCBwaXBlX2NvbnN0YW50X2J1ZmZlciAqY2IsCisgICAg
ICAgICAgICAgICAgICAgdWludDMyX3QgKnVuaWZvcm1zLCB1bnNpZ25lZCAqc2l6ZSk7CisKK3Vp
bnQzMl90CitlaXJfdW5pZm9ybXNfY29uc3RfY291bnQoY29uc3Qgdm9pZCAqdik7CisKK3VpbnQz
Ml90CitlaXJfdW5pZm9ybV9kaXJ0eV9mbGFncyhjb25zdCB2b2lkICp2KTsKKworYm9vbAorZWly
X2xpbmtfc2hhZGVycyhzdHJ1Y3QgZXRuYV9jb250ZXh0ICpjdHgpOworCitib29sCitlaXJfc2hh
ZGVyX3VwZGF0ZV92ZXJ0ZXgoc3RydWN0IGV0bmFfY29udGV4dCAqY3R4KTsKKworI2VuZGlmCmRp
ZmYgLS1naXQgYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9zY3JlZW4uYyBi
L3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X3NjcmVlbi5jCmluZGV4IDYyYjZm
MWM4MGZhLi42NDFlZTgwOTQ4YyAxMDA2NDQKLS0tIGEvc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5h
dml2L2V0bmF2aXZfc2NyZWVuLmMKKysrIGIvc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0
bmF2aXZfc2NyZWVuLmMKQEAgLTQ2LDYgKzQ2LDggQEAKICNpbmNsdWRlICJ1dGlsL3Vfc3RyaW5n
LmgiCiAKICNpbmNsdWRlICJzdGF0ZV90cmFja2VyL2RybV9kcml2ZXIuaCIKKyNpbmNsdWRlICJl
dG5hdml2L2NvbXBpbGVyL2Vpcl9jb21waWxlci5oIgorI2luY2x1ZGUgImV0bmF2aXYvY29tcGls
ZXIvZWlyX25pci5oIgogCiAjaW5jbHVkZSAiZHJtLXVhcGkvZHJtX2ZvdXJjYy5oIgogCkBAIC05
OCw2ICsxMDAsOSBAQCBldG5hX3NjcmVlbl9kZXN0cm95KHN0cnVjdCBwaXBlX3NjcmVlbiAqcHNj
cmVlbikKICAgIGlmIChzY3JlZW4tPnJvKQogICAgICAgRlJFRShzY3JlZW4tPnJvKTsKIAorICAg
aWYgKHNjcmVlbi0+Y29tcGlsZXIpCisgICAgICBlaXJfY29tcGlsZXJfZnJlZShzY3JlZW4tPmNv
bXBpbGVyKTsKKwogICAgaWYgKHNjcmVlbi0+ZGV2KQogICAgICAgZXRuYV9kZXZpY2VfZGVsKHNj
cmVlbi0+ZGV2KTsKIApAQCAtNDExLDYgKzQxNiwxMyBAQCBldG5hX3NjcmVlbl9nZXRfcGFyYW1m
KHN0cnVjdCBwaXBlX3NjcmVlbiAqcHNjcmVlbiwgZW51bSBwaXBlX2NhcGYgcGFyYW0pCiAgICBy
ZXR1cm4gMDsKIH0KIAorc3RhdGljIGNvbnN0IHZvaWQgKgorZXRuYV9zY3JlZW5fZ2V0X2NvbXBp
bGVyX29wdGlvbnMoc3RydWN0IHBpcGVfc2NyZWVuICpwc2NyZWVuLAorICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgZW51bSBwaXBlX3NoYWRlcl9pciBpciwgdW5zaWduZWQgc2hhZGVy
KQoreworICAgcmV0dXJuIGVpcl9nZXRfY29tcGlsZXJfb3B0aW9ucygpOworfQorCiBzdGF0aWMg
aW50CiBldG5hX3NjcmVlbl9nZXRfc2hhZGVyX3BhcmFtKHN0cnVjdCBwaXBlX3NjcmVlbiAqcHNj
cmVlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW51bSBwaXBlX3NoYWRlcl90eXBl
IHNoYWRlciwKQEAgLTEwMDIsNiArMTAxNCw3IEBAIGV0bmFfc2NyZWVuX2NyZWF0ZShzdHJ1Y3Qg
ZXRuYV9kZXZpY2UgKmRldiwgc3RydWN0IGV0bmFfZ3B1ICpncHUsCiAgICBwc2NyZWVuLT5kZXN0
cm95ID0gZXRuYV9zY3JlZW5fZGVzdHJveTsKICAgIHBzY3JlZW4tPmdldF9wYXJhbSA9IGV0bmFf
c2NyZWVuX2dldF9wYXJhbTsKICAgIHBzY3JlZW4tPmdldF9wYXJhbWYgPSBldG5hX3NjcmVlbl9n
ZXRfcGFyYW1mOworICAgcHNjcmVlbi0+Z2V0X2NvbXBpbGVyX29wdGlvbnMgPSBldG5hX3NjcmVl
bl9nZXRfY29tcGlsZXJfb3B0aW9uczsKICAgIHBzY3JlZW4tPmdldF9zaGFkZXJfcGFyYW0gPSBl
dG5hX3NjcmVlbl9nZXRfc2hhZGVyX3BhcmFtOwogCiAgICBwc2NyZWVuLT5nZXRfbmFtZSA9IGV0
bmFfc2NyZWVuX2dldF9uYW1lOwpAQCAtMTAxMyw2ICsxMDI2LDggQEAgZXRuYV9zY3JlZW5fY3Jl
YXRlKHN0cnVjdCBldG5hX2RldmljZSAqZGV2LCBzdHJ1Y3QgZXRuYV9ncHUgKmdwdSwKICAgIHBz
Y3JlZW4tPmlzX2Zvcm1hdF9zdXBwb3J0ZWQgPSBldG5hX3NjcmVlbl9pc19mb3JtYXRfc3VwcG9y
dGVkOwogICAgcHNjcmVlbi0+cXVlcnlfZG1hYnVmX21vZGlmaWVycyA9IGV0bmFfc2NyZWVuX3F1
ZXJ5X2RtYWJ1Zl9tb2RpZmllcnM7CiAKKyAgIHNjcmVlbi0+Y29tcGlsZXIgPSBlaXJfY29tcGls
ZXJfY3JlYXRlKCk7CisKICAgIGV0bmFfZmVuY2Vfc2NyZWVuX2luaXQocHNjcmVlbik7CiAgICBl
dG5hX3F1ZXJ5X3NjcmVlbl9pbml0KHBzY3JlZW4pOwogICAgZXRuYV9yZXNvdXJjZV9zY3JlZW5f
aW5pdChwc2NyZWVuKTsKZGlmZiAtLWdpdCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9l
dG5hdml2X3NjcmVlbi5oIGIvc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfc2Ny
ZWVuLmgKaW5kZXggOTc1Nzk4NTUyNmUuLmUzMmEyZjI5OThiIDEwMDY0NAotLS0gYS9zcmMvZ2Fs
bGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9zY3JlZW4uaAorKysgYi9zcmMvZ2FsbGl1bS9k
cml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9zY3JlZW4uaApAQCAtMzksNiArMzksNyBAQAogI2luY2x1
ZGUgInV0aWwvdV9keW5hcnJheS5oIgogI2luY2x1ZGUgInV0aWwvdV9oZWxwZXJzLmgiCiAKK3N0
cnVjdCBlaXJfY29tcGlsZXI7CiBzdHJ1Y3QgZXRuYV9ibzsKIAogLyogRW51bSB3aXRoIGluZGlj
ZXMgZm9yIGVhY2ggb2YgdGhlIGZlYXR1cmUgd29yZHMgKi8KQEAgLTgwLDYgKzgxLDcgQEAgc3Ry
dWN0IGV0bmFfc2NyZWVuIHsKICAgIHVpbnQzMl90IGZlYXR1cmVzW1ZJVl9GRUFUVVJFU19XT1JE
X0NPVU5UXTsKIAogICAgc3RydWN0IGV0bmFfc3BlY3Mgc3BlY3M7CisgICBzdHJ1Y3QgZWlyX2Nv
bXBpbGVyICpjb21waWxlcjsKIAogICAgdWludDMyX3QgZHJtX3ZlcnNpb247CiAKZGlmZiAtLWdp
dCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9tZXNvbi5idWlsZCBiL3NyYy9nYWxsaXVt
L2RyaXZlcnMvZXRuYXZpdi9tZXNvbi5idWlsZAppbmRleCAzYzI0N2FhZjA0Zi4uNTczMTZmODI4
MWYgMTAwNjQ0Ci0tLSBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9tZXNvbi5idWlsZAor
KysgYi9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvbWVzb24uYnVpbGQKQEAgLTQyLDYgKzQy
LDggQEAgZmlsZXNfZXRuYXZpdiA9IGZpbGVzKAogICAnZXRuYXZpdl9kZWJ1Zy5oJywKICAgJ2V0
bmF2aXZfZGlzYXNtLmMnLAogICAnZXRuYXZpdl9kaXNhc20uaCcsCisgICdldG5hdml2X2Vpci5j
JywKKyAgJ2V0bmF2aXZfZWlyLmgnLAogICAnZXRuYXZpdl9lbWl0LmMnLAogICAnZXRuYXZpdl9l
bWl0LmgnLAogICAnZXRuYXZpdl9ldGMyLmMnLApAQCAtOTQsMTQgKzk2LDE0IEBAIGxpYmV0bmF2
aXYgPSBzdGF0aWNfbGlicmFyeSgKICAgZmlsZXNfZXRuYXZpdiwKICAgY19hcmdzIDogW2Nfdmlz
X2FyZ3NdLAogICBpbmNsdWRlX2RpcmVjdG9yaWVzIDogW2luY19pbmNsdWRlLCBpbmNfc3JjLCBp
bmNfZ2FsbGl1bSwgaW5jX2dhbGxpdW1fYXV4XSwKLSAgZGVwZW5kZW5jaWVzIDogZGVwX2xpYmRy
bV9ldG5hdml2LAorICBkZXBlbmRlbmNpZXMgOiBbIGRlcF9saWJkcm1fZXRuYXZpdiwgaWRlcF9u
aXJfaGVhZGVycyBdCiApCiAKIGV0bmF2aXZfY29tcGlsZXIgPSBleGVjdXRhYmxlKAogICAnZXRu
YXZpdl9jb21waWxlcicsCiAgICdldG5hdml2X2NvbXBpbGVyX2NtZGxpbmUuYycsCiAgIGluY2x1
ZGVfZGlyZWN0b3JpZXMgOiBbaW5jX2luY2x1ZGUsIGluY19zcmMsIGluY19nYWxsaXVtLCBpbmNf
Z2FsbGl1bV9hdXhdLAotICBsaW5rX3dpdGggOiBbbGlibWVzYV91dGlsLCBsaWJnYWxsaXVtLCBs
aWJldG5hdml2LCBsaWJldG5hdml2X2djXSwKKyAgbGlua193aXRoIDogW2xpYm1lc2FfdXRpbCwg
bGliZ2FsbGl1bSwgbGliZXRuYXZpdiwgbGliZXRuYXZpdl9nYywgbGliZXRuYXZpdl9jb21waWxl
cl0sCiAgIGRlcGVuZGVuY2llcyA6IFtkZXBfbGliZHJtX2V0bmF2aXZdLAogICBidWlsZF9ieV9k
ZWZhdWx0IDogd2l0aF90b29scy5jb250YWlucygnZXRuYXZpdicpLAogICBpbnN0YWxsIDogd2l0
aF90b29scy5jb250YWlucygnZXRuYXZpdicpLApAQCAtMTA5LDUgKzExMSw1IEBAIGV0bmF2aXZf
Y29tcGlsZXIgPSBleGVjdXRhYmxlKAogCiBkcml2ZXJfZXRuYXZpdiA9IGRlY2xhcmVfZGVwZW5k
ZW5jeSgKICAgY29tcGlsZV9hcmdzIDogJy1ER0FMTElVTV9FVE5BVklWJywKLSAgbGlua193aXRo
IDogW2xpYmV0bmF2aXYsIGxpYmV0bmF2aXZkcm0sIGxpYmV0bmF2aXZfZ2NdLAorICBsaW5rX3dp
dGggOiBbbGliZXRuYXZpdiwgbGliZXRuYXZpdmRybSwgbGliZXRuYXZpdl9nYywgbGliZXRuYXZp
dl9jb21waWxlcl0sCiApCi0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fCmV0bmF2aXYgbWFpbGluZyBsaXN0CmV0bmF2aXZAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vZXRuYXZpdg==
