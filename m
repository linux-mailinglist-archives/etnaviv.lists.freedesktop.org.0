Return-Path: <etnaviv-bounces@lists.freedesktop.org>
X-Original-To: lists+etnaviv@lfdr.de
Delivered-To: lists+etnaviv@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 0527F19A49
	for <lists+etnaviv@lfdr.de>; Fri, 10 May 2019 11:09:44 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5B74D89BA5;
	Fri, 10 May 2019 09:09:38 +0000 (UTC)
X-Original-To: etnaviv@lists.freedesktop.org
Delivered-To: etnaviv@lists.freedesktop.org
Received: from mail-wr1-x442.google.com (mail-wr1-x442.google.com
 [IPv6:2a00:1450:4864:20::442])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D70E89BD5;
 Fri, 10 May 2019 09:09:36 +0000 (UTC)
Received: by mail-wr1-x442.google.com with SMTP id h4so6877479wre.7;
 Fri, 10 May 2019 02:09:36 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=o3B53XkoKt0ViBOBXi6PAbP/pcp5fehfU7enFMOEFEA=;
 b=PCW+uPfPKQe5M8xJGrrEjxFQPilR9qIGt0fgPrwXT0mSy1MgSeNZc2QCviY60ltMRy
 TvyY/RRqVhSgPV8upOtoPvfevGTF6tgqXlKklBMajV+vvXYCVb3E3Y5+K9f+IorJp/Ne
 WbNY/+mCByf4N3spu0kfFwotavKCRdj9PUjzvXUCjYv2hX5YNoYjgWKm2BxJ3UA1PpC7
 Ns0S/ARjHNmMW6ysE+NpQLZEXRvDUuKBxP8MwuOiPUl9XnHM4E3N9Z/G79av224vMo6w
 GBqAGkYPTzXYjm6gfimxG9ySSEX44WykR82ZlvL+lV38GjPzrxQFMbfagv7pqlP2ooSv
 y8dQ==
X-Gm-Message-State: APjAAAXli+skUrNDvZ3RjLIE5xTMyGDu7p2Fmnl9t4CJMr5ECskm/V7J
 zHkkZUBW7Tzf39kWvaadgGEbK17n46w=
X-Google-Smtp-Source: APXvYqyuzYN5kr0Tt+Igor+fEYqpgziVqMbKvr6F43cXV59JQiIOvsAN+DIVLO6zuJ6iyfNFpaYUwQ==
X-Received: by 2002:adf:fb4a:: with SMTP id c10mr6615989wrs.309.1557479374214; 
 Fri, 10 May 2019 02:09:34 -0700 (PDT)
Received: from localhost.localdomain (80-110-110-254.cgn.dynamic.surfer.at.
 [80.110.110.254])
 by smtp.gmail.com with ESMTPSA id l18sm1645344wrv.38.2019.05.10.02.09.32
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Fri, 10 May 2019 02:09:33 -0700 (PDT)
From: Christian Gmeiner <christian.gmeiner@gmail.com>
To: mesa-dev@lists.freedesktop.org
Subject: [RFC PATCH 13/17] etnaviv: enable nir paths
Date: Fri, 10 May 2019 11:09:11 +0200
Message-Id: <20190510090915.2739-14-christian.gmeiner@gmail.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190510090915.2739-1-christian.gmeiner@gmail.com>
References: <20190510090915.2739-1-christian.gmeiner@gmail.com>
MIME-Version: 1.0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=gmail.com; s=20161025;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=o3B53XkoKt0ViBOBXi6PAbP/pcp5fehfU7enFMOEFEA=;
 b=hQXLB2yW264wcCk5N0Mog0G0g7YNwjJctDd9TlUtTgFRzdqMueS6b2jwZKqrOEhEm7
 Rjz0g+yLeZUKnEaUZDFo5sXY1o3/PtqelmU6RFnKGOZUIEeWWu5CkkUHlnr72743y4ZE
 KhniFQDVF4XzUN+KGoWfkWDmsPZCP4N5q5r3LWI/u60RyOaS2VNJBV8zkCKhmtI60RaP
 djeWiA//46sjKj4OswPM8p787S/1zdi/Hfh5YGJvThP10NQ+u7l4jqCQdiDaJ1frHpdf
 HIEeDC3ViK6yDWOodbvUTid2VgYV5F3b7N2RKmE1I3cBSDnKShSjLzbot/EJPOVuA6QT
 Y9SA==
X-BeenThere: etnaviv@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <etnaviv.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/etnaviv>
List-Post: <mailto:etnaviv@lists.freedesktop.org>
List-Help: <mailto:etnaviv-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/etnaviv>,
 <mailto:etnaviv-request@lists.freedesktop.org?subject=subscribe>
Cc: Christian Gmeiner <christian.gmeiner@gmail.com>,
 etnaviv@lists.freedesktop.org, cphealy@gmail.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: etnaviv-bounces@lists.freedesktop.org
Sender: "etnaviv" <etnaviv-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogQ2hyaXN0aWFuIEdtZWluZXIgPGNocmlzdGlhbi5nbWVpbmVyQGdtYWls
LmNvbT4KLS0tCiBzcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9jb250ZXh0LmMg
fCAyMyArKysrKystLQogc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfc2hhZGVy
LmMgIHwgNTUgKysrKysrKysrKysrKysrKystLQogMiBmaWxlcyBjaGFuZ2VkLCA2OCBpbnNlcnRp
b25zKCspLCAxMCBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9zcmMvZ2FsbGl1bS9kcml2ZXJz
L2V0bmF2aXYvZXRuYXZpdl9jb250ZXh0LmMgYi9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYv
ZXRuYXZpdl9jb250ZXh0LmMKaW5kZXggZDc4ZDg5NDEwODcuLjNiNzY0ZjAxMTFiIDEwMDY0NAot
LS0gYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYvZXRuYXZpdl9jb250ZXh0LmMKKysrIGIv
c3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfY29udGV4dC5jCkBAIC0yNSw2ICsy
NSw4IEBACiAgKiAgICBDaHJpc3RpYW4gR21laW5lciA8Y2hyaXN0aWFuLmdtZWluZXJAZ21haWwu
Y29tPgogICovCiAKKyNpbmNsdWRlICJldG5hdml2X2Vpci5oIiAgIC8qIFRPRE86IGZpeCBwcm9i
bGVtcyB3aXRoIENPTVBBUkVfRlVOQ19ORVZFUiAqLworCiAjaW5jbHVkZSAiZXRuYXZpdl9jb250
ZXh0LmgiCiAKICNpbmNsdWRlICJldG5hdml2X2JsZW5kLmgiCkBAIC00NjYsMTIgKzQ2OCwyMSBA
QCBldG5hX2NvbnRleHRfY3JlYXRlKHN0cnVjdCBwaXBlX3NjcmVlbiAqcHNjcmVlbiwgdm9pZCAq
cHJpdiwgdW5zaWduZWQgZmxhZ3MpCiAgICBldG5hX3RleHR1cmVfaW5pdChwY3R4KTsKICAgIGV0
bmFfdHJhbnNmZXJfaW5pdChwY3R4KTsKIAotICAgY3R4LT51bmlmb3JtX2RpcnR5X2ZsYWdzID0g
ZXRuYV91bmlmb3JtX2RpcnR5X2ZsYWdzOwotICAgY3R4LT51bmlmb3Jtc193cml0ZSA9IGV0bmFf
dW5pZm9ybXNfd3JpdGU7Ci0gICBjdHgtPnVuaWZvcm1zX2NvbnN0X2NvdW50ID0gZXRuYV91bmlm
b3Jtc19jb25zdF9jb3VudDsKLSAgIGN0eC0+Y3JlYXRlX3NoYWRlcl92YXJpYW50ID0gZXRuYV9z
aGFkZXJfdmFyaWFudDsKLSAgIGN0eC0+c2hhZGVyX2xpbmsgPSBldG5hX3NoYWRlcl9saW5rOwot
ICAgY3R4LT5zaGFkZXJfdXBkYXRlX3ZlcnRleCA9IGV0bmFfc2hhZGVyX3VwZGF0ZV92ZXJ0ZXg7
CisgICBpZiAoZXRuYV9tZXNhX2RlYnVnICYgRVROQV9EQkdfTklSKSB7CisgICAgICBjdHgtPnVu
aWZvcm1fZGlydHlfZmxhZ3MgPSBlaXJfdW5pZm9ybV9kaXJ0eV9mbGFnczsKKyAgICAgIGN0eC0+
dW5pZm9ybXNfd3JpdGUgPSBlaXJfdW5pZm9ybXNfd3JpdGU7CisgICAgICBjdHgtPnVuaWZvcm1z
X2NvbnN0X2NvdW50ID0gZWlyX3VuaWZvcm1zX2NvbnN0X2NvdW50OworICAgICAgY3R4LT5jcmVh
dGVfc2hhZGVyX3ZhcmlhbnQgPSBlaXJfc2hhZGVyX3ZhcmlhbnQ7CisgICAgICBjdHgtPnNoYWRl
cl9saW5rID0gZWlyX2xpbmtfc2hhZGVyczsKKyAgICAgIGN0eC0+c2hhZGVyX3VwZGF0ZV92ZXJ0
ZXggPSBlaXJfc2hhZGVyX3VwZGF0ZV92ZXJ0ZXg7CisgICB9IGVsc2UgeworICAgICAgY3R4LT51
bmlmb3JtX2RpcnR5X2ZsYWdzID0gZXRuYV91bmlmb3JtX2RpcnR5X2ZsYWdzOworICAgICAgY3R4
LT51bmlmb3Jtc193cml0ZSA9IGV0bmFfdW5pZm9ybXNfd3JpdGU7CisgICAgICBjdHgtPnVuaWZv
cm1zX2NvbnN0X2NvdW50ID0gZXRuYV91bmlmb3Jtc19jb25zdF9jb3VudDsKKyAgICAgIGN0eC0+
Y3JlYXRlX3NoYWRlcl92YXJpYW50ID0gZXRuYV9zaGFkZXJfdmFyaWFudDsKKyAgICAgIGN0eC0+
c2hhZGVyX2xpbmsgPSBldG5hX3NoYWRlcl9saW5rOworICAgICAgY3R4LT5zaGFkZXJfdXBkYXRl
X3ZlcnRleCA9IGV0bmFfc2hhZGVyX3VwZGF0ZV92ZXJ0ZXg7CisgICB9CiAKICAgIGN0eC0+Ymxp
dHRlciA9IHV0aWxfYmxpdHRlcl9jcmVhdGUocGN0eCk7CiAgICBpZiAoIWN0eC0+YmxpdHRlcikK
ZGlmZiAtLWdpdCBhL3NyYy9nYWxsaXVtL2RyaXZlcnMvZXRuYXZpdi9ldG5hdml2X3NoYWRlci5j
IGIvc3JjL2dhbGxpdW0vZHJpdmVycy9ldG5hdml2L2V0bmF2aXZfc2hhZGVyLmMKaW5kZXggMzRj
NTQ2YzNjNjYuLmNlYzI3ZGNiMmY4IDEwMDY0NAotLS0gYS9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0
bmF2aXYvZXRuYXZpdl9zaGFkZXIuYworKysgYi9zcmMvZ2FsbGl1bS9kcml2ZXJzL2V0bmF2aXYv
ZXRuYXZpdl9zaGFkZXIuYwpAQCAtMjQsNiArMjQsNyBAQAogICogICAgV2xhZGltaXIgSi4gdmFu
IGRlciBMYWFuIDxsYWFud2pAZ21haWwuY29tPgogICovCiAKKyNpbmNsdWRlICJldG5hdml2X2Vp
ci5oIgogI2luY2x1ZGUgImV0bmF2aXZfc2hhZGVyLmgiCiAKICNpbmNsdWRlICJldG5hdml2X2Nv
bXBpbGVyLmgiCkBAIC0zNiw2ICszNyw0NCBAQAogI2luY2x1ZGUgInV0aWwvdV9tYXRoLmgiCiAj
aW5jbHVkZSAidXRpbC91X21lbW9yeS5oIgogCitzdGF0aWMgc3RydWN0IGVpcl9zaGFkZXIgKgor
Y3JlYXRlX3NoYWRlcl9zdGF0ZW9iaihzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4LCBjb25zdCBz
dHJ1Y3QgcGlwZV9zaGFkZXJfc3RhdGUgKmNzbywKKyAgICAgICAgICAgICAgICAgICAgICAgZ2xf
c2hhZGVyX3N0YWdlIHR5cGUpCit7CisgICBzdHJ1Y3QgZXRuYV9jb250ZXh0ICpjdHggPSBldG5h
X2NvbnRleHQocGN0eCk7CisgICBzdHJ1Y3QgZWlyX2NvbXBpbGVyICpjb21waWxlciA9IGN0eC0+
c2NyZWVuLT5jb21waWxlcjsKKworICAgcmV0dXJuIGVpcl9zaGFkZXJfY3JlYXRlKGNvbXBpbGVy
LCBjc28sIHR5cGUsICZjdHgtPmRlYnVnLCBwY3R4LT5zY3JlZW4pOworfQorCitzdGF0aWMgdm9p
ZCAqCitldG5hX2ZzX3N0YXRlX2NyZWF0ZShzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4LCBjb25z
dCBzdHJ1Y3QgcGlwZV9zaGFkZXJfc3RhdGUgKmNzbykKK3sKKyAgIHJldHVybiBjcmVhdGVfc2hh
ZGVyX3N0YXRlb2JqKHBjdHgsIGNzbywgTUVTQV9TSEFERVJfRlJBR01FTlQpOworfQorCitzdGF0
aWMgdm9pZAorZXRuYV9mc19zdGF0ZV9kZWxldGUoc3RydWN0IHBpcGVfY29udGV4dCAqcGN0eCwg
dm9pZCAqaHdjc28pCit7CisgICBzdHJ1Y3QgZWlyX3NoYWRlciAqc28gPSBod2NzbzsKKworICAg
ZWlyX3NoYWRlcl9kZXN0cm95KHNvKTsKK30KKworc3RhdGljIHZvaWQgKgorZXRuYV92c19zdGF0
ZV9jcmVhdGUoc3RydWN0IHBpcGVfY29udGV4dCAqcGN0eCwgY29uc3Qgc3RydWN0IHBpcGVfc2hh
ZGVyX3N0YXRlICpjc28pCit7CisgICByZXR1cm4gY3JlYXRlX3NoYWRlcl9zdGF0ZW9iaihwY3R4
LCBjc28sIE1FU0FfU0hBREVSX1ZFUlRFWCk7Cit9CisKK3N0YXRpYyB2b2lkCitldG5hX3ZzX3N0
YXRlX2RlbGV0ZShzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4LCB2b2lkICpod2NzbykKK3sKKyAg
IHN0cnVjdCBlaXJfc2hhZGVyICpzbyA9IGh3Y3NvOworCisgICBlaXJfc2hhZGVyX2Rlc3Ryb3ko
c28pOworfQorCiAvKiBVcGxvYWQgc2hhZGVyIGNvZGUgdG8gYm8sIGlmIG5vdCBhbHJlYWR5IGRv
bmUgKi8KIHN0YXRpYyBib29sIGV0bmFfaWNhY2hlX3VwbG9hZF9zaGFkZXIoc3RydWN0IGV0bmFf
Y29udGV4dCAqY3R4LCBzdHJ1Y3QgZXRuYV9zaGFkZXJfdmFyaWFudCAqdikKIHsKQEAgLTQ1OSwx
MCArNDk4LDE4IEBAIGV0bmFfYmluZF92c19zdGF0ZShzdHJ1Y3QgcGlwZV9jb250ZXh0ICpwY3R4
LCB2b2lkICpod2NzbykKIHZvaWQKIGV0bmFfc2hhZGVyX2luaXQoc3RydWN0IHBpcGVfY29udGV4
dCAqcGN0eCkKIHsKLSAgIHBjdHgtPmNyZWF0ZV9mc19zdGF0ZSA9IGV0bmFfY3JlYXRlX3NoYWRl
cl9zdGF0ZTsKKyAgIGlmIChldG5hX21lc2FfZGVidWcgJiBFVE5BX0RCR19OSVIpIHsKKyAgICAg
IHBjdHgtPmNyZWF0ZV9mc19zdGF0ZSA9IGV0bmFfZnNfc3RhdGVfY3JlYXRlOworICAgICAgcGN0
eC0+ZGVsZXRlX2ZzX3N0YXRlID0gZXRuYV9mc19zdGF0ZV9kZWxldGU7CisgICAgICBwY3R4LT5j
cmVhdGVfdnNfc3RhdGUgPSBldG5hX3ZzX3N0YXRlX2NyZWF0ZTsKKyAgICAgIHBjdHgtPmRlbGV0
ZV92c19zdGF0ZSA9IGV0bmFfdnNfc3RhdGVfZGVsZXRlOworICAgfSBlbHNlIHsKKyAgICAgIHBj
dHgtPmNyZWF0ZV9mc19zdGF0ZSA9IGV0bmFfY3JlYXRlX3NoYWRlcl9zdGF0ZTsKKyAgICAgIHBj
dHgtPmRlbGV0ZV9mc19zdGF0ZSA9IGV0bmFfZGVsZXRlX3NoYWRlcl9zdGF0ZTsKKyAgICAgIHBj
dHgtPmNyZWF0ZV92c19zdGF0ZSA9IGV0bmFfY3JlYXRlX3NoYWRlcl9zdGF0ZTsKKyAgICAgIHBj
dHgtPmRlbGV0ZV92c19zdGF0ZSA9IGV0bmFfZGVsZXRlX3NoYWRlcl9zdGF0ZTsKKyAgIH0KKwog
ICAgcGN0eC0+YmluZF9mc19zdGF0ZSA9IGV0bmFfYmluZF9mc19zdGF0ZTsKLSAgIHBjdHgtPmRl
bGV0ZV9mc19zdGF0ZSA9IGV0bmFfZGVsZXRlX3NoYWRlcl9zdGF0ZTsKLSAgIHBjdHgtPmNyZWF0
ZV92c19zdGF0ZSA9IGV0bmFfY3JlYXRlX3NoYWRlcl9zdGF0ZTsKICAgIHBjdHgtPmJpbmRfdnNf
c3RhdGUgPSBldG5hX2JpbmRfdnNfc3RhdGU7Ci0gICBwY3R4LT5kZWxldGVfdnNfc3RhdGUgPSBl
dG5hX2RlbGV0ZV9zaGFkZXJfc3RhdGU7CiB9Ci0tIAoyLjIxLjAKCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCmV0bmF2aXYgbWFpbGluZyBsaXN0CmV0bmF2
aXZAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21h
aWxtYW4vbGlzdGluZm8vZXRuYXZpdg==
